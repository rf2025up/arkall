ğŸš€ Starting ArkOK V2 Server...
ğŸŒ Environment: development
ğŸ”Œ Port: 3000
ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
ğŸ“ Static path exists: true
ğŸ”§ Setting up Socket.IO handlers...
ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
âœ… Database connected successfully
ğŸš€ ArkOK V2 Server running on port 3000
ğŸ“‹ Health check: http://0.0.0.0:3000/health
ğŸ”Œ WebSocket server ready
ğŸŒ Environment: development
2025-12-18T15:46:42.226Z - GET /prep
2025-12-18T15:46:42.234Z - POST /api/reports/student-stats
2025-12-18T15:46:42.433Z - GET /assets/index-CPDA1oy3.css
2025-12-18T15:46:42.449Z - GET /assets/index-BuvS4IkK.js
2025-12-18T15:46:42.617Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-18T15:46:42.717Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-18T15:46:42.720Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-18T15:46:42.725Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-18T15:46:42.727Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-18T15:46:47.322Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-18T15:46:47.325Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-18T15:46:47.387Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.388Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:47.389Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.390Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:47.391Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.391Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:47.392Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.393Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:47.394Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.394Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:47.395Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.396Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:47.396Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:47.397Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-18T15:46:47.487Z - GET /avatar.jpg
2025-12-18T15:46:49.694Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-18T15:46:49.698Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-18T15:46:49.700Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
2025-12-18T15:46:50.233Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-18T15:46:50.235Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-18T15:46:50.295Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.296Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:50.296Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.297Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:50.297Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.298Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:50.299Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.299Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:50.300Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.300Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:50.301Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.302Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
2025-12-18T15:46:50.302Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-18
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-18
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-18T15:46:50.303Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-18T00:00:00.000Z - 2025-12-18T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-17T22:00:00.000Z - 2025-12-19T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-17T22:00:00.000Z"),
            lte: new Date("2025-12-19T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-18T15:46:54.384Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-18T15:46:57.576Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-18T15:46:57.636Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-18T16:04:20.998Z - GET /health
2025-12-18T16:04:47.764Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 465
Token verification error: SyntaxError: Bad control character in string literal in JSON at position 118
    at JSON.parse (<anonymous>)
    at Object.jwsDecode [as decode] (/home/devbox/project/arkok-v2/server/node_modules/jws/lib/verify-stream.js:71:20)
    at module.exports (/home/devbox/project/arkok-v2/server/node_modules/jsonwebtoken/decode.js:5:21)
    at module.exports [as verify] (/home/devbox/project/arkok-v2/server/node_modules/jsonwebtoken/verify.js:76:20)
    at AuthService.verifyToken (/home/devbox/project/arkok-v2/server/dist/services/auth.service.js:198:52)
    at /home/devbox/project/arkok-v2/server/dist/middleware/auth.middleware.js:23:34
    at Layer.handle [as handle_request] (/home/devbox/project/arkok-v2/server/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/devbox/project/arkok-v2/server/node_modules/express/lib/router/index.js:328:13)
    at /home/devbox/project/arkok-v2/server/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/devbox/project/arkok-v2/server/node_modules/express/lib/router/index.js:346:12)
ğŸ” [AUTH_MIDDLEWARE] Token verification result: false
âŒ [AUTH_MIDDLEWARE] Invalid token
2025-12-18T16:06:50.029Z - GET /
2025-12-18T16:06:50.035Z - GET /assets/index-BuvS4IkK.js
2025-12-18T16:06:50.036Z - GET /assets/index-CPDA1oy3.css
2025-12-18T16:06:51.152Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-18T16:06:51.181Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-18T16:06:51.183Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-18T16:06:51.186Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
2025-12-18T16:06:51.198Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
2025-12-18T16:06:51.203Z - GET /avatar.jpg
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-18T16:06:51.589Z - GET /vite.svg
2025-12-18T16:21:24.260Z - POST /api/auth/login
2025-12-19T02:24:00.861Z - GET /prep
2025-12-19T02:24:01.051Z - GET /assets/index-CPDA1oy3.css
2025-12-19T02:24:01.055Z - GET /assets/index-BuvS4IkK.js
2025-12-19T02:24:01.213Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T02:24:01.263Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T02:24:01.266Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T02:24:01.271Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T02:24:01.272Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
2025-12-19T02:24:29.284Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T02:24:29.398Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T02:24:29.415Z - GET /avatar.jpg
2025-12-19T02:24:31.241Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T02:24:31.245Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T02:24:31.247Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:00:14.147Z - GET /prep
2025-12-19T03:00:14.235Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:00:14.237Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:00:14.355Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:00:14.358Z - GET /vite.svg
2025-12-19T03:00:14.414Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:00:14.418Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:00:14.419Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:00:14.420Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:00:58.902Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:00:59.042Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:00:59.059Z - GET /avatar.jpg
2025-12-19T03:01:00.188Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 12 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T03:01:00.376Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:01:00.377Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:01:00.380Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting all records for student 1896c410-1a91-4281-ac02-797756c638cc, limit: 200
2025-12-19T03:01:00.381Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting student progress for 1896c410-1a91-4281-ac02-797756c638cc
[LMS_SERVICE] Get all student records error: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:831:60

  828 async getAllStudentRecords(schoolId, studentId, limit = 100) {
  829     try {
  830         console.log(`[LMS_SERVICE] Getting all records for student ${studentId}, limit: ${limit}`);
â†’ 831         const records = await this.prisma.task_records.findMany({
                where: {
                  schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
                  studentId: "1896c410-1a91-4281-ac02-797756c638cc"
                },
                include: {
                  student: {
                  ~~~~~~~
                    select: {
                      id: true,
                      name: true,
                      className: true
                    }
                  },
                  lesson_plans: {
                    select: {
                      id: true,
                      title: true,
                      date: true
                    }
                  },
              ?   schools?: true,
              ?   students?: true
                },
                orderBy: [
                  {
                    createdAt: "desc"
                  }
                ],
                take: 200
              })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getAllStudentRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:831:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:336:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/all-records: Error: è·å–å­¦ç”Ÿå†å²è®°å½•å¤±è´¥
    at LMSService.getAllStudentRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:855:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:336:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
[LMS_SERVICE] æŸ¥æ‰¾å­¦æ ¡æœ€æ–°æ•™å­¦è®¡åˆ’ä½œä¸ºä¸»è¦æ•°æ®æº
[LMS_SERVICE] Found latest lesson plan 34b22a10-2275-4fc4-9eef-33209adaa263
[LMS_SERVICE] Content structure: {
  hasContent: true,
  hasCourseInfo: true,
  courseInfoKeys: [ 'math', 'chinese', 'english' ]
}
[LMS_SERVICE] âœ… åœ¨æ•™å­¦è®¡åˆ’ä¸­æ‰¾åˆ°è¯¾ç¨‹è¿›åº¦: 34b22a10-2275-4fc4-9eef-33209adaa263
[LMS_SERVICE] è¿”å›çš„è¯¾ç¨‹è¿›åº¦: {
  chinese: { unit: '1', title: 'ç¬¬ä¸€å•å…ƒ è¯­æ–‡è¯¾ç¨‹', lesson: '1' },
  math: { unit: '1', title: 'ç¬¬ä¸€å•å…ƒ æ•°å­¦è¯¾ç¨‹', lesson: '1' },
  english: { unit: '1', title: 'Unit 1 English Course' },
  source: 'lesson_plan',
  updatedAt: '2025-12-18T15:40:30.304Z'
}
2025-12-19T03:01:06.394Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:01:06.440Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:31.862Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 12 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T03:04:31.958Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:31.959Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:31.959Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting all records for student 1896c410-1a91-4281-ac02-797756c638cc, limit: 200
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
[LMS_SERVICE] Get all student records error: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:831:60

  828 async getAllStudentRecords(schoolId, studentId, limit = 100) {
  829     try {
  830         console.log(`[LMS_SERVICE] Getting all records for student ${studentId}, limit: ${limit}`);
â†’ 831         const records = await this.prisma.task_records.findMany({
                where: {
                  schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
                  studentId: "1896c410-1a91-4281-ac02-797756c638cc"
                },
                include: {
                  student: {
                  ~~~~~~~
                    select: {
                      id: true,
                      name: true,
                      className: true
                    }
                  },
                  lesson_plans: {
                    select: {
                      id: true,
                      title: true,
                      date: true
                    }
                  },
              ?   schools?: true,
              ?   students?: true
                },
                orderBy: [
                  {
                    createdAt: "desc"
                  }
                ],
                take: 200
              })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getAllStudentRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:831:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:336:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/all-records: Error: è·å–å­¦ç”Ÿå†å²è®°å½•å¤±è´¥
    at LMSService.getAllStudentRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:855:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:336:25
2025-12-19T03:04:31.963Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting student progress for 1896c410-1a91-4281-ac02-797756c638cc
[LMS_SERVICE] æŸ¥æ‰¾å­¦æ ¡æœ€æ–°æ•™å­¦è®¡åˆ’ä½œä¸ºä¸»è¦æ•°æ®æº
[LMS_SERVICE] Found latest lesson plan 34b22a10-2275-4fc4-9eef-33209adaa263
[LMS_SERVICE] Content structure: {
  hasContent: true,
  hasCourseInfo: true,
  courseInfoKeys: [ 'math', 'chinese', 'english' ]
}
[LMS_SERVICE] âœ… åœ¨æ•™å­¦è®¡åˆ’ä¸­æ‰¾åˆ°è¯¾ç¨‹è¿›åº¦: 34b22a10-2275-4fc4-9eef-33209adaa263
[LMS_SERVICE] è¿”å›çš„è¯¾ç¨‹è¿›åº¦: {
  chinese: { unit: '1', title: 'ç¬¬ä¸€å•å…ƒ è¯­æ–‡è¯¾ç¨‹', lesson: '1' },
  math: { unit: '1', title: 'ç¬¬ä¸€å•å…ƒ æ•°å­¦è¯¾ç¨‹', lesson: '1' },
  english: { unit: '1', title: 'Unit 1 English Course' },
  source: 'lesson_plan',
  updatedAt: '2025-12-18T15:40:30.304Z'
}
2025-12-19T03:04:41.318Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:41.373Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:43.485Z - GET /api/badges
2025-12-19T03:04:43.485Z - GET /api/badges/stats
2025-12-19T03:04:43.485Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { schoolId: '625e503b-aa7e-44fe-9982-237d828af717', limit: '100' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: 100,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 100, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:51.593Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:04:51.596Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:04:51.598Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
2025-12-19T03:04:52.444Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:04:52.446Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:04:52.511Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.512Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:52.516Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.517Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:52.518Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.518Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:52.519Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.520Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:52.520Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.521Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:52.521Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.522Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:04:52.522Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:04:52.523Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:04:57.184Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:57.235Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:58.645Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:04:58.648Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:04:58.650Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
2025-12-19T03:04:59.504Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:04:59.559Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:05:00.387Z - GET /api/pkmatches
2025-12-19T03:05:00.388Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { schoolId: '625e503b-aa7e-44fe-9982-237d828af717', limit: '100' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: 100,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 100, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:07:58.779Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:07:58.781Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:07:58.895Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.896Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:07:58.899Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.900Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:07:58.902Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.903Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:07:58.904Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.904Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:07:58.905Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.906Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:07:58.906Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.907Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:07:58.907Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:07:58.908Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:08:17.070Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:08:17.478Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:08:17.484Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:08:17.555Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.556Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:08:17.558Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.559Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:08:17.559Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.560Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:08:17.560Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.561Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:08:17.561Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.562Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:08:17.562Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.563Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:08:17.564Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:08:17.564Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:08:18.288Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:08:18.292Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:08:18.293Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
2025-12-19T03:08:18.683Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:08:18.733Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:25:23.317Z - GET /prep
2025-12-19T03:25:23.407Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:25:23.410Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:25:23.645Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:25:23.707Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:25:23.708Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:25:23.712Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:25:23.713Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=34b22a10-2275-4fc4-9eef-33209adaa263, date=Thu Dec 18 2025 15:40:30 GMT+0000 (Coordinated Universal Time)
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:25:51.600Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’
ğŸ”’ [LMS_SECURITY] Teacher ID: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ”’ [LMS_SECURITY] School ID: 625e503b-aa7e-44fe-9982-237d828af717
ğŸ”’ [LMS_SECURITY] Debugging - Request params: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  title: '12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’',
  date: '2025-12-19T03:25:44.067Z'
}
ğŸ” [LMS_DEBUG] Querying students with params: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  isActive: true
}
ğŸ” [LMS_DEBUG] Query result: Found 7 students
ğŸ” [LMS_DEBUG] All students for teacher 5ca64703-c978-4d01-bf44-a7568f34f556: 7
ğŸ” [LMS_DEBUG] Student schoolIds: [ '625e503b-aa7e-44fe-9982-237d828af717' ]
ğŸ‘¥ [LMS_SECURITY] Found 7 students for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: Serviceä¿®å¤æµ‹è¯• (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: å¾æ±‡æ´‹ (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: 33ã€‘ã€‘44 (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: å“ˆå“ˆå“ˆ (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: 115 (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: å®å¯æ­† (null) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: æ›¾æ¬£åª› (null) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LMS_SECURITY] Created lesson plan: 44490b84-dbfd-423a-9da7-364fceb3faf2 for 7 students
ğŸ¯ [LMS_FOUR_TIER] Four-tier publication mode started
ğŸ“… [LMS_FOUR_TIER] Date range: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ“ˆ [PROGRESS_TIER] Processing stateful tasks (Progress)...
ğŸ§¹ [ACTION_TIER] Daily sweep for action-based tasks...
ğŸ§¹ [ACTION_TIER] Archived 0 class-wide and 0 personalized tasks
ğŸ« [CLASS_TIER] Creating class-wide tasks...
ğŸ¯ [PERSONALIZED_TIER] Creating personalized tasks...
ğŸ“Š [LMS_FOUR_TIER] Four-tier Publication Summary:
   - Progress tasks created: 0
   - Methodology tasks created: 0
   - Growth tasks created: 0
   - Personalized tasks created: 0
   - Total tasks archived: 0
   - Total students affected: 7
ğŸ“¡ [LMS_FOUR_TIER] Broadcasted four-tier publication event to teacher 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ¯ [LMS_FOUR_TIER] Distribution: Progress(0) + Methodology(0) + Growth(0) + Personalized(0)
2025-12-19T03:25:54.497Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:25:54.499Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:25:54.557Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.558Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:25:54.558Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.559Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:25:54.560Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.561Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:25:54.561Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.562Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:25:54.563Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.564Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:25:54.564Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.565Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:25:54.566Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:25:54.566Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:25:54.659Z - GET /avatar.jpg
2025-12-19T03:25:55.530Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting student progress for 1896c410-1a91-4281-ac02-797756c638cc
[LMS_SERVICE] æŸ¥æ‰¾å­¦æ ¡æœ€æ–°æ•™å­¦è®¡åˆ’ä½œä¸ºä¸»è¦æ•°æ®æº
[LMS_SERVICE] Found latest lesson plan 44490b84-dbfd-423a-9da7-364fceb3faf2
[LMS_SERVICE] Content structure: { hasContent: true, hasCourseInfo: true, courseInfoKeys: [] }
[LMS_SERVICE] âš ï¸ æ•™å­¦è®¡åˆ’ä¸­æ²¡æœ‰courseInfoä¿¡æ¯
[LMS_SERVICE] Content keys: [
  'qcTasks',
  'courseInfo',
  'normalTasks',
  'publishedAt',
  'publishedTo',
  'publisherId',
  'specialTasks',
  'securityScope'
]
[LMS_SERVICE] æ£€æŸ¥æ‰€æœ‰æ•™å­¦è®¡åˆ’ä½œä¸ºå…œåº•æ–¹æ¡ˆ
[LMS_SERVICE] âš ï¸ æ²¡æœ‰æ‰¾åˆ°ä»»ä½•è¯¾ç¨‹è¿›åº¦ï¼Œè¿”å›é»˜è®¤æ•°æ®
2025-12-19T03:30:38.291Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting student progress for 1896c410-1a91-4281-ac02-797756c638cc
[LMS_SERVICE] æŸ¥æ‰¾å­¦æ ¡æœ€æ–°æ•™å­¦è®¡åˆ’ä½œä¸ºä¸»è¦æ•°æ®æº
[LMS_SERVICE] Found latest lesson plan 44490b84-dbfd-423a-9da7-364fceb3faf2
[LMS_SERVICE] Content structure: { hasContent: true, hasCourseInfo: true, courseInfoKeys: [] }
[LMS_SERVICE] âš ï¸ æ•™å­¦è®¡åˆ’ä¸­æ²¡æœ‰courseInfoä¿¡æ¯
[LMS_SERVICE] Content keys: [
  'qcTasks',
  'courseInfo',
  'normalTasks',
  'publishedAt',
  'publishedTo',
  'publisherId',
  'specialTasks',
  'securityScope'
]
[LMS_SERVICE] æ£€æŸ¥æ‰€æœ‰æ•™å­¦è®¡åˆ’ä½œä¸ºå…œåº•æ–¹æ¡ˆ
[LMS_SERVICE] âš ï¸ æ²¡æœ‰æ‰¾åˆ°ä»»ä½•è¯¾ç¨‹è¿›åº¦ï¼Œè¿”å›é»˜è®¤æ•°æ®
2025-12-19T03:30:39.812Z - GET /qc
2025-12-19T03:30:39.903Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:30:39.910Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:30:40.065Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:30:40.068Z - GET /vite.svg
2025-12-19T03:30:40.219Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:30:40.220Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:30:40.222Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:30:40.289Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.290Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:30:40.290Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.291Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:30:40.292Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.293Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:30:40.293Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.294Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:30:40.295Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.296Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:30:40.296Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.297Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:30:40.297Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:30:40.298Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:30:40.391Z - GET /avatar.jpg
2025-12-19T03:30:42.570Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:30:42.673Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:32:16.970Z - GET /
2025-12-19T03:32:16.976Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:32:16.976Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:32:17.061Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:32:17.099Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:32:17.100Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:32:17.104Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:32:17.106Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:32:17.123Z - GET /avatar.jpg
2025-12-19T03:32:23.822Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:32:23.825Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:32:23.826Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=44490b84-dbfd-423a-9da7-364fceb3faf2, date=Fri Dec 19 2025 03:25:44 GMT+0000 (Coordinated Universal Time)
2025-12-19T03:32:41.129Z - GET /prep
2025-12-19T03:32:41.135Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:32:41.135Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:32:41.147Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:32:41.167Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:32:41.168Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T03:32:41.173Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:32:41.174Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=44490b84-dbfd-423a-9da7-364fceb3faf2, date=Fri Dec 19 2025 03:25:44 GMT+0000 (Coordinated Universal Time)
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:32:45.017Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:32:45.026Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
2025-12-19T03:32:45.029Z - GET /avatar.jpg
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:35:39.846Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:35:39.847Z - GET /api/habits
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:35:39.888Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:35:39.889Z - GET /api/habits
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:35:44.560Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:35:44.576Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:36:32.694Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:36:32.698Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:36:32.699Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=44490b84-dbfd-423a-9da7-364fceb3faf2, date=Fri Dec 19 2025 03:25:44 GMT+0000 (Coordinated Universal Time)
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:36:41.542Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:36:41.543Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:36:41.550Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.551Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:36:41.551Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.552Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:36:41.552Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.553Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:36:41.553Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.554Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:36:41.555Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.555Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
2025-12-19T03:36:41.587Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.587Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:36:41.588Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:36:41.588Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:35.636Z - GET /qc
2025-12-19T03:41:35.642Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:41:35.642Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:41:35.655Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:41:35.667Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:41:35.669Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:41:35.670Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:41:35.682Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:41:35.684Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.685Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:41:35.686Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.687Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T03:41:35.688Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.689Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.689Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.690Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.691Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.691Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.692Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.692Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:35.717Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.718Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:35.721Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
2025-12-19T03:41:35.729Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.730Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.730Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.731Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.731Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.732Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.733Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.733Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:35.740Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.740Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:35.742Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.743Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.743Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:35.744Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:35.744Z - GET /avatar.jpg
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:41:47.855Z - GET /prep
2025-12-19T03:41:47.936Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:41:47.938Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:41:48.107Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:41:48.186Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:41:48.188Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T03:41:48.192Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:41:48.193Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=44490b84-dbfd-423a-9da7-364fceb3faf2, date=Fri Dec 19 2025 03:25:44 GMT+0000 (Coordinated Universal Time)
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:41:49.068Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
2025-12-19T03:41:49.073Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:41:49.137Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.138Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:49.139Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.139Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:49.140Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.141Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:49.141Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.142Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:49.142Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.143Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:49.143Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.144Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:49.144Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:49.145Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:49.274Z - GET /avatar.jpg
2025-12-19T03:41:50.149Z - GET /qc
2025-12-19T03:41:50.234Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:41:50.239Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:41:50.313Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:41:50.315Z - GET /vite.svg
2025-12-19T03:41:50.383Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:41:50.385Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T03:41:50.386Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:41:50.491Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.491Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:50.492Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.492Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:50.494Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1dd13004-95e4-4643-947f-eac9e198f465, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.495Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:50.495Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=14c6339d-7b8c-48c7-8695-f638375a6b3d, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.496Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:50.496Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=33a7f6cf-d714-498d-97d3-a2c15547cce7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.497Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:50.497Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=00752949-2494-48e7-9211-c019e4fd5db4, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.498Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
2025-12-19T03:41:50.498Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=01137edf-b8ec-46a1-8196-d20268402df7, date=2025-12-19
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸ: 2025-12-19
ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-19T03:41:50.499Z
ğŸ”¥ [LMS DEBUG] ç›®æ ‡æ—¥æœŸèŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [24H_RULE] ç›®æ ‡æ—¥æœŸä¸ä»Šå¤©ç›¸å·®: 0 å¤©
ğŸ”¥ [24H_RULE] ä»Šæ—¥æ•°æ®ï¼Œæ­£å¸¸æŸ¥è¯¢èŒƒå›´: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: 2025-12-18T22:00:00.000Z - 2025-12-20T01:59:59.999Z
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1dd13004-95e4-4643-947f-eac9e198f465",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "1896c410-1a91-4281-ac02-797756c638cc",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "33a7f6cf-d714-498d-97d3-a2c15547cce7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "00752949-2494-48e7-9211-c019e4fd5db4",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "01137edf-b8ec-46a1-8196-d20268402df7",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
è·å–æ¯æ—¥ä»»åŠ¡è®°å½•å¤±è´¥: PrismaClientValidationError: 
Invalid `this.prisma.task_records.findMany()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:60

  745 const extendedEnd = new Date(queryEndDate.getTime() + 2 * 60 * 60 * 1000); // å2å°æ—¶ç¼“å†²
  746 console.log(`ğŸ”¥ [LMS DEBUG] æœ€ç»ˆæŸ¥è¯¢èŒƒå›´: ${extendedStart.toISOString()} - ${extendedEnd.toISOString()}`);
  747 // æ‰§è¡ŒæŸ¥è¯¢ - âœ… ä¿®å¤ï¼šåªæŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„ä»»åŠ¡è®°å½•ï¼ˆå®ç°è¦†ç›–è§„åˆ™ï¼‰
â†’ 748 const records = await this.prisma.task_records.findMany({
        where: {
          schoolId: "625e503b-aa7e-44fe-9982-237d828af717",
          studentId: "14c6339d-7b8c-48c7-8695-f638375a6b3d",
          is_current: true,
          createdAt: {
            gte: new Date("2025-12-18T22:00:00.000Z"),
            lte: new Date("2025-12-20T01:59:59.999Z")
          }
        },
        include: {
          student: {
          ~~~~~~~
            select: {
              id: true,
              name: true,
              className: true
            }
          },
          lesson_plans: {
            select: {
              id: true,
              title: true,
              date: true
            }
          },
      ?   schools?: true,
      ?   students?: true
        },
        orderBy: [
          {
            type: "asc"
          },
          {
            createdAt: "asc"
          }
        ]
      })

Unknown field `student` for include statement on model `task_records`. Available options are marked with ?.
    at wn (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:748:29)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25 {
  clientVersion: '5.22.0'
}
âŒ Error in GET /api/lms/daily-records: Error: è·å–ä»»åŠ¡è®°å½•å¤±è´¥
    at LMSService.getDailyRecords (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:822:19)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:308:25
2025-12-19T03:41:50.609Z - GET /avatar.jpg
2025-12-19T03:42:09.745Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_SERVICE] Getting student progress for 1896c410-1a91-4281-ac02-797756c638cc
[LMS_SERVICE] æŸ¥æ‰¾å­¦æ ¡æœ€æ–°æ•™å­¦è®¡åˆ’ä½œä¸ºä¸»è¦æ•°æ®æº
[LMS_SERVICE] Found latest lesson plan 44490b84-dbfd-423a-9da7-364fceb3faf2
[LMS_SERVICE] Content structure: { hasContent: true, hasCourseInfo: true, courseInfoKeys: [] }
[LMS_SERVICE] âš ï¸ æ•™å­¦è®¡åˆ’ä¸­æ²¡æœ‰courseInfoä¿¡æ¯
[LMS_SERVICE] Content keys: [
  'qcTasks',
  'courseInfo',
  'normalTasks',
  'publishedAt',
  'publishedTo',
  'publisherId',
  'specialTasks',
  'securityScope'
]
[LMS_SERVICE] æ£€æŸ¥æ‰€æœ‰æ•™å­¦è®¡åˆ’ä½œä¸ºå…œåº•æ–¹æ¡ˆ
[LMS_SERVICE] âš ï¸ æ²¡æœ‰æ‰¾åˆ°ä»»ä½•è¯¾ç¨‹è¿›åº¦ï¼Œè¿”å›é»˜è®¤æ•°æ®
2025-12-19T03:42:13.876Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:42:13.880Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:42:13.882Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=44490b84-dbfd-423a-9da7-364fceb3faf2, date=Fri Dec 19 2025 03:25:44 GMT+0000 (Coordinated Universal Time)
2025-12-19T03:42:52.337Z - GET /prep
2025-12-19T03:42:52.343Z - GET /assets/index-BuvS4IkK.js
2025-12-19T03:42:52.343Z - GET /assets/index-CPDA1oy3.css
2025-12-19T03:42:52.357Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T03:42:52.378Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T03:42:52.382Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ”¬ [LMS DEBUG] Probing database connection...
2025-12-19T03:42:52.383Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T03:42:52.384Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS DEBUG] Probe successful. Found 3 schools.
ğŸ”¬ [LMS DEBUG] task_library table exists: [ { count: 1n } ]
âœ… [LMS_SERVICE] æ•°æ®åº“è¿æ¥æˆåŠŸ
ğŸ”¬ [LMS DEBUG] Checking taskLibrary count...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=44490b84-dbfd-423a-9da7-364fceb3faf2, date=Fri Dec 19 2025 03:25:44 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
ğŸ”¬ [LMS DEBUG] Executing main taskLibrary query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
ğŸ“Š [LMS_SERVICE] ä»»åŠ¡åˆ†ç±»ç»Ÿè®¡: {
  'åŸºç¡€ä½œä¸š': 7,
  'å­¦æ ¡': 3,
  'å®¶åº­': 3,
  'æ•°å­¦è¿‡å…³': 2,
  'æ ¸å¿ƒæ•™å­¦æ³•': 38,
  'ç‰¹è‰²æ•™å­¦': 3,
  'ç»¼åˆæˆé•¿': 14,
  'è‡ªä¸»æ€§': 3,
  'è‹±è¯­è¿‡å…³': 3,
  'è¯­æ–‡è¿‡å…³': 3,
  'é˜…è¯»': 3
}
ğŸ”Œ [LMS_SERVICE] æ•°æ®åº“è¿æ¥å·²æ–­å¼€
2025-12-19T03:44:51.399Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’
ğŸ”’ [LMS_SECURITY] Teacher ID: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ”’ [LMS_SECURITY] School ID: 625e503b-aa7e-44fe-9982-237d828af717
ğŸ”’ [LMS_SECURITY] Debugging - Request params: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  title: '12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’',
  date: '2025-12-19T03:42:13.612Z'
}
ğŸ” [LMS_DEBUG] Querying students with params: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  isActive: true
}
ğŸ” [LMS_DEBUG] Query result: Found 7 students
ğŸ” [LMS_DEBUG] All students for teacher 5ca64703-c978-4d01-bf44-a7568f34f556: 7
ğŸ” [LMS_DEBUG] Student schoolIds: [ '625e503b-aa7e-44fe-9982-237d828af717' ]
ğŸ‘¥ [LMS_SECURITY] Found 7 students for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: Serviceä¿®å¤æµ‹è¯• (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: å¾æ±‡æ´‹ (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: 33ã€‘ã€‘44 (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: å“ˆå“ˆå“ˆ (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: 115 (å…­å¹´çº§1ç­) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: å®å¯æ­† (null) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ‘¤ [LMS_SECURITY] Student: æ›¾æ¬£åª› (null) - teacherId: 5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LMS_SECURITY] Created lesson plan: d5f11ecf-67ed-41c1-b905-a3614992b9f9 for 7 students
ğŸ¯ [LMS_FOUR_TIER] Four-tier publication mode started
ğŸ“… [LMS_FOUR_TIER] Date range: 2025-12-19T00:00:00.000Z - 2025-12-19T23:59:59.999Z
ğŸ“ˆ [PROGRESS_TIER] Processing stateful tasks (Progress)...
ğŸ§¹ [ACTION_TIER] Daily sweep for action-based tasks...
ğŸ§¹ [ACTION_TIER] Archived 0 class-wide and 0 personalized tasks
ğŸ« [CLASS_TIER] Creating class-wide tasks...
ğŸ¯ [PERSONALIZED_TIER] Creating personalized tasks...
ğŸ“Š [LMS_FOUR_TIER] Four-tier Publication Summary:
   - Progress tasks created: 0
   - Methodology tasks created: 0
   - Growth tasks created: 0
   - Personalized tasks created: 0
   - Total tasks archived: 0
   - Total students affected: 7
ğŸ“¡ [LMS_FOUR_TIER] Broadcasted four-tier publication event to teacher 5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ¯ [LMS_FOUR_TIER] Distribution: Progress(0) + Methodology(0) + Growth(0) + Personalized(0)

ğŸ›‘ SIGTERM received, shutting down gracefully...
ğŸ›‘ Shutting down server...
âœ… Database disconnected
âœ… Server stopped successfully
