2025-12-17T14:43:32: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T14:43:32: ğŸŒ Environment: production
2025-12-17T14:43:32: ğŸ”Œ Port: 3000
2025-12-17T14:43:32: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T14:43:32: ğŸ“ Static path exists: true
2025-12-17T14:43:32: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T14:43:32: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T14:43:32: âœ… Database connected successfully
2025-12-17T14:43:32: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T14:43:32: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T14:43:32: ğŸ”Œ WebSocket server ready
2025-12-17T14:43:32: ğŸŒ Environment: production
2025-12-17T14:45:53: 2025-12-17T14:45:53.258Z - GET /
2025-12-17T14:45:53: 2025-12-17T14:45:53.268Z - GET /assets/index-DGGpHUud.css
2025-12-17T14:49:31: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T14:49:31: ğŸ›‘ Shutting down server...
2025-12-17T14:49:31: âœ… Database disconnected
2025-12-17T14:49:31: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T14:49:31: ğŸŒ Environment: production
2025-12-17T14:49:31: ğŸ”Œ Port: 3000
2025-12-17T14:49:31: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T14:49:31: ğŸ“ Static path exists: true
2025-12-17T14:49:31: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T14:49:31: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T14:49:31: âœ… Database connected successfully
2025-12-17T14:49:31: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T14:49:31: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T14:49:31: ğŸ”Œ WebSocket server ready
2025-12-17T14:49:31: ğŸŒ Environment: production
2025-12-17T15:01:21: 2025-12-17T15:01:21.566Z - GET /api/lms/daily-records
2025-12-17T15:01:21: ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
2025-12-17T15:01:21: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:01:21: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:01:21: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=1896c410-1a91-4281-ac02-797756c638cc, date=2025-12-17
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] åŸå§‹æŸ¥è¯¢èŒƒå›´: 2025-12-17T00:00:00.000Z - 2025-12-17T23:59:59.999Z
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] æ‰©å±•æŸ¥è¯¢èŒƒå›´: 2025-12-16T00:00:00.000Z - 2025-12-18T23:59:59.999Z
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-17T15:01:21.570Z
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] æŸ¥è¯¢ç»“æœ: æ‰¾åˆ° 12 æ¡è®°å½•
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] ===== è®°å½•è¯¦æƒ… =====
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 1:
2025-12-17T15:01:21:    - ID: af3d8a20-eee4-4d59-aa58-0a2d92ec0972
2025-12-17T15:01:21:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: COMPLETED
2025-12-17T15:01:21:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:01:21:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 2:
2025-12-17T15:01:21:    - ID: 0e264478-a72a-4d61-b8ea-350e06100b6d
2025-12-17T15:01:21:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: COMPLETED
2025-12-17T15:01:21:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:01:21:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 3:
2025-12-17T15:01:21:    - ID: 4d7037ca-da99-4e17-9530-bed21a6c50e9
2025-12-17T15:01:21:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: COMPLETED
2025-12-17T15:01:21:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:01:21:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 4:
2025-12-17T15:01:21:    - ID: fd7fc7b9-47f4-41b5-80bb-cd5a1fb91a6e
2025-12-17T15:01:21:    - Title: å•è¯èƒŒè¯µ
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:01:21:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 5:
2025-12-17T15:01:21:    - ID: ec32514a-e9e5-4948-bda2-95e6a10d9fba
2025-12-17T15:01:21:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:01:21:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 6:
2025-12-17T15:01:21:    - ID: 144f50f6-f291-426d-821c-b43ea05077b6
2025-12-17T15:01:21:    - Title: åº”ç”¨é¢˜
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: COMPLETED
2025-12-17T15:01:21:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:01:21:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 7:
2025-12-17T15:01:21:    - ID: ec4f9fe4-f6d4-4d7d-b911-8d30619aa57d
2025-12-17T15:01:21:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-17T12:10:12.137Z
2025-12-17T15:01:21:    - Created Local: 12/17/2025, 12:10:12 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 8:
2025-12-17T15:01:21:    - ID: 3dffd514-dc42-44d4-88df-0011af86cb08
2025-12-17T15:01:21:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-17T12:10:12.137Z
2025-12-17T15:01:21:    - Created Local: 12/17/2025, 12:10:12 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 9:
2025-12-17T15:01:21:    - ID: ebdb58e2-491f-4300-b899-ae4612e8b5e7
2025-12-17T15:01:21:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-17T12:10:12.137Z
2025-12-17T15:01:21:    - Created Local: 12/17/2025, 12:10:12 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 10:
2025-12-17T15:01:21:    - ID: b6c1d08a-232e-4f38-9a87-7d662fa32ecf
2025-12-17T15:01:21:    - Title: åº”ç”¨é¢˜
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-17T12:10:12.137Z
2025-12-17T15:01:21:    - Created Local: 12/17/2025, 12:10:12 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 11:
2025-12-17T15:01:21:    - ID: c3b91f22-3e09-4817-9e46-95d42e8b5035
2025-12-17T15:01:21:    - Title: å•è¯èƒŒè¯µ
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-17T12:10:12.137Z
2025-12-17T15:01:21:    - Created Local: 12/17/2025, 12:10:12 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:01:21: ğŸ”¥ [LMS DEBUG] è®°å½• 12:
2025-12-17T15:01:21:    - ID: f4eb0bd0-d828-406b-9f41-41221f8e79ad
2025-12-17T15:01:21:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T15:01:21:    - Type: QC
2025-12-17T15:01:21:    - Status: PENDING
2025-12-17T15:01:21:    - Created: 2025-12-17T12:10:12.137Z
2025-12-17T15:01:21:    - Created Local: 12/17/2025, 12:10:12 PM
2025-12-17T15:01:21:    - Exp: 5
2025-12-17T15:01:21:    - Student: å®å¯æ­†
2025-12-17T15:07:22: 2025-12-17T15:07:22.912Z - GET /api/lms/daily-records
2025-12-17T15:07:22: ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
2025-12-17T15:07:22: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:07:22: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:07:22: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=83147758-d2d7-4541-a7c1-5892b809ccc8, date=2025-12-17
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] åŸå§‹æŸ¥è¯¢èŒƒå›´: 2025-12-17T00:00:00.000Z - 2025-12-17T23:59:59.999Z
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] æ‰©å±•æŸ¥è¯¢èŒƒå›´: 2025-12-16T00:00:00.000Z - 2025-12-18T23:59:59.999Z
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-17T15:07:22.914Z
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] æŸ¥è¯¢ç»“æœ: æ‰¾åˆ° 15 æ¡è®°å½•
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] ===== è®°å½•è¯¦æƒ… =====
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 1:
2025-12-17T15:07:22:    - ID: cabfc355-686e-403b-a128-d83434597b3e
2025-12-17T15:07:22:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:07:22:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 2:
2025-12-17T15:07:22:    - ID: fe01b10f-2904-4924-b9a0-538fd380fbb5
2025-12-17T15:07:22:    - Title: å•è¯èƒŒè¯µ
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:07:22:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 3:
2025-12-17T15:07:22:    - ID: fe09a4cc-cdd0-4aae-8ddb-8a821493d714
2025-12-17T15:07:22:    - Title: åº”ç”¨é¢˜
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:07:22:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 4:
2025-12-17T15:07:22:    - ID: 6b44e086-d82e-4630-b484-cf9adb09b549
2025-12-17T15:07:22:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:07:22:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 5:
2025-12-17T15:07:22:    - ID: bb4f9d9d-3574-46a2-b3f5-52245a657501
2025-12-17T15:07:22:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:07:22:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 6:
2025-12-17T15:07:22:    - ID: 6d23fb28-2fcd-4b8e-a07f-7fe2bac045c5
2025-12-17T15:07:22:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:07:22:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 7:
2025-12-17T15:07:22:    - ID: 830e70f0-567c-4aae-aaf8-611c37fb37a6
2025-12-17T15:07:22:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 8:
2025-12-17T15:07:22:    - ID: b57dcedb-cbc4-4b28-8e20-9d8fc8c2fb08
2025-12-17T15:07:22:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 9:
2025-12-17T15:07:22:    - ID: 19825fb1-1b2b-4f45-a911-cf42ffb74c26
2025-12-17T15:07:22:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 10:
2025-12-17T15:07:22:    - ID: cef2dddd-4a2f-4682-be7f-dadfeadb06db
2025-12-17T15:07:22:    - Title: åº”ç”¨é¢˜
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 11:
2025-12-17T15:07:22:    - ID: 6b073f1a-6212-417f-bd0e-6162441235c4
2025-12-17T15:07:22:    - Title: å•è¯èƒŒè¯µ
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 12:
2025-12-17T15:07:22:    - ID: 5d09b883-37f9-4bb3-a3e5-c7a120f0c310
2025-12-17T15:07:22:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T15:07:22:    - Type: QC
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 5
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 13:
2025-12-17T15:07:22:    - ID: aee5657c-d47c-4ee7-985f-4908de0e106b
2025-12-17T15:07:22:    - Title: 5é“æ—§é”™é¢˜çš„é‡åšç»ƒä¹ 
2025-12-17T15:07:22:    - Type: TASK
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 10
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 14:
2025-12-17T15:07:22:    - ID: 3c4bb8d1-0abe-40d2-8a57-73af035cec3e
2025-12-17T15:07:22:    - Title: é”™é¢˜çš„æ‘˜æŠ„ä¸å½’å› 
2025-12-17T15:07:22:    - Type: TASK
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 10
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:07:22: ğŸ”¥ [LMS DEBUG] è®°å½• 15:
2025-12-17T15:07:22:    - ID: 232a2ccc-77a7-4d3f-9d4b-162ba75d4ff4
2025-12-17T15:07:22:    - Title: é”™é¢˜çš„çº¢ç¬”è®¢æ­£
2025-12-17T15:07:22:    - Type: TASK
2025-12-17T15:07:22:    - Status: PENDING
2025-12-17T15:07:22:    - Created: 2025-12-17T15:07:16.796Z
2025-12-17T15:07:22:    - Created Local: 12/17/2025, 3:07:16 PM
2025-12-17T15:07:22:    - Exp: 10
2025-12-17T15:07:22:    - Student: å½­æ–¯æ™Ÿ
2025-12-17T15:08:00: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T15:08:00: ğŸ›‘ Shutting down server...
2025-12-17T15:08:00: âœ… Database disconnected
2025-12-17T15:08:00: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T15:08:00: ğŸŒ Environment: production
2025-12-17T15:08:00: ğŸ”Œ Port: 3000
2025-12-17T15:08:00: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T15:08:00: ğŸ“ Static path exists: true
2025-12-17T15:08:00: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T15:08:00: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T15:08:00: âœ… Database connected successfully
2025-12-17T15:08:00: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T15:08:00: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T15:08:00: ğŸ”Œ WebSocket server ready
2025-12-17T15:08:00: ğŸŒ Environment: production
2025-12-17T15:13:42: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T15:13:42: ğŸ›‘ Shutting down server...
2025-12-17T15:13:42: âœ… Database disconnected
2025-12-17T15:13:43: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T15:13:43: ğŸŒ Environment: production
2025-12-17T15:13:43: ğŸ”Œ Port: 3000
2025-12-17T15:13:43: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T15:13:43: ğŸ“ Static path exists: true
2025-12-17T15:13:43: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T15:13:43: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T15:13:43: âœ… Database connected successfully
2025-12-17T15:13:43: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T15:13:43: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T15:13:43: ğŸ”Œ WebSocket server ready
2025-12-17T15:13:43: ğŸŒ Environment: production
2025-12-17T15:16:17: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T15:16:17: ğŸ›‘ Shutting down server...
2025-12-17T15:16:17: âœ… Database disconnected
2025-12-17T15:16:18: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T15:16:18: ğŸŒ Environment: production
2025-12-17T15:16:18: ğŸ”Œ Port: 3000
2025-12-17T15:16:18: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T15:16:18: ğŸ“ Static path exists: true
2025-12-17T15:16:18: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T15:16:18: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T15:16:18: âœ… Database connected successfully
2025-12-17T15:16:18: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T15:16:18: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T15:16:18: ğŸ”Œ WebSocket server ready
2025-12-17T15:16:18: ğŸŒ Environment: production
2025-12-17T15:20:59: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T15:20:59: ğŸ›‘ Shutting down server...
2025-12-17T15:20:59: âœ… Database disconnected
2025-12-17T15:21:00: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T15:21:00: ğŸŒ Environment: production
2025-12-17T15:21:00: ğŸ”Œ Port: 3000
2025-12-17T15:21:00: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T15:21:00: ğŸ“ Static path exists: true
2025-12-17T15:21:00: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T15:21:00: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T15:21:00: âœ… Database connected successfully
2025-12-17T15:21:00: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T15:21:00: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T15:21:00: ğŸ”Œ WebSocket server ready
2025-12-17T15:21:00: ğŸŒ Environment: production
2025-12-17T15:37:25: 2025-12-17T15:37:25.311Z - GET /api/students
2025-12-17T15:37:25: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T15:37:25: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:37:25: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:37:25: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:37:25: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T15:37:25: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T15:37:25: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T15:37:25: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
2025-12-17T15:37:25: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined,
  requesterId: undefined
}
2025-12-17T15:37:25: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T15:37:25: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined
}
2025-12-17T15:37:25: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T15:37:25: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T15:37:25: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T15:37:25: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T15:37:25: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T15:37:25: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T15:37:25: [DEBUG] Number of students in result: 8
2025-12-17T15:37:25: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T15:37:25: [DEBUG] Response sent to frontend successfully
2025-12-17T15:37:25: 2025-12-17T15:37:25.415Z - GET /avatar.jpg
2025-12-17T15:37:25: 2025-12-17T15:37:25.463Z - GET /api/students
2025-12-17T15:37:25: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T15:37:25: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:37:25: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:37:25: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:37:25: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T15:37:25: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T15:37:25: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T15:37:25: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
2025-12-17T15:37:25: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined,
  requesterId: undefined
}
2025-12-17T15:37:25: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T15:37:25: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined
}
2025-12-17T15:37:25: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T15:37:25: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T15:37:25: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T15:37:25: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T15:37:25: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T15:37:25: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T15:37:25: [DEBUG] Number of students in result: 8
2025-12-17T15:37:25: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T15:37:25: [DEBUG] Response sent to frontend successfully
2025-12-17T15:37:25: 2025-12-17T15:37:25.786Z - GET /avatar.jpg
2025-12-17T15:37:29: 2025-12-17T15:37:29.291Z - GET /api/students
2025-12-17T15:37:29: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T15:37:29: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:37:29: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:37:29: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:37:29: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T15:37:29: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T15:37:29: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T15:37:29: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
2025-12-17T15:37:29: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined,
  requesterId: undefined
}
2025-12-17T15:37:29: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T15:37:29: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined
}
2025-12-17T15:37:29: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T15:37:29: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T15:37:29: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T15:37:29: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T15:37:29: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T15:37:29: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T15:37:29: [DEBUG] Number of students in result: 8
2025-12-17T15:37:29: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T15:37:29: [DEBUG] Response sent to frontend successfully
2025-12-17T15:37:29: 2025-12-17T15:37:29.429Z - GET /avatar.jpg
2025-12-17T15:37:31: 2025-12-17T15:37:31.348Z - POST /api/habits/checkin
2025-12-17T15:37:31: ğŸ” [AUTH_MIDDLEWARE] Processing POST /checkin
2025-12-17T15:37:31: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:37:31: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:37:31: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:41:05: 2025-12-17T15:41:05.907Z - GET /api/lms/daily-records
2025-12-17T15:41:05: ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
2025-12-17T15:41:05: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:41:05: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:41:05: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=b043aea7-874b-4505-8274-50526192fde8, date=2025-12-17
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] åŸå§‹æŸ¥è¯¢èŒƒå›´: 2025-12-17T00:00:00.000Z - 2025-12-17T23:59:59.999Z
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] æ‰©å±•æŸ¥è¯¢èŒƒå›´: 2025-12-16T00:00:00.000Z - 2025-12-18T23:59:59.999Z
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-17T15:41:05.910Z
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] æŸ¥è¯¢ç»“æœ: æ‰¾åˆ° 12 æ¡è®°å½•
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] ===== è®°å½•è¯¦æƒ… =====
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 1:
2025-12-17T15:41:05:    - ID: 5bceb7d6-3b65-4287-8e53-0a8a91525b86
2025-12-17T15:41:05:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:41:05:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 2:
2025-12-17T15:41:05:    - ID: 2590639b-564b-4962-b43d-71828523a17c
2025-12-17T15:41:05:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:41:05:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 3:
2025-12-17T15:41:05:    - ID: ff4a54a9-5e87-4703-8712-535296575177
2025-12-17T15:41:05:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:41:05:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 4:
2025-12-17T15:41:05:    - ID: ae26c012-0737-4766-a345-21237850901e
2025-12-17T15:41:05:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:41:05:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 5:
2025-12-17T15:41:05:    - ID: e31e8163-15f9-4a65-9185-bd4c0cbc5b97
2025-12-17T15:41:05:    - Title: åº”ç”¨é¢˜
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:41:05:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 6:
2025-12-17T15:41:05:    - ID: 1811dd86-87e8-4280-8fed-7de41aabf640
2025-12-17T15:41:05:    - Title: å•è¯èƒŒè¯µ
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T15:41:05:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 7:
2025-12-17T15:41:05:    - ID: a1f2ec53-1788-48aa-abcd-6d4e2963c253
2025-12-17T15:41:05:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-17T15:39:56.139Z
2025-12-17T15:41:05:    - Created Local: 12/17/2025, 3:39:56 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 8:
2025-12-17T15:41:05:    - ID: 846d4306-f55c-4085-adeb-33939e5313b1
2025-12-17T15:41:05:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-17T15:39:56.139Z
2025-12-17T15:41:05:    - Created Local: 12/17/2025, 3:39:56 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 9:
2025-12-17T15:41:05:    - ID: d1fa50d0-79d8-4349-90d2-a69b47983d40
2025-12-17T15:41:05:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-17T15:39:56.139Z
2025-12-17T15:41:05:    - Created Local: 12/17/2025, 3:39:56 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 10:
2025-12-17T15:41:05:    - ID: 13cda31e-9f7a-497a-b051-6c105088dda8
2025-12-17T15:41:05:    - Title: åº”ç”¨é¢˜
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-17T15:39:56.139Z
2025-12-17T15:41:05:    - Created Local: 12/17/2025, 3:39:56 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 11:
2025-12-17T15:41:05:    - ID: d923d9fb-e039-4fd4-83f4-2bb5f50c4f58
2025-12-17T15:41:05:    - Title: å•è¯èƒŒè¯µ
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-17T15:39:56.139Z
2025-12-17T15:41:05:    - Created Local: 12/17/2025, 3:39:56 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:05: ğŸ”¥ [LMS DEBUG] è®°å½• 12:
2025-12-17T15:41:05:    - ID: 4fa79662-4fdd-4954-94c7-9144ef56fe9b
2025-12-17T15:41:05:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T15:41:05:    - Type: QC
2025-12-17T15:41:05:    - Status: PENDING
2025-12-17T15:41:05:    - Created: 2025-12-17T15:39:56.139Z
2025-12-17T15:41:05:    - Created Local: 12/17/2025, 3:39:56 PM
2025-12-17T15:41:05:    - Exp: 5
2025-12-17T15:41:05:    - Student: è‚–æµ©è½©
2025-12-17T15:41:06: 2025-12-17T15:41:06.019Z - GET /avatar.jpg
2025-12-17T15:41:06: 2025-12-17T15:41:06.529Z - GET /api/lms/student-progress
2025-12-17T15:41:06: ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
2025-12-17T15:41:06: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T15:41:06: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T15:41:06: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T15:49:34: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T15:49:34: ğŸ›‘ Shutting down server...
2025-12-17T15:49:34: âœ… Database disconnected
2025-12-17T15:49:34: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T15:49:34: ğŸŒ Environment: production
2025-12-17T15:49:34: ğŸ”Œ Port: 3000
2025-12-17T15:49:34: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T15:49:34: ğŸ“ Static path exists: true
2025-12-17T15:49:34: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T15:49:34: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T15:49:35: âœ… Database connected successfully
2025-12-17T15:49:35: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T15:49:35: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T15:49:35: ğŸ”Œ WebSocket server ready
2025-12-17T15:49:35: ğŸŒ Environment: production
2025-12-17T16:01:46: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T16:01:46: ğŸ›‘ Shutting down server...
2025-12-17T16:01:46: âœ… Database disconnected
2025-12-17T16:01:46: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T16:01:46: ğŸŒ Environment: production
2025-12-17T16:01:46: ğŸ”Œ Port: 3000
2025-12-17T16:01:46: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T16:01:46: ğŸ“ Static path exists: true
2025-12-17T16:01:46: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T16:01:46: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T16:01:46: âœ… Database connected successfully
2025-12-17T16:01:46: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T16:01:46: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T16:01:46: ğŸ”Œ WebSocket server ready
2025-12-17T16:01:46: ğŸŒ Environment: production
2025-12-17T16:06:44: 2025-12-17T16:06:44.622Z - GET /api/students
2025-12-17T16:06:44: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T16:06:44: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T16:06:44: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:06:44: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:06:44: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T16:06:44: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T16:06:44: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T16:06:44: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  userRole: 'TEACHER'
}
2025-12-17T16:06:44: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: undefined
}
2025-12-17T16:06:44: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:06:44: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
2025-12-17T16:06:44: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T16:06:44: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T16:06:44: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T16:06:44: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:06:44: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T16:06:44: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T16:06:44: [DEBUG] Number of students in result: 8
2025-12-17T16:06:44: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T16:06:44: [DEBUG] Response sent to frontend successfully
2025-12-17T16:06:44: 2025-12-17T16:06:44.755Z - GET /api/lms/daily-records
2025-12-17T16:06:44: ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
2025-12-17T16:06:44: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
2025-12-17T16:06:44: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:06:44: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=65697759-b4ba-49ae-9f18-101730f7bf47, date=2025-12-17
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] åŸå§‹æŸ¥è¯¢èŒƒå›´: 2025-12-17T00:00:00.000Z - 2025-12-17T23:59:59.999Z
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] æ‰©å±•æŸ¥è¯¢èŒƒå›´: 2025-12-16T00:00:00.000Z - 2025-12-18T23:59:59.999Z
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-17T16:06:44.757Z
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] æŸ¥è¯¢ç»“æœ: æ‰¾åˆ° 12 æ¡è®°å½•
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] ===== è®°å½•è¯¦æƒ… =====
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 1:
2025-12-17T16:06:44:    - ID: 6f16919c-e52c-4dad-8d6b-9715545bf257
2025-12-17T16:06:44:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:06:44:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 2:
2025-12-17T16:06:44:    - ID: 4ed60092-e532-43a3-97ce-caac940628b1
2025-12-17T16:06:44:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:06:44:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 3:
2025-12-17T16:06:44:    - ID: e1198d1d-d5d3-4d5f-88e3-f164b68bf8b0
2025-12-17T16:06:44:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:06:44:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 4:
2025-12-17T16:06:44:    - ID: 4a0e95ac-27ab-4878-a332-125ad12fa7b9
2025-12-17T16:06:44:    - Title: åº”ç”¨é¢˜
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:06:44:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 5:
2025-12-17T16:06:44:    - ID: 6382be1c-e537-468d-9b37-e6c112148d52
2025-12-17T16:06:44:    - Title: å•è¯èƒŒè¯µ
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:06:44:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 6:
2025-12-17T16:06:44:    - ID: a977d6a1-bcb9-4c14-bd1d-1591e4e2980d
2025-12-17T16:06:44:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:06:44:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 7:
2025-12-17T16:06:44:    - ID: 7d4e5dcc-155a-434c-8671-a0d2be01cefc
2025-12-17T16:06:44:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:06:44:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 8:
2025-12-17T16:06:44:    - ID: 76f0f14a-3a1f-48a6-93de-667512935874
2025-12-17T16:06:44:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:06:44:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 9:
2025-12-17T16:06:44:    - ID: bb57ed58-f1b4-42f7-9ffe-e95d664413c1
2025-12-17T16:06:44:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:06:44:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 10:
2025-12-17T16:06:44:    - ID: 9bbccb31-2a66-4c50-bbed-23e60881d8ef
2025-12-17T16:06:44:    - Title: åº”ç”¨é¢˜
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:06:44:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 11:
2025-12-17T16:06:44:    - ID: 32423c94-feaf-40ef-9425-23dca1c95eaf
2025-12-17T16:06:44:    - Title: å•è¯èƒŒè¯µ
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:06:44:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:06:44: ğŸ”¥ [LMS DEBUG] è®°å½• 12:
2025-12-17T16:06:44:    - ID: caa09b93-7f46-450e-b5d4-9c7e0ffe8380
2025-12-17T16:06:44:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T16:06:44:    - Type: QC
2025-12-17T16:06:44:    - Status: PENDING
2025-12-17T16:06:44:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:06:44:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:06:44:    - Exp: 5
2025-12-17T16:06:44:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:12:11: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T16:12:11: ğŸ›‘ Shutting down server...
2025-12-17T16:12:11: âœ… Database disconnected
2025-12-17T16:14:45: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T16:14:45: ğŸŒ Environment: production
2025-12-17T16:14:45: ğŸ”Œ Port: 3000
2025-12-17T16:14:45: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T16:14:45: ğŸ“ Static path exists: true
2025-12-17T16:14:45: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T16:14:45: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T16:14:45: âœ… Database connected successfully
2025-12-17T16:14:45: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T16:14:45: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T16:14:45: ğŸ”Œ WebSocket server ready
2025-12-17T16:14:45: ğŸŒ Environment: production
2025-12-17T16:20:55: 2025-12-17T16:20:55.224Z - POST /api/habits
2025-12-17T16:20:55: ğŸ” [AUTH_MIDDLEWARE] Processing POST /
2025-12-17T16:20:55: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 483
2025-12-17T16:20:55: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:20:55: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:20:55: ğŸ“¡ Broadcasted to school 625e503b-aa7e-44fe-9982-237d828af717: HABIT_CREATED
2025-12-17T16:20:55: 2025-12-17T16:20:55.344Z - GET /api/students
2025-12-17T16:20:55: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T16:20:55: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 483
2025-12-17T16:20:55: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:20:55: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:20:55: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T16:20:55: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'Default Migration School',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T16:20:55: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T16:20:55: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
2025-12-17T16:20:55: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined,
  requesterId: undefined
}
2025-12-17T16:20:55: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:20:55: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: undefined
}
2025-12-17T16:20:55: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T16:20:55: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T16:20:55: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T16:20:55: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:20:55: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T16:20:55: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T16:20:55: [DEBUG] Number of students in result: 8
2025-12-17T16:20:55: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T16:20:55: [DEBUG] Response sent to frontend successfully
2025-12-17T16:21:04: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T16:21:04: ğŸ›‘ Shutting down server...
2025-12-17T16:21:04: âœ… Database disconnected
2025-12-17T16:21:04: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T16:21:04: ğŸŒ Environment: production
2025-12-17T16:21:04: ğŸ”Œ Port: 3000
2025-12-17T16:21:04: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T16:21:04: ğŸ“ Static path exists: true
2025-12-17T16:21:04: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T16:21:04: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T16:21:04: âœ… Database connected successfully
2025-12-17T16:21:04: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T16:21:04: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T16:21:04: ğŸ”Œ WebSocket server ready
2025-12-17T16:21:04: ğŸŒ Environment: production
2025-12-17T16:22:33: 2025-12-17T16:22:33.868Z - GET /api/lms/daily-records
2025-12-17T16:22:33: ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
2025-12-17T16:22:33: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 483
2025-12-17T16:22:33: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:22:33: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=65697759-b4ba-49ae-9f18-101730f7bf47, date=2025-12-17
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] åŸå§‹æŸ¥è¯¢èŒƒå›´: 2025-12-17T00:00:00.000Z - 2025-12-17T23:59:59.999Z
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] æ‰©å±•æŸ¥è¯¢èŒƒå›´: 2025-12-16T00:00:00.000Z - 2025-12-18T23:59:59.999Z
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-17T16:22:33.872Z
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] æŸ¥è¯¢ç»“æœ: æ‰¾åˆ° 12 æ¡è®°å½•
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] ===== è®°å½•è¯¦æƒ… =====
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 1:
2025-12-17T16:22:33:    - ID: 6f16919c-e52c-4dad-8d6b-9715545bf257
2025-12-17T16:22:33:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:33:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 2:
2025-12-17T16:22:33:    - ID: 4ed60092-e532-43a3-97ce-caac940628b1
2025-12-17T16:22:33:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:33:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 3:
2025-12-17T16:22:33:    - ID: e1198d1d-d5d3-4d5f-88e3-f164b68bf8b0
2025-12-17T16:22:33:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:33:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 4:
2025-12-17T16:22:33:    - ID: 4a0e95ac-27ab-4878-a332-125ad12fa7b9
2025-12-17T16:22:33:    - Title: åº”ç”¨é¢˜
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:33:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 5:
2025-12-17T16:22:33:    - ID: 6382be1c-e537-468d-9b37-e6c112148d52
2025-12-17T16:22:33:    - Title: å•è¯èƒŒè¯µ
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:33:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 6:
2025-12-17T16:22:33:    - ID: a977d6a1-bcb9-4c14-bd1d-1591e4e2980d
2025-12-17T16:22:33:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:33:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 7:
2025-12-17T16:22:33:    - ID: 7d4e5dcc-155a-434c-8671-a0d2be01cefc
2025-12-17T16:22:33:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:33:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 8:
2025-12-17T16:22:33:    - ID: 76f0f14a-3a1f-48a6-93de-667512935874
2025-12-17T16:22:33:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:33:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 9:
2025-12-17T16:22:33:    - ID: bb57ed58-f1b4-42f7-9ffe-e95d664413c1
2025-12-17T16:22:33:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:33:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 10:
2025-12-17T16:22:33:    - ID: 9bbccb31-2a66-4c50-bbed-23e60881d8ef
2025-12-17T16:22:33:    - Title: åº”ç”¨é¢˜
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:33:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 11:
2025-12-17T16:22:33:    - ID: 32423c94-feaf-40ef-9425-23dca1c95eaf
2025-12-17T16:22:33:    - Title: å•è¯èƒŒè¯µ
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:33:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:33: ğŸ”¥ [LMS DEBUG] è®°å½• 12:
2025-12-17T16:22:33:    - ID: caa09b93-7f46-450e-b5d4-9c7e0ffe8380
2025-12-17T16:22:33:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T16:22:33:    - Type: QC
2025-12-17T16:22:33:    - Status: PENDING
2025-12-17T16:22:33:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:33:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:33:    - Exp: 5
2025-12-17T16:22:33:    - Student: åˆ˜æ¢“èŒ
2025-12-17T16:22:36: 2025-12-17T16:22:36.664Z - GET /api/lms/daily-records
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 483
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:22:36: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] ===== getDailyRecords è°ƒç”¨å¼€å§‹ =====
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] ä¼ å…¥å‚æ•°: schoolId=625e503b-aa7e-44fe-9982-237d828af717, studentId=bb61ac5c-9bee-4ff9-95ef-1d9e25728f76, date=2025-12-17
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] åŸå§‹æŸ¥è¯¢èŒƒå›´: 2025-12-17T00:00:00.000Z - 2025-12-17T23:59:59.999Z
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] æ‰©å±•æŸ¥è¯¢èŒƒå›´: 2025-12-16T00:00:00.000Z - 2025-12-18T23:59:59.999Z
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] æœåŠ¡å™¨å½“å‰æ—¶é—´: 2025-12-17T16:22:36.666Z
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] æŸ¥è¯¢ç»“æœ: æ‰¾åˆ° 12 æ¡è®°å½•
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] ===== è®°å½•è¯¦æƒ… =====
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 1:
2025-12-17T16:22:36:    - ID: d281f9ae-75a6-4f25-8123-15f22ec4e5ee
2025-12-17T16:22:36:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:36:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 2:
2025-12-17T16:22:36:    - ID: 0dfa97e6-2fa6-42e9-a237-71c30e8f08b6
2025-12-17T16:22:36:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:36:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 3:
2025-12-17T16:22:36:    - ID: a3c35475-a8fc-42b8-90df-04a685b50a8b
2025-12-17T16:22:36:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:36:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 4:
2025-12-17T16:22:36:    - ID: e5ab5e5e-618d-47d4-8004-b4367a732d14
2025-12-17T16:22:36:    - Title: åº”ç”¨é¢˜
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:36:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 5:
2025-12-17T16:22:36:    - ID: c389ea62-c0a8-4931-8e60-3db4d308fae5
2025-12-17T16:22:36:    - Title: å•è¯èƒŒè¯µ
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:36:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 6:
2025-12-17T16:22:36:    - ID: e03dbf8d-be1f-4fe3-831d-092125ef0bb6
2025-12-17T16:22:36:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-16T15:33:37.761Z
2025-12-17T16:22:36:    - Created Local: 12/16/2025, 3:33:37 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 7:
2025-12-17T16:22:36:    - ID: 587a3ef7-0f8b-4990-a712-8598b2f61c68
2025-12-17T16:22:36:    - Title: å¤è¯—èƒŒè¯µ
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:36:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 8:
2025-12-17T16:22:36:    - ID: 11d9413b-e935-4149-a9a7-2b1f629b0205
2025-12-17T16:22:36:    - Title: ç”Ÿå­—å¬å†™
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:36:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 9:
2025-12-17T16:22:36:    - ID: 15835c24-e12d-4cbb-8820-f7a9e3d39db2
2025-12-17T16:22:36:    - Title: å£ç®—ç»ƒä¹ 
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:36:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 10:
2025-12-17T16:22:36:    - ID: 5114fd34-715e-443b-a8c5-c01de9d3c508
2025-12-17T16:22:36:    - Title: åº”ç”¨é¢˜
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:36:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 11:
2025-12-17T16:22:36:    - ID: 9265f12f-67ae-423c-bbd3-07e185efea16
2025-12-17T16:22:36:    - Title: å•è¯èƒŒè¯µ
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:36:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: ğŸ”¥ [LMS DEBUG] è®°å½• 12:
2025-12-17T16:22:36:    - ID: bfec06f7-00b9-4b29-a2ac-eb871364aebd
2025-12-17T16:22:36:    - Title: å¥å‹ç»ƒä¹ 
2025-12-17T16:22:36:    - Type: QC
2025-12-17T16:22:36:    - Status: PENDING
2025-12-17T16:22:36:    - Created: 2025-12-17T16:06:34.137Z
2025-12-17T16:22:36:    - Created Local: 12/17/2025, 4:06:34 PM
2025-12-17T16:22:36:    - Exp: 5
2025-12-17T16:22:36:    - Student: è‚–é›¨è™¹
2025-12-17T16:22:36: 2025-12-17T16:22:36.853Z - GET /api/students
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 483
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:22:36: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:22:36: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T16:22:36: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'Default Migration School',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T16:22:36: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T16:22:36: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  userRole: 'TEACHER'
}
2025-12-17T16:22:36: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: undefined
}
2025-12-17T16:22:36: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:22:36: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
2025-12-17T16:22:36: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T16:22:36: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T16:22:36: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T16:22:36: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:22:36: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T16:22:36: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T16:22:36: [DEBUG] Number of students in result: 8
2025-12-17T16:22:36: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T16:22:36: [DEBUG] Response sent to frontend successfully
2025-12-17T16:22:36: 2025-12-17T16:22:36.943Z - GET /api/students
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Processing GET /
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 483
2025-12-17T16:22:36: ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
2025-12-17T16:22:36: âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-17T16:22:36: --- [DEBUG] GET /api/students endpoint hit ---
2025-12-17T16:22:36: Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'Default Migration School',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
2025-12-17T16:22:36: School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
2025-12-17T16:22:36: Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  userRole: 'TEACHER'
}
2025-12-17T16:22:36: [DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  classRoom: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: undefined
}
2025-12-17T16:22:36: [DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:22:36: [TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
2025-12-17T16:22:36: [DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-17T16:22:36: [DEBUG] ğŸ“Š TeacherId distribution: { null: 38, '5ca64703-c978-4d01-bf44-a7568f34f556': 8 }
2025-12-17T16:22:36: [DEBUG] ğŸ“Š Total students in DB: 46
2025-12-17T16:22:36: [TEACHER BINDING] Querying MY_STUDENTS for teacher: 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-17T16:22:36: [TEACHER BINDING] âœ… Found 8 students for scope: MY_STUDENTS
2025-12-17T16:22:36: [DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T15:32:53.182Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: null,
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T15:33:02.635Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T15:33:06.985Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: null,
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T15:32:48.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: null,
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T15:32:43.481Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: null,
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T15:32:39.656Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: null,
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T15:32:29.198Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: null,
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T15:32:34.372Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 8, total: 8, totalPages: 1 }
}
2025-12-17T16:22:36: [DEBUG] Number of students in result: 8
2025-12-17T16:22:36: [DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T15:32:53.182Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ¨Šç‰§å®¸',
    className: null,
    level: 1,
    points: 219,
    exp: 78,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.157Z,
    updatedAt: 2025-12-17T15:33:02.635Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
2025-12-17T16:22:36: [DEBUG] Response sent to frontend successfully
2025-12-17T16:25:44: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T16:25:44: ğŸ›‘ Shutting down server...
2025-12-17T16:25:44: âœ… Database disconnected
2025-12-17T16:25:45: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T16:25:45: ğŸŒ Environment: production
2025-12-17T16:25:45: ğŸ”Œ Port: 3000
2025-12-17T16:25:45: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T16:25:45: ğŸ“ Static path exists: true
2025-12-17T16:25:45: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T16:25:45: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T16:25:45: âœ… Database connected successfully
2025-12-17T16:25:45: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T16:25:45: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T16:25:45: ğŸ”Œ WebSocket server ready
2025-12-17T16:25:45: ğŸŒ Environment: production
2025-12-17T16:32:14: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T16:32:14: ğŸ›‘ Shutting down server...
2025-12-17T16:32:14: âœ… Database disconnected
2025-12-17T16:40:49: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T16:40:49: ğŸŒ Environment: development
2025-12-17T16:40:49: ğŸ”Œ Port: 3000
2025-12-17T16:40:49: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T16:40:49: ğŸ“ Static path exists: true
2025-12-17T16:40:49: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T16:40:49: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T16:40:50: âœ… Database connected successfully
2025-12-17T16:40:50: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T16:40:50: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T16:40:50: ğŸ”Œ WebSocket server ready
2025-12-17T16:40:50: ğŸŒ Environment: development
2025-12-17T16:55:07: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T16:55:07: ğŸ›‘ Shutting down server...
2025-12-17T16:55:07: âœ… Database disconnected
2025-12-17T18:10:42: ğŸš€ Starting ArkOK V2 Server...
2025-12-17T18:10:42: ğŸŒ Environment: development
2025-12-17T18:10:42: ğŸ”Œ Port: 3000
2025-12-17T18:10:42: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
2025-12-17T18:10:42: ğŸ“ Static path exists: true
2025-12-17T18:10:42: ğŸ”§ Setting up Socket.IO handlers...
2025-12-17T18:10:42: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-17T18:10:42: âœ… Database connected successfully
2025-12-17T18:10:42: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-17T18:10:42: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-17T18:10:42: ğŸ”Œ WebSocket server ready
2025-12-17T18:10:42: ğŸŒ Environment: development
2025-12-17T18:14:42: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-17T18:14:42: ğŸ›‘ Shutting down server...
2025-12-17T18:14:42: âœ… Database disconnected
2025-12-18T05:28:55: ğŸš€ Starting ArkOK V2 Server...
2025-12-18T05:28:55: ğŸŒ Environment: development
2025-12-18T05:28:55: ğŸ”Œ Port: 3000
2025-12-18T05:28:55: ğŸ” Static files being served from: /home/devbox/project/arkok-v2/server/client/dist
2025-12-18T05:28:55: ğŸ“ Static path exists: false
2025-12-18T05:28:55: ğŸ”§ Setting up Socket.IO handlers...
2025-12-18T05:28:55: ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
2025-12-18T05:28:55: âœ… Database connected successfully
2025-12-18T05:28:55: ğŸš€ ArkOK V2 Server running on port 3000
2025-12-18T05:28:55: ğŸ“‹ Health check: http://0.0.0.0:3000/health
2025-12-18T05:28:55: ğŸ”Œ WebSocket server ready
2025-12-18T05:28:55: ğŸŒ Environment: development
2025-12-18T05:29:13: 
ğŸ›‘ SIGINT received, shutting down gracefully...
2025-12-18T05:29:13: ğŸ›‘ Shutting down server...
2025-12-18T05:29:13: âœ… Database disconnected
