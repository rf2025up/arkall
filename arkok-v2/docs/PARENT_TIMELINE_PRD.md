# 家长端今日动态时间线 PRD (v1.1)

## 1. 功能概述
家长端今日动态时间线展示孩子当日的所有学习活动，包括过关、任务、PK、挑战、习惯、勋章等。

## 2. 页面路径
- **URL**: `/parent/timeline/:studentId`
- **组件**: `client/src/pages/parent/TodayTimeline.tsx`

## 3. 数据来源
**API**: `GET /api/parent/timeline/:studentId/today`

返回数据结构:
```typescript
{
  date: string;           // 日期 YYYY-MM-DD
  weekday: string;        // 星期几
  todayExp: number;       // 今日获得经验值
  timeline: TimelineItem[];
}
```

## 4. 卡片布局规范

### 4.1 通用布局
```
◯ [icon] 大分类 [子分类标签]                    时间
┌────────────────────────────────────────────────┐
│  内容标题                               +N XP  │
│  描述/列表内容                      ✅ 已完成  │
└────────────────────────────────────────────────┘
```

- **时间轴节点**：纯色圆圈，无内部图标
- **大标题行**：`[icon] 主分类 [子分类标签]` + 时间标签
- **卡片内容**：标题 + XP + 描述 + 状态（同行显示）

### 4.2 基础过关 (QC_GROUP)
**大标题**: `✅ 基础过关 [科目标签]`  
**科目标签颜色**：
- 语文 → 红色 (`bg-red-100 text-red-600`)
- 数学 → 蓝色 (`bg-blue-100 text-blue-600`)  
- 英语 → 紫色 (`bg-purple-100 text-purple-600`)

**卡片内容**:
- 进度标题：第X单元 第Y课《课文名》 + 总XP
- 过关项列表（每项：任务名 + 单项XP）
- 汇总：已完成 X/Y + 总XP

### 4.3 核心教学法 (TASK)
**大标题**: `📝 核心教学法 [子分类标签]`  
**子分类标签颜色**: 橙色 (`bg-orange-100 text-orange-600`)

**子分类关键词**:
- 基础学习方法、作业自主检查、错题红笔订正
- 自评当日作业质量、数学思维与解题策略
- 语文学科能力深化、三色笔法

**卡片内容**: 任务描述 + XP + 完成状态（同行）

### 4.4 综合成长 (TASK)
**大标题**: `🌟 综合成长 [子分类标签]`  
**子分类标签颜色**: 靛蓝色 (`bg-indigo-100 text-indigo-600`)

**子分类关键词**:
- 阅读广度、整理贡献、整理与贡献
- 互助创新、家校共育、集体贡献
- 浇花、整理书架、打扫、光盘

**卡片内容**: 任务描述 + XP + 完成状态（同行）

### 4.5 定制加餐 (SPECIAL/PERSONALIZED)
**大标题**: `⭐ 定制加餐`  
**卡片内容**: 任务描述 + XP

### 4.6 PK 对战 (PK)
**大标题**: `🏆 PK对战`  
**卡片内容**:
- 对手信息 + 结果（战胜/败给/平局）+ XP

### 4.7 习惯打卡 (HABIT)
**大标题**: `📝 习惯打卡`  
**卡片内容**: `[习惯] 任务名称 🔥 N天`（单行紧凑展示）

### 4.8 勋章获得 (BADGE)
**大标题**: `🏅 荣誉勋章`  
**卡片内容**: 勋章图标 + 名称 + 描述

### 4.9 个人挑战 (CHALLENGE)
**大标题**: `⚡ 个人挑战`  
**卡片内容**: 任务描述 + XP + 成功/失败状态
- 成功 → 绿色标签 (`bg-green-100 text-green-600`)
- 失败 → 红色标签 (`bg-red-100 text-red-600`)

## 5. 颜色规范

| 类型 | 节点颜色 | 卡片背景 | 标签颜色 |
|------|----------|----------|----------|
| 基础过关 | green-500 | green-50 | 按科目 |
| 核心教学法 | orange-500 | orange-50 | orange-100 |
| 综合成长 | indigo-500 | indigo-50 | indigo-100 |
| 定制加餐 | purple-500 | purple-50 | - |
| PK对战 | red-500 | red-50 | - |
| 习惯打卡 | emerald-500 | emerald-50 | green-100 |
| 勋章 | yellow-500 | yellow-50 | - |
| 个人挑战 | pink-500 | pink-50 | 按结果 |

## 6. 版本历史

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.0 | 2025-12-22 | 初版：统一大标题样式，基础过关添加科目标签 |
| v1.1 | 2025-12-22 | 优化：子分类标签移到大标题后；完成状态同行显示；习惯打卡紧凑展示；挑战显示成功/失败；删除圆圈内图标 |

---
*最后更新: 2025-12-22*
