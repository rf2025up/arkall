ğŸš€ Starting ArkOK V2 Server...
ğŸŒ Environment: development
ğŸ”Œ Port: 3000
ğŸ” Static files being served from: /home/devbox/project/arkok-v2/client/dist
ğŸ“ Static path exists: true
ğŸ”§ Setting up Socket.IO handlers...
ğŸ”Œ Socket.io æœåŠ¡å·²åˆå§‹åŒ–ï¼Œæ”¯æŒ JWT è®¤è¯å’Œå­¦æ ¡æˆ¿é—´ç®¡ç†
âœ… Database connected successfully
ğŸš€ ArkOK V2 Server running on port 3000
ğŸ“‹ Health check: http://0.0.0.0:3000/health
ğŸ”Œ WebSocket server ready
ğŸŒ Environment: development
2025-12-19T07:58:25.425Z - POST /api/auth/login
2025-12-19T07:58:25.563Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:00:02.688Z - GET /prep
2025-12-19T08:00:02.767Z - GET /assets/index-CPDA1oy3.css
2025-12-19T08:00:02.769Z - GET /assets/index-BuvS4IkK.js
2025-12-19T08:00:03.253Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T08:00:03.255Z - GET /vite.svg
2025-12-19T08:00:03.342Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T08:00:03.352Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T08:00:03.354Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T08:00:03.358Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=aa42cfde-7cbc-4764-890a-1d35bbefca5b, date=Fri Dec 19 2025 06:45:58 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T08:00:04.694Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:00:04.759Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:00:04.768Z - GET /avatar.jpg
2025-12-19T08:00:15.369Z - GET /
2025-12-19T08:00:15.465Z - GET /assets/index-CPDA1oy3.css
2025-12-19T08:00:15.467Z - GET /assets/index-BuvS4IkK.js
2025-12-19T08:00:15.569Z - GET /vite.svg
2025-12-19T08:00:15.569Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T08:00:15.729Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T08:00:15.731Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:00:15.809Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:00:15.814Z - GET /avatar.jpg
2025-12-19T08:05:27.209Z - GET /health
2025-12-19T08:05:40.350Z - POST /api/auth/login
2025-12-19T08:05:40.452Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:42:39.474Z - GET /
2025-12-19T08:42:39.482Z - GET /assets/index-BuvS4IkK.js
2025-12-19T08:42:39.483Z - GET /assets/index-CPDA1oy3.css
2025-12-19T08:42:39.570Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
2025-12-19T08:42:39.619Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  username: 'admin',
  name: 'ç³»ç»Ÿç®¡ç†å‘˜',
  displayName: null,
  email: null,
  role: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: null
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: undefined,
  userRole: 'ADMIN',
  requesterId: '7054e764-d83f-472e-b5c9-05d2d633bd66'
}
[DEBUG] âœ… teacherId is present: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: undefined,
  userRole: 'ADMIN'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T08:42:39.620Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
2025-12-19T08:42:39.625Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  username: 'admin',
  name: 'ç³»ç»Ÿç®¡ç†å‘˜',
  displayName: null,
  email: null,
  role: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: null
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: 'ALL_SCHOOL',
  userRole: 'ADMIN',
  requesterId: '7054e764-d83f-472e-b5c9-05d2d633bd66'
}
[DEBUG] âœ… teacherId is present: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: 'ALL_SCHOOL',
  userRole: 'ADMIN'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 0 students for scope: undefined
[DEBUG] Service returned: {
  students: [],
  pagination: { page: 1, limit: 0, total: 0, totalPages: 1 }
}
[DEBUG] Number of students in result: 0
[DEBUG] Students data preview: []
[DEBUG] Response sent to frontend successfully
2025-12-19T08:42:39.636Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  username: 'admin',
  name: 'ç³»ç»Ÿç®¡ç†å‘˜',
  displayName: null,
  email: null,
  role: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: null
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: undefined,
  userRole: 'ADMIN',
  requesterId: '7054e764-d83f-472e-b5c9-05d2d633bd66'
}
[DEBUG] âœ… teacherId is present: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: undefined,
  userRole: 'ADMIN'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for ADMIN
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
[TEACHER BINDING] âœ… Found 0 students for scope: undefined
[DEBUG] Service returned: {
  students: [],
  pagination: { page: 1, limit: 0, total: 0, totalPages: 1 }
}
[DEBUG] Number of students in result: 0
[DEBUG] Students data preview: []
[DEBUG] Response sent to frontend successfully
2025-12-19T08:42:58.729Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=7054e764-d83f-472e-b5c9-05d2d633bd66
2025-12-19T08:42:58.730Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T08:42:58.731Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  username: 'admin',
  name: 'ç³»ç»Ÿç®¡ç†å‘˜',
  displayName: null,
  email: null,
  role: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: null
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: 'MY_STUDENTS',
  userRole: 'ADMIN',
  requesterId: '7054e764-d83f-472e-b5c9-05d2d633bd66'
}
[DEBUG] âœ… teacherId is present: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: 'MY_STUDENTS',
  userRole: 'ADMIN'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 0 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [],
  pagination: { page: 1, limit: 0, total: 0, totalPages: 1 }
}
[DEBUG] Number of students in result: 0
[DEBUG] Students data preview: []
[DEBUG] Response sent to frontend successfully
ğŸ“ [LATEST_LESSON_PLAN] æœªæ‰¾åˆ°æ•™å­¦è®¡åˆ’ï¼Œè¿”å›é»˜è®¤å€¼
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T08:44:26.621Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  username: 'admin',
  name: 'ç³»ç»Ÿç®¡ç†å‘˜',
  displayName: null,
  email: null,
  role: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: null
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: undefined,
  userRole: 'ADMIN',
  requesterId: '7054e764-d83f-472e-b5c9-05d2d633bd66'
}
[DEBUG] âœ… teacherId is present: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '7054e764-d83f-472e-b5c9-05d2d633bd66',
  scope: undefined,
  userRole: 'ADMIN'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 7054e764-d83f-472e-b5c9-05d2d633bd66
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 0 students for scope: undefined
[DEBUG] Service returned: {
  students: [],
  pagination: { page: 1, limit: 0, total: 0, totalPages: 1 }
}
[DEBUG] Number of students in result: 0
[DEBUG] Students data preview: []
[DEBUG] Response sent to frontend successfully
2025-12-19T08:44:37.373Z - GET /login
2025-12-19T08:44:37.380Z - GET /assets/index-BuvS4IkK.js
2025-12-19T08:44:37.380Z - GET /assets/index-CPDA1oy3.css
2025-12-19T08:44:37.400Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
2025-12-19T08:44:37.405Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 449
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T08:45:09.089Z - POST /api/auth/login
2025-12-19T08:45:09.203Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:45:09.213Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'ALL_SCHOOL',
  userRole: 'ADMIN',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'ALL_SCHOOL',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying ALL_SCHOOL for TEACHER: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: ALL_SCHOOL
[TEACHER BINDING] âœ… Found 46 students for scope: ALL_SCHOOL
[DEBUG] Service returned: {
  students: [
    {
      id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æå°çº¢',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 20,
      points: 1435,
      exp: 1958,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.691Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å°å',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 19,
      points: 1380,
      exp: 1850,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.694Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '35018b04-4b1d-4a39-8411-09d55fd8aba4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èµµå°ç¾',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 950,
      exp: 1600,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.693Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '4e1ce33f-1081-4d32-98c0-b0ef2a8feccd',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¼ å°æ˜',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 3,
      points: 870,
      exp: 1205,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.689Z,
      updatedAt: 2025-12-16T05:35:03.010Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '3922d8e1-7631-4d76-9e77-e0cdd16fd55f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å°å¼º',
      className: 'ä¸€å¹´çº§1ç­',
      level: 3,
      points: 780,
      exp: 1100,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-11T14:47:40.692Z,
      updatedAt: 2025-12-16T05:35:03.012Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'eddc5a62-7994-45ab-831f-7678a2e33e92',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '111',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 4,
      points: 258,
      exp: 300,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:26:06.769Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '570e41be-681d-4892-bb57-d4bad7e40985',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å”è‰ºé¦¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 2,
      points: 10310,
      exp: 199,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.151Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a0c083ed-3dbb-4b19-83e3-fe3136e56da4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®‹å­æ™¨',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1100,
      exp: 90,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.153Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'a3a72793-7c76-4f14-b18c-d786db55ff26',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ¨Šç‰§å®¸',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 219,
      exp: 78,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.157Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '56451443-918f-4784-a759-7a010457312f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æŸæˆ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 2995,
      exp: 58,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.182Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ec2b8cff-ab40-48ce-aad6-21d58c81c980',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½•æ³½æ˜•',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 445,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.185Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '65697759-b4ba-49ae-9f18-101730f7bf47',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¢“èŒ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 671,
      exp: 51,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.175Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'c1b7becf-7c22-4901-bf4b-dddfbe4f845c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ç ”æ›¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1880,
      exp: 50,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.167Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '83147758-d2d7-4541-a7c1-5892b809ccc8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å½­æ–¯æ™Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 553,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.165Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'fb3e1095-1edb-4b42-81b8-3d5f5744f4a8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æ­£æ¥ ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1153,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.140Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '577a615e-0ec0-40c7-b7ea-d274fc6eb142',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é»„è¡æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1270,
      exp: 47,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.191Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'bb61ac5c-9bee-4ff9-95ef-1d9e25728f76',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–é›¨è™¹',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1496,
      exp: 46,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.146Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '8a629a26-84df-414a-8541-6f543ae84ef2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ–¹æ™¯æ€¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3185,
      exp: 44,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.195Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '47938c35-a307-4191-84a8-bf798d599505',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–æ½‡ç„¶',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1201,
      exp: 40,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.150Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '456bb6e1-6a12-40d9-978f-8dacf78508ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å´é€¸æ¡',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 1279,
      exp: 37,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.148Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f3b26359-2347-44a0-a991-780c87adacbb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ç‹å½¦èˆ’',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 605,
      exp: 34,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.159Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'b043aea7-874b-4505-8274-50526192fde8',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è‚–æµ©è½©',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 148,
      exp: 33,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.189Z,
      updatedAt: 2025-12-17T17:59:44.652Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '55978b8f-9467-48f1-8bcd-f95224e044d3',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'èˆ’æ˜±æº',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 290,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.155Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '6fcc0c5f-912b-48e4-ba1b-c17e7f226d6a',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆé‡‘é”',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1580,
      exp: 26,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.143Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'a151595d-26a6-42a4-97fc-0988220b0e65',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'è°Œé›¨æ¶µ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1060,
      exp: 24,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.193Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9ebb1630-0692-4d37-81f9-01c89f1f602f',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'ä½™æ²å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3233,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.160Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'be503d07-18a9-4c5b-8836-7f6b943ae051',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'é™ˆç¬‘å¦',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 3790,
      exp: 14,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.180Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'd4d0d812-d0cf-4477-bce3-b6a8684971b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åºå­ç¥',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1310,
      exp: 7,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.162Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'f35c8b56-4200-4dcf-8950-eb72832214fe',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜å‡¡å…®',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 385,
      exp: 5,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.183Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '40a3cf36-1ccb-40fe-b34e-f9c49c91c6ed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'åˆ˜æ¶¦éœ–',
      className: 'ä¸€å¹´çº§1ç­',
      level: 1,
      points: 466,
      exp: 3,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.173Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '8ff2199c-2c15-4d39-937a-d6b86018b1a9',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '21112',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:09:01.127Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '98aef396-f106-4627-b8a0-9a019b27e88c',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:53.670Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '777b75ac-9cdc-4709-ac3d-c289078803d6',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '333',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:58.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'ab6b62de-5f9d-4ed9-a381-b4664c1dcbed',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '55',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 100,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:47:09.986Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '9cc96732-9117-47d4-ad46-fa1a8cc7a8a2',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalTestSuccess',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:02:31.347Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'ed35b905-2274-4297-b1c2-fd505728c5b7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'FinalVerificationTest',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:08:51.236Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: 'b0f71df3-b899-4cb9-bf1f-20d753618586',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'TestVisibility',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:05:03.624Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '62b956ae-2baa-465c-a3af-80fbd740b6a7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å»–ä¸€å‡¡',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 1005,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.176Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    },
    {
      id: 'cf16afa2-6d8a-41c1-9d9d-bc66d8538a96',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æµ‹è¯•å­¦ç”Ÿ',
      className: 'ä¸€å¹´çº§ä¸€ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:33:24.918Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
    }
  ],
  pagination: { page: 1, limit: 46, total: 46, totalPages: 1 }
}
[DEBUG] Number of students in result: 46
[DEBUG] Students data preview: [
  {
    id: 'acd9081e-fb02-4d3e-817f-914707fd7cb5',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æå°çº¢',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 20,
    points: 1435,
    exp: 1958,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.691Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  },
  {
    id: '80428dc8-3118-4a34-b9d7-976fd0d43a54',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'åˆ˜å°å',
    className: 'ä¸€å¹´çº§ä¸€ç­',
    level: 19,
    points: 1380,
    exp: 1850,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-11T14:47:40.694Z,
    updatedAt: 2025-12-16T05:35:03.010Z,
    teamId: null,
    teacherId: '64904b13-cbaa-40e5-86e9-6f608a51c45e'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T08:45:09.219Z - GET /avatar.jpg
2025-12-19T09:07:55.700Z - POST /api/auth/login
2025-12-19T09:08:07.084Z - POST /api/lms/publish-plan
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:08:22.650Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
âŒ Error publishing lesson plan: PrismaClientKnownRequestError: 
Invalid `this.prisma.task_records.findFirst()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:140:69

  137 affectedClasses.add(student.className || 'æœªåˆ†ç­');
  138 for (const task of tasks) {
  139     // é˜²é‡æ£€æŸ¥
â†’ 140     const existing = await this.prisma.task_records.findFirst(
The column `task_records.isOverridden` does not exist in the current database.
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.publishPlan (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:140:38)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:183:24 {
  code: 'P2022',
  clientVersion: '5.22.0',
  meta: { modelName: 'task_records', column: 'task_records.isOverridden' }
}
âŒ Error in POST /api/lms/publish: PrismaClientKnownRequestError: 
Invalid `this.prisma.task_records.findFirst()` invocation in
/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:140:69

  137 affectedClasses.add(student.className || 'æœªåˆ†ç­');
  138 for (const task of tasks) {
  139     // é˜²é‡æ£€æŸ¥
â†’ 140     const existing = await this.prisma.task_records.findFirst(
The column `task_records.isOverridden` does not exist in the current database.
    at $n.handleRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/home/devbox/project/arkok-v2/server/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async LMSService.publishPlan (/home/devbox/project/arkok-v2/server/dist/services/lms.service.js:140:38)
    at async /home/devbox/project/arkok-v2/server/dist/routes/lms.routes.js:183:24 {
  code: 'P2022',
  clientVersion: '5.22.0',
  meta: { modelName: 'task_records', column: 'task_records.isOverridden' }
}
2025-12-19T09:21:12.247Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:21:12.296Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:21:12.309Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:21:12.313Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:21:55.784Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:21:55.803Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:21:55.808Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:21:55.812Z - PATCH /api/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
2025-12-19T09:22:23.209Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:22:23.227Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:22:23.232Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:22:23.237Z - PATCH /api/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
2025-12-19T09:22:49.084Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:22:49.102Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:22:49.108Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:22:49.111Z - PATCH /api/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
2025-12-19T09:23:02.889Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:23:02.904Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:23:02.909Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:23:02.913Z - PATCH /api/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
2025-12-19T09:23:30.463Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:23:30.481Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:23:30.487Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:23:30.491Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:23:30.495Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:23:57.220Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:23:57.240Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:23:57.246Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:23:57.250Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:23:57.254Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:24:12.477Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:24:12.496Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:24:12.501Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:24:12.505Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:24:12.509Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:24:28.745Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:24:28.764Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:24:28.770Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:24:28.773Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:24:28.777Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:24:45.264Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:24:45.281Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:24:45.286Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:24:45.290Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:24:45.293Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:25:01.768Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:25:01.786Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:25:01.791Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:25:01.794Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:25:01.798Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:25:50.564Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:25:50.584Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:25:50.590Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:25:50.593Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:25:50.598Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:02.775Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:26:02.792Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:26:02.797Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:02.801Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:26:02.805Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:18.954Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:26:19.036Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:26:19.051Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:19.055Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:26:19.063Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:38.829Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:26:38.847Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:26:38.853Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:38.857Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ '84dfc424-018c-4f9d-90b9-63670e591ff4' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:26:38.860Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:54.276Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: è‡ªåŠ¨åŒ–æµ‹è¯•å¤‡è¯¾ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:26:54.312Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:26:54.317Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:26:54.320Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "cf721867-53c7-4316-b172-113893acd984"
  ],
  "status": "COMPLETED"
}
   - recordIds: [ 'cf721867-53c7-4316-b172-113893acd984' ]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 1, failed: 0 }
2025-12-19T09:26:54.324Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:41:57.249Z - GET /
2025-12-19T09:50:00.541Z - GET /prep
2025-12-19T09:50:00.620Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:00.622Z - GET /assets/index-BuvS4IkK.js
2025-12-19T09:50:00.622Z - GET /assets/index-CPDA1oy3.css
2025-12-19T09:50:00.700Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:00.701Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:50:00.781Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:00.782Z - GET /avatar.jpg
2025-12-19T09:50:00.782Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:50:00.860Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:00.861Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:50:00.862Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T09:50:00.864Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=03ee8243-cd04-4cd7-bdb3-6f2f7de9ab0b, date=Fri Dec 19 2025 09:48:57 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:50:32.057Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:50:34.385Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T09:50:34.387Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:50:34.460Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.461Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.462Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.465Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.467Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.470Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.471Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:34.700Z - GET /avatar.jpg
2025-12-19T09:50:35.360Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T09:50:47.419Z - PATCH /api/lms/records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:48.939Z - PATCH /api/lms/records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:51.020Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "84dfc424-018c-4f9d-90b9-63670e591ff4",
    "0fd1737b-e017-45a6-b10c-138a07f466c9",
    "cf721867-53c7-4316-b172-113893acd984",
    "794affea-266c-49f4-b6fc-52eb7f744af1",
    "44c78fe1-81e0-48bd-9fdb-506b320c6f18",
    "980f0d01-595a-4fa2-93c3-3a056d44ba9b",
    "219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91",
    "68384e7b-f533-4dd8-8e87-cb9bdab8ac8e",
    "a5e20a2a-6966-464c-8b08-0281b442b2c9",
    "8fc99756-ded8-46e7-a034-5c6530e03c5f",
    "be5b3888-5caf-4107-823c-994a80a354d4"
  ],
  "status": "COMPLETED"
}
   - recordIds: [
  '84dfc424-018c-4f9d-90b9-63670e591ff4',
  '0fd1737b-e017-45a6-b10c-138a07f466c9',
  'cf721867-53c7-4316-b172-113893acd984',
  '794affea-266c-49f4-b6fc-52eb7f744af1',
  '44c78fe1-81e0-48bd-9fdb-506b320c6f18',
  '980f0d01-595a-4fa2-93c3-3a056d44ba9b',
  '219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91',
  '68384e7b-f533-4dd8-8e87-cb9bdab8ac8e',
  'a5e20a2a-6966-464c-8b08-0281b442b2c9',
  '8fc99756-ded8-46e7-a034-5c6530e03c5f',
  'be5b3888-5caf-4107-823c-994a80a354d4'
]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 11, failed: 0 }
2025-12-19T09:50:55.021Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:57.415Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:50:57.500Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:50:58.065Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 24 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T09:50:58.220Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:58.222Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:50:58.223Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T09:51:14.380Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T09:51:14.382Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:51:14.460Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:14.461Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:14.462Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:14.465Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:14.466Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:14.468Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:14.469Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:15.495Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T09:51:15.497Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:51:15.505Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=ef67b4a6-5eec-44bd-98d0-1fc0aabfbaa5, date=Fri Dec 19 2025 09:50:26 GMT+0000 (Coordinated Universal Time)
2025-12-19T09:51:31.395Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T09:51:31.397Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:51:31.501Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:31.502Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:31.503Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:31.504Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:31.505Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:31.506Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:31.509Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:35.339Z - PATCH /api/lms/records/eec3d8c8-462f-492c-9500-5ed6f4adbda9/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/eec3d8c8-462f-492c-9500-5ed6f4adbda9/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:51:38.755Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=ef67b4a6-5eec-44bd-98d0-1fc0aabfbaa5, date=Fri Dec 19 2025 09:50:26 GMT+0000 (Coordinated Universal Time)
2025-12-19T09:51:38.760Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T09:51:38.762Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:53:06.033Z - GET /prep
2025-12-19T09:53:06.142Z - GET /assets/index-BuvS4IkK.js
2025-12-19T09:53:06.143Z - GET /assets/index-CPDA1oy3.css
2025-12-19T09:53:06.313Z - GET /vite.svg
2025-12-19T09:53:06.313Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:06.422Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T09:53:06.437Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:53:06.438Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=ef67b4a6-5eec-44bd-98d0-1fc0aabfbaa5, date=Fri Dec 19 2025 09:50:26 GMT+0000 (Coordinated Universal Time)
2025-12-19T09:53:06.441Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:53:09.117Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T09:53:09.119Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:53:09.199Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.200Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.202Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.202Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.203Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.207Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.208Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:53:09.312Z - GET /avatar.jpg
2025-12-19T09:53:10.252Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T09:54:18.757Z - PATCH /api/lms/records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:54:58.916Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:54:58.917Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T09:54:58.919Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=ef67b4a6-5eec-44bd-98d0-1fc0aabfbaa5, date=Fri Dec 19 2025 09:50:26 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:55:30.675Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:55:32.916Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T09:55:32.917Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:55:33.002Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.003Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.004Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.005Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.006Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.009Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.010Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:33.675Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T09:55:41.641Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T09:55:51.241Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1dd13004-95e4-4643-947f-eac9e198f465
2025-12-19T09:55:53.921Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:55:54.061Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:55:55.815Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:55:55.825Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T09:55:55.827Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=90976aea-091a-4cc5-ad3a-6759c0cf651e, date=Fri Dec 19 2025 09:55:29 GMT+0000 (Coordinated Universal Time)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:55:57.751Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T09:55:57.752Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:55:57.825Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:57.840Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:57.841Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:57.842Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:57.843Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:57.846Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:57.847Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:55:58.780Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T09:56:14.304Z - PATCH /api/lms/student-progress/1896c410-1a91-4281-ac02-797756c638cc
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /student-progress/1896c410-1a91-4281-ac02-797756c638cc
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:16.855Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:56:16.946Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:56:17.746Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 28 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T09:56:17.826Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:17.827Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T09:56:17.828Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T09:56:46.776Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:56:46.865Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:56:47.895Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=90976aea-091a-4cc5-ad3a-6759c0cf651e, date=Fri Dec 19 2025 09:55:29 GMT+0000 (Coordinated Universal Time)
2025-12-19T09:56:47.906Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T09:56:47.907Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:56:56.536Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T09:56:56.541Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T09:56:56.620Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:56.625Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:56.626Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:56.627Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:56.628Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:56.629Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T09:56:56.633Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:07.382Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1dd13004-95e4-4643-947f-eac9e198f465
2025-12-19T10:05:38.902Z - GET /qc
2025-12-19T10:05:39.001Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:05:39.001Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:05:39.170Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.215Z - GET /vite.svg
2025-12-19T10:05:39.255Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.256Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:05:39.257Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:05:39.336Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.340Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.341Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.342Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.344Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.345Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.347Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:39.421Z - GET /avatar.jpg
2025-12-19T10:05:40.340Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T10:05:41.180Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:42.975Z - GET /qc
2025-12-19T10:05:43.060Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:05:43.060Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:05:43.175Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.177Z - GET /vite.svg
2025-12-19T10:05:43.296Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:05:43.300Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:05:43.301Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:05:43.380Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.381Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.382Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.383Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.384Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.385Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.389Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:43.460Z - GET /avatar.jpg
2025-12-19T10:05:53.692Z - GET /login
2025-12-19T10:05:53.699Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:05:53.699Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:05:53.790Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:05:53.812Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:06:03.715Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T10:06:04.650Z - GET /qc
2025-12-19T10:06:04.760Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:06:04.761Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:06:04.865Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:04.875Z - GET /vite.svg
2025-12-19T10:06:04.935Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:04.937Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
2025-12-19T10:06:04.940Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:06:05.020Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.021Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.022Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.025Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.026Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.028Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.029Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:05.081Z - GET /avatar.jpg
2025-12-19T10:06:06.045Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T10:06:06.364Z - POST /api/auth/login
2025-12-19T10:06:06.488Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:06:06.494Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:06:06.498Z - GET /avatar.jpg
2025-12-19T10:06:25.209Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:06:25.210Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:06:25.220Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:25.221Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:25.222Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:25.223Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:25.224Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:25.225Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:25.229Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:30.959Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T10:06:36.974Z - PATCH /api/lms/records/cf721867-53c7-4316-b172-113893acd984/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/cf721867-53c7-4316-b172-113893acd984/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:43.995Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:06:44.065Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:06:45.955Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:06:45.960Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:06:45.961Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=90976aea-091a-4cc5-ad3a-6759c0cf651e, date=Fri Dec 19 2025 09:55:29 GMT+0000 (Coordinated Universal Time)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:06:46.750Z - GET /prep
2025-12-19T10:06:46.850Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:06:46.850Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:06:46.995Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:47.000Z - GET /vite.svg
2025-12-19T10:06:47.104Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:06:47.115Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:06:47.116Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:06:47.117Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=90976aea-091a-4cc5-ad3a-6759c0cf651e, date=Fri Dec 19 2025 09:55:29 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:06:48.785Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:06:48.805Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:06:48.865Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.876Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.877Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.878Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.879Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.882Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.882Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:06:48.954Z - GET /avatar.jpg
2025-12-19T10:06:49.570Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T10:06:50.456Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.788Z - GET /qc
2025-12-19T10:07:45.796Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:07:45.797Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:07:45.822Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.837Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.838Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:07:45.840Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:07:45.849Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.850Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.851Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.853Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.854Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.858Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.859Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:07:45.866Z - GET /avatar.jpg
2025-12-19T10:07:58.256Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766138130686, Override: 1766138174306
2025-12-19T10:16:44.468Z - GET /prep
2025-12-19T10:16:45.045Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:16:45.053Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:16:45.354Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:47.549Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:16:47.550Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:16:47.552Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=90976aea-091a-4cc5-ad3a-6759c0cf651e, date=Fri Dec 19 2025 09:55:29 GMT+0000 (Coordinated Universal Time)
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:16:47.574Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:16:47.633Z - GET /vite.svg
2025-12-19T10:16:56.050Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:16:59.483Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:16:59.485Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:16:59.604Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.609Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.610Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.612Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.616Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.617Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.618Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:16:59.705Z - GET /avatar.jpg
2025-12-19T10:17:00.541Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766139416054, Override: 1766138174306
2025-12-19T10:17:03.095Z - PATCH /api/lms/records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:17:05.264Z - PATCH /api/lms/records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:17:08.328Z - PATCH /api/lms/records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:17:33.784Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=5171b2bf-55ed-4569-8c66-d4c34e76089c, date=Fri Dec 19 2025 10:16:52 GMT+0000 (Coordinated Universal Time)
2025-12-19T10:17:33.797Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:17:33.798Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:27:23.460Z - GET /login
2025-12-19T10:27:23.468Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:27:23.468Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:27:23.553Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:23.568Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:27:31.565Z - POST /api/auth/login
2025-12-19T10:27:31.685Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:27:31.693Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:27:31.697Z - GET /avatar.jpg
2025-12-19T10:27:37.342Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:27:37.343Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:27:37.345Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=5171b2bf-55ed-4569-8c66-d4c34e76089c, date=Fri Dec 19 2025 10:16:52 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:27:43.959Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:27:55.557Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:27:55.558Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:27:55.566Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.568Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.570Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.573Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.574Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.576Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.579Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:27:55.585Z - GET /avatar.jpg
2025-12-19T10:28:01.040Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766140063962, Override: 1766138174306
2025-12-19T10:28:12.621Z - PATCH /api/lms/records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:35:46.662Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 337
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: admin (ADMIN)
ğŸš« [PERMISSION_DENIED] æ ¡é•¿ç”¨æˆ· admin å°è¯•å‘å¸ƒæ•™å­¦è®¡åˆ’ï¼Œå·²æ‹’ç»
2025-12-19T10:36:09.085Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: å›å½’æµ‹è¯•è¯¾ç¨‹ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:36:09.118Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:36:09.131Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:36:09.135Z - PATCH /api/lms/records/1bcab752-e935-43c2-baf2-8fa6ee194759/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/1bcab752-e935-43c2-baf2-8fa6ee194759/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:36:25.961Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: å›å½’æµ‹è¯•è¯¾ç¨‹ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:36:25.983Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {
  scope: 'MY_STUDENTS',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:36:25.988Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:36:25.993Z - PATCH /api/lms/records/6ff5c5bb-b5a8-4d01-b16e-d7968d5baf80/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/6ff5c5bb-b5a8-4d01-b16e-d7968d5baf80/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:44:49.037Z - GET /prep
2025-12-19T10:44:49.116Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:44:49.117Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:44:49.352Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:44:49.431Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:44:49.432Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:44:49.436Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:44:49.437Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a4c7a4d5-6977-4fe4-93ce-5b23a80c67bb, date=Fri Dec 19 2025 10:36:25 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:44:50.697Z - GET /prep
2025-12-19T10:44:50.791Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:44:50.791Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:44:50.941Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:44:50.951Z - GET /vite.svg
2025-12-19T10:44:51.111Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:44:51.113Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:44:51.114Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:44:51.115Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a4c7a4d5-6977-4fe4-93ce-5b23a80c67bb, date=Fri Dec 19 2025 10:36:25 GMT+0000 (Coordinated Universal Time)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:45:18.156Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:45:21.421Z - GET /prep
2025-12-19T10:45:21.512Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:45:21.512Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:45:21.661Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:21.671Z - GET /vite.svg
2025-12-19T10:45:21.751Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:21.752Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:45:21.753Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=2ba54168-261e-478c-b92f-2442ebaeda76, date=Fri Dec 19 2025 10:45:11 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
2025-12-19T10:45:21.755Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:45:23.436Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:45:25.831Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:45:25.832Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:45:25.926Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:25.927Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:25.928Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:25.929Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:25.930Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:25.933Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:25.934Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:26.151Z - GET /avatar.jpg
2025-12-19T10:45:26.711Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766141123438, Override: 1766138174306
2025-12-19T10:45:31.577Z - PATCH /api/lms/records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:32.871Z - PATCH /api/lms/records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:41.990Z - PATCH /api/lms/records/a5e20a2a-6966-464c-8b08-0281b442b2c9/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/a5e20a2a-6966-464c-8b08-0281b442b2c9/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:45.262Z - PATCH /api/lms/records/1bcab752-e935-43c2-baf2-8fa6ee194759/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/1bcab752-e935-43c2-baf2-8fa6ee194759/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:45:47.987Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:45:47.988Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:45:47.989Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=0334d4a2-23a8-400a-bd67-111fe5c4e37d, date=Fri Dec 19 2025 10:45:21 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:46:03.191Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:46:05.512Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:46:05.513Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:46:05.591Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.595Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.597Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.598Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.600Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.601Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.603Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:05.676Z - GET /avatar.jpg
2025-12-19T10:46:06.221Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766141163194, Override: 1766138174306
2025-12-19T10:46:28.876Z - PATCH /api/lms/records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:41.272Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:46:41.351Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:46:42.391Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 30 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T10:46:42.632Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:46:42.633Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T10:46:42.634Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Times - Plan: 1766141163194, Override: 1766138174306
2025-12-19T10:50:20.573Z - GET /prep
2025-12-19T10:50:20.632Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:50:20.637Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:50:20.793Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:20.867Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:50:20.872Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:50:20.873Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:50:20.874Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=b981e841-18e8-4869-9197-a1ce65adf118, date=Fri Dec 19 2025 10:46:01 GMT+0000 (Coordinated Universal Time)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:50:21.987Z - GET /prep
2025-12-19T10:50:22.073Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:50:22.077Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:50:22.147Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:22.152Z - GET /vite.svg
2025-12-19T10:50:22.222Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:50:22.248Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=b981e841-18e8-4869-9197-a1ce65adf118, date=Fri Dec 19 2025 10:46:01 GMT+0000 (Coordinated Universal Time)
2025-12-19T10:50:22.252Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:50:22.253Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:50:54.552Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T10:50:56.848Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T10:50:56.849Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T10:50:56.924Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.925Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.926Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.926Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.927Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.930Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.931Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:50:56.998Z - GET /avatar.jpg
2025-12-19T10:50:57.652Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766141454555, Override: 1766138174306
2025-12-19T10:51:00.648Z - PATCH /api/lms/records/6ff5c5bb-b5a8-4d01-b16e-d7968d5baf80/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/6ff5c5bb-b5a8-4d01-b16e-d7968d5baf80/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:02.653Z - PATCH /api/lms/records/794affea-266c-49f4-b6fc-52eb7f744af1/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/794affea-266c-49f4-b6fc-52eb7f744af1/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:04.113Z - PATCH /api/lms/records/8fc99756-ded8-46e7-a034-5c6530e03c5f/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/8fc99756-ded8-46e7-a034-5c6530e03c5f/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:06.612Z - GET /qc
2025-12-19T10:51:06.692Z - GET /assets/index-BuvS4IkK.js
2025-12-19T10:51:06.693Z - GET /assets/index-CPDA1oy3.css
2025-12-19T10:51:06.832Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:06.834Z - GET /vite.svg
2025-12-19T10:51:06.927Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T10:51:06.932Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T10:51:06.933Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T10:51:06.993Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:06.994Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:07.003Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:07.004Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:07.005Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:07.006Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:07.010Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:51:07.087Z - GET /avatar.jpg
2025-12-19T10:51:07.932Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766141454555, Override: 1766138174306
2025-12-19T10:51:08.912Z - PATCH /api/lms/records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T10:52:17.458Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:03:00.309Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:03:00.327Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:03:00.342Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:20:40.353Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: undefined,
  email: undefined,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: undefined,
  primaryClassName: undefined
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:20:40.371Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:20:40.384Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 331
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:08.197Z - GET /prep
2025-12-19T11:22:08.268Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:22:08.269Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:22:08.433Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:08.513Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:08.514Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:22:08.515Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=9e0f0990-e0d7-4777-9d1a-11d5ee9a3305, date=Fri Dec 19 2025 10:50:50 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:22:08.517Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:22:09.542Z - GET /prep
2025-12-19T11:22:09.622Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:22:09.623Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:22:09.702Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:09.707Z - GET /vite.svg
2025-12-19T11:22:09.788Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:22:09.789Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:09.790Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:22:09.791Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=9e0f0990-e0d7-4777-9d1a-11d5ee9a3305, date=Fri Dec 19 2025 10:50:50 GMT+0000 (Coordinated Universal Time)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:22:29.207Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:22:34.347Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:22:36.193Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:22:36.195Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:22:36.274Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.275Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.276Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.277Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.278Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.278Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.281Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:36.362Z - GET /avatar.jpg
2025-12-19T11:22:36.832Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766143354349, Override: 1766138174306
2025-12-19T11:22:41.152Z - PATCH /api/lms/records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:42.423Z - PATCH /api/lms/records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/980f0d01-595a-4fa2-93c3-3a056d44ba9b/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:43.637Z - PATCH /api/lms/records/44c78fe1-81e0-48bd-9fdb-506b320c6f18/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/44c78fe1-81e0-48bd-9fdb-506b320c6f18/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:58.993Z - GET /qc
2025-12-19T11:22:59.153Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:22:59.157Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:22:59.308Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.309Z - GET /vite.svg
2025-12-19T11:22:59.462Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T11:22:59.468Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:22:59.469Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:22:59.552Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.553Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.557Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.558Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.559Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.562Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.563Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:22:59.637Z - GET /avatar.jpg
2025-12-19T11:23:00.583Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
[LMS_PROGRESS] Times - Plan: 1766143354349, Override: 1766138174306
2025-12-19T11:23:01.223Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:23:02.513Z - PATCH /api/lms/records/0fd1737b-e017-45a6-b10c-138a07f466c9/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/0fd1737b-e017-45a6-b10c-138a07f466c9/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:23:03.462Z - PATCH /api/records/0fd1737b-e017-45a6-b10c-138a07f466c9/attempt
2025-12-19T11:23:04.743Z - PATCH /api/records/84dfc424-018c-4f9d-90b9-63670e591ff4/attempt
2025-12-19T11:23:05.392Z - PATCH /api/lms/records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/84dfc424-018c-4f9d-90b9-63670e591ff4/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:23:07.872Z - PATCH /api/lms/records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/219e9f5c-9b7b-44db-ae3b-00f7ef5eeb91/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:08.910Z - PATCH /api/lms/records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/68384e7b-f533-4dd8-8e87-cb9bdab8ac8e/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:12.994Z - GET /qc
2025-12-19T11:24:13.143Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:24:13.148Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:24:13.313Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.323Z - GET /vite.svg
2025-12-19T11:24:13.463Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T11:24:13.473Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:24:13.475Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:24:13.553Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.564Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.565Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.566Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.573Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.574Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.575Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:13.708Z - GET /avatar.jpg
2025-12-19T11:24:14.514Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T11:24:18.103Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:24:18.113Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:24:18.115Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a93642aa-46e1-441d-b68a-38b8bc2e62a7, date=Fri Dec 19 2025 11:22:33 GMT+0000 (Coordinated Universal Time)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:24:22.539Z - GET /prep
2025-12-19T11:24:22.679Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:24:22.679Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:24:22.839Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:24:22.983Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:24:22.984Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a93642aa-46e1-441d-b68a-38b8bc2e62a7, date=Fri Dec 19 2025 11:22:33 GMT+0000 (Coordinated Universal Time)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T11:24:22.993Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:24:22.994Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:25:00.142Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:25:00.143Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:25:00.217Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.218Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.219Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.220Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.221Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.222Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.226Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:25:00.295Z - GET /avatar.jpg
2025-12-19T11:25:00.606Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:25:00.696Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:27.398Z - GET /prep
2025-12-19T11:27:27.467Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:27:27.468Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:27:27.618Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:27.672Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:27.682Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:27:27.683Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a93642aa-46e1-441d-b68a-38b8bc2e62a7, date=Fri Dec 19 2025 11:22:33 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:27:27.685Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:27:28.678Z - GET /prep
2025-12-19T11:27:28.743Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:27:28.792Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:27:28.892Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:28.893Z - GET /vite.svg
2025-12-19T11:27:28.993Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:28.994Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a93642aa-46e1-441d-b68a-38b8bc2e62a7, date=Fri Dec 19 2025 11:22:33 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:27:28.997Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:27:28.998Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:30.668Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:27:30.669Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:30.757Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.758Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.759Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.760Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.762Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.763Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.764Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:30.828Z - GET /avatar.jpg
2025-12-19T11:27:31.392Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:27:32.958Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:33.032Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:33.958Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 0 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:27:34.032Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:34.034Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:27:34.035Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:34.912Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=a93642aa-46e1-441d-b68a-38b8bc2e62a7, date=Fri Dec 19 2025 11:22:33 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:27:34.918Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:27:34.919Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:27:35.717Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:27:38.518Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:27:38.519Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:27:38.598Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:38.599Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:38.600Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:38.601Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:38.602Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:38.605Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:38.607Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:39.392Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:27:41.117Z - PATCH /api/lms/records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:42.237Z - PATCH /api/lms/records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:43.273Z - PATCH /api/lms/records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:45.718Z - PATCH /api/lms/records/f1d8a2fa-4f9a-4fab-b991-8a5498c9c99f/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/f1d8a2fa-4f9a-4fab-b991-8a5498c9c99f/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:46.992Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:47.073Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:47.762Z - GET /api/students/33a7f6cf-d714-498d-97d3-a2c15547cce7/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /33a7f6cf-d714-498d-97d3-a2c15547cce7/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 33a7f6cf-d714-498d-97d3-a2c15547cce7, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: 33ã€‘ã€‘44, åŒ…å« 6 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:27:47.832Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 33a7f6cf-d714-498d-97d3-a2c15547cce7
2025-12-19T11:27:47.834Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:47.835Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:49.392Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=67271761-d67a-4cca-bda4-e26274561a43, date=Fri Dec 19 2025 11:27:34 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:27:49.397Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:27:49.398Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:50.472Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:27:50.478Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:27:50.557Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:50.563Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:50.564Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:50.565Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:50.566Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:50.568Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:50.569Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:51.102Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 33a7f6cf-d714-498d-97d3-a2c15547cce7
2025-12-19T11:27:51.912Z - PATCH /api/lms/records/79124468-9c05-4872-8e9d-940b63fba7be/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/79124468-9c05-4872-8e9d-940b63fba7be/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:27:54.352Z - PATCH /api/records/4e2c6ed7-2330-4558-92cb-034ca5a02473/attempt
2025-12-19T11:27:55.352Z - PATCH /api/lms/records/4e2c6ed7-2330-4558-92cb-034ca5a02473/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/4e2c6ed7-2330-4558-92cb-034ca5a02473/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:05.478Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=67271761-d67a-4cca-bda4-e26274561a43, date=Fri Dec 19 2025 11:27:34 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:28:05.482Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:28:05.483Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:28:14.557Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:28:17.478Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:28:17.479Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:28:17.568Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:17.569Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:17.570Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:17.571Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:17.572Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:17.573Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:17.576Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:18.357Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:28:22.752Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:28:22.832Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:28:27.273Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:28:27.274Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=b5bad3c1-e4b5-4e1a-afab-591b3ebe3f00, date=Fri Dec 19 2025 11:28:12 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
2025-12-19T11:28:27.277Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:28:36.002Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:28:37.758Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:28:37.760Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:28:37.838Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.839Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.840Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.841Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.842Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.846Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.847Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:28:37.998Z - GET /avatar.jpg
2025-12-19T11:28:38.513Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:28:40.777Z - PATCH /api/lms/records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:29:08.677Z - PATCH /api/lms/records/68719223-e13a-4d70-9a11-4f41e94d3a75/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/68719223-e13a-4d70-9a11-4f41e94d3a75/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:29:11.157Z - PATCH /api/lms/records/68719223-e13a-4d70-9a11-4f41e94d3a75/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/68719223-e13a-4d70-9a11-4f41e94d3a75/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:23.263Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:32:23.342Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:32:24.287Z - GET /api/students/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: æ›¾æ¬£åª›, åŒ…å« 7 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:32:24.372Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:24.373Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T11:32:24.381Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:47.249Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:32:47.338Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:32:48.857Z - GET /api/students/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: æ›¾æ¬£åª›, åŒ…å« 7 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:32:48.997Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:48.998Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T11:32:48.999Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.893Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:32:49.894Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:32:49.968Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.972Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.973Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.978Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.978Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.979Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:49.981Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:32:50.987Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T11:33:02.778Z - PATCH /api/lms/student-progress/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /student-progress/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:05.067Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:33:05.147Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:33:06.673Z - GET /api/students/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: æ›¾æ¬£åª›, åŒ…å« 8 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:33:06.763Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:06.765Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T11:33:06.766Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Times - Plan: 1766143716005, Override: 1766143982779
2025-12-19T11:33:11.948Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:33:12.042Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:33:37.094Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:33:37.095Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:33:37.168Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:37.169Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:37.170Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:37.171Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:37.172Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:37.175Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:37.176Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:33:38.047Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:34:02.058Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "b279e733-e386-4247-9c5c-4113d4297d02",
    "bc311ec2-0860-45a7-acb2-3f861167d557",
    "68719223-e13a-4d70-9a11-4f41e94d3a75",
    "b36320c8-6784-465a-9645-d12925bea694",
    "f1d8a2fa-4f9a-4fab-b991-8a5498c9c99f",
    "2ebbd55b-6454-420d-881d-730b6f7ca843",
    "bc836e9d-1e6c-49ac-9d30-04eeeba5f7a0"
  ],
  "status": "COMPLETED"
}
   - recordIds: [
  'b279e733-e386-4247-9c5c-4113d4297d02',
  'bc311ec2-0860-45a7-acb2-3f861167d557',
  '68719223-e13a-4d70-9a11-4f41e94d3a75',
  'b36320c8-6784-465a-9645-d12925bea694',
  'f1d8a2fa-4f9a-4fab-b991-8a5498c9c99f',
  '2ebbd55b-6454-420d-881d-730b6f7ca843',
  'bc836e9d-1e6c-49ac-9d30-04eeeba5f7a0'
]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 7, failed: 0 }
2025-12-19T11:34:13.168Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:34:13.257Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:34:14.127Z - GET /api/students/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: æ›¾æ¬£åª›, åŒ…å« 8 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:34:14.212Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:34:14.222Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
2025-12-19T11:34:14.223Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Times - Plan: 1766143716005, Override: 1766143982779
2025-12-19T11:34:36.953Z - GET /prep
2025-12-19T11:34:37.679Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:34:37.694Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:34:37.997Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:34:40.282Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:34:40.283Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:34:40.284Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=fd40585d-cd2f-4914-913f-bc75fbbea0f3, date=Fri Dec 19 2025 11:28:31 GMT+0000 (Coordinated Universal Time)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
2025-12-19T11:34:40.286Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:34:40.467Z - GET /vite.svg
2025-12-19T11:35:21.580Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:35:24.959Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
2025-12-19T11:35:24.963Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:35:25.025Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.035Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.036Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.037Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.038Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.041Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.042Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:25.136Z - GET /avatar.jpg
2025-12-19T11:35:26.162Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:35:29.585Z - PATCH /api/lms/records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:35:49.586Z - GET /avatar.jpg
2025-12-19T11:35:58.896Z - PATCH /api/lms/records/dd137ad1-0347-42ed-a276-24f49f705015/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/dd137ad1-0347-42ed-a276-24f49f705015/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:03.865Z - PATCH /api/lms/records/8deb06ab-6d76-4920-ba65-05770596881d/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/8deb06ab-6d76-4920-ba65-05770596881d/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:07.774Z - PATCH /api/records/bc311ec2-0860-45a7-acb2-3f861167d557/attempt
2025-12-19T11:36:08.215Z - PATCH /api/records/bc311ec2-0860-45a7-acb2-3f861167d557/attempt
2025-12-19T11:36:09.678Z - PATCH /api/records/bc311ec2-0860-45a7-acb2-3f861167d557/attempt
2025-12-19T11:36:10.381Z - PATCH /api/records/bc311ec2-0860-45a7-acb2-3f861167d557/attempt
2025-12-19T11:36:10.925Z - PATCH /api/records/bc311ec2-0860-45a7-acb2-3f861167d557/attempt
2025-12-19T11:36:11.626Z - PATCH /api/records/bc311ec2-0860-45a7-acb2-3f861167d557/attempt
2025-12-19T11:36:12.160Z - PATCH /api/records/b279e733-e386-4247-9c5c-4113d4297d02/attempt
2025-12-19T11:36:14.285Z - PATCH /api/records/68719223-e13a-4d70-9a11-4f41e94d3a75/attempt
2025-12-19T11:36:17.081Z - PATCH /api/records/b36320c8-6784-465a-9645-d12925bea694/attempt
2025-12-19T11:36:25.845Z - GET /qc
2025-12-19T11:36:26.150Z - GET /assets/index-BuvS4IkK.js
2025-12-19T11:36:26.151Z - GET /assets/index-CPDA1oy3.css
2025-12-19T11:36:26.401Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.207Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:36:28.217Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:36:28.218Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:36:28.223Z - GET /vite.svg
2025-12-19T11:36:28.258Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.259Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.260Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.262Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.271Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.272Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.273Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:36:28.346Z - GET /avatar.jpg
2025-12-19T11:36:29.558Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb
[LMS_PROGRESS] Times - Plan: 1766144121583, Override: 1766143982779
2025-12-19T11:36:46.699Z - PATCH /api/lms/records/b79f68f9-2468-45b9-9a2c-6e77e48ca456/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b79f68f9-2468-45b9-9a2c-6e77e48ca456/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:37:07.328Z - PATCH /api/lms/records/3edfb7b9-a84d-47b8-a885-f64ee46bea99/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/3edfb7b9-a84d-47b8-a885-f64ee46bea99/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:20.181Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:20.335Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:20.912Z - GET /api/badges
2025-12-19T11:38:20.914Z - GET /api/badges/stats
2025-12-19T11:38:20.914Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { schoolId: '625e503b-aa7e-44fe-9982-237d828af717', limit: '100' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: 100,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 100, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:22.094Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:22.336Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:22.555Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:22.559Z - GET /api/habits
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:22.833Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:38:22.834Z - GET /api/habits
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:25.940Z - POST /api/habits/checkin
ğŸ” [AUTH_MIDDLEWARE] Processing POST /checkin
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Check in habit error: Error: ä¹ æƒ¯ä¸å­˜åœ¨æˆ–å·²åœç”¨
    at HabitService.checkInHabit (/home/devbox/project/arkok-v2/server/dist/services/habit.service.js:202:19)
    at async HabitRoutes.checkInHabit (/home/devbox/project/arkok-v2/server/dist/routes/habit.routes.js:511:28)
2025-12-19T11:38:28.798Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:29.035Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:30.916Z - GET /api/students/33a7f6cf-d714-498d-97d3-a2c15547cce7/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /33a7f6cf-d714-498d-97d3-a2c15547cce7/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 33a7f6cf-d714-498d-97d3-a2c15547cce7, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: 33ã€‘ã€‘44, åŒ…å« 16 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:38:31.225Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:31.227Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 33a7f6cf-d714-498d-97d3-a2c15547cce7
2025-12-19T11:38:31.230Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:41.546Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:41.696Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:43.302Z - GET /api/students/14c6339d-7b8c-48c7-8695-f638375a6b3d/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /14c6339d-7b8c-48c7-8695-f638375a6b3d/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 14c6339d-7b8c-48c7-8695-f638375a6b3d, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: 115, åŒ…å« 16 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:38:43.620Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:43.625Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:43.626Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 14c6339d-7b8c-48c7-8695-f638375a6b3d
2025-12-19T11:38:49.313Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:49.466Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:51.088Z - GET /api/students/1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Processing GET /1896c410-1a91-4281-ac02-797756c638cc/profile
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” è·å–å­¦ç”Ÿæ¡£æ¡ˆ: 1896c410-1a91-4281-ac02-797756c638cc, å­¦æ ¡: 625e503b-aa7e-44fe-9982-237d828af717
âœ… å­¦ç”Ÿæ¡£æ¡ˆè·å–æˆåŠŸ: å®å¯æ­†, åŒ…å« 16 æ¡ä»»åŠ¡è®°å½•, 0 æ¡PKè®°å½•
2025-12-19T11:38:51.461Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:51.466Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T11:38:51.467Z - GET /api/lms/all-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /all-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:38:54.943Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:55.148Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:38:55.153Z - GET /avatar.jpg
2025-12-19T11:39:00.933Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:39:00.935Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:39:01.151Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:01.156Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:01.157Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:01.158Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:01.162Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:01.163Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:01.166Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:13.793Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:16.982Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=fd8995c9-7b73-4f68-96bd-819d6a7ac1ee, date=Fri Dec 19 2025 11:35:17 GMT+0000 (Coordinated Universal Time)
2025-12-19T11:39:16.987Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:39:16.988Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:17.465Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:39:17.466Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:39:17.714Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:17.715Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:17.716Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:17.717Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:17.718Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:17.722Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:17.723Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:22.190Z - PATCH /api/lms/records/8deb06ab-6d76-4920-ba65-05770596881d/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/8deb06ab-6d76-4920-ba65-05770596881d/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:35.788Z - PATCH /api/records/student/1896c410-1a91-4281-ac02-797756c638cc/pass-all
2025-12-19T11:39:35.792Z - PATCH /api/records/student/31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb/pass-all
2025-12-19T11:39:42.591Z - PATCH /api/lms/records/b9e181c2-617b-43ce-ae4a-6ffe9273b965/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b9e181c2-617b-43ce-ae4a-6ffe9273b965/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T11:39:53.788Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:53.942Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:55.150Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:39:55.152Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:39:55.153Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=fd8995c9-7b73-4f68-96bd-819d6a7ac1ee, date=Fri Dec 19 2025 11:35:17 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T11:39:55.706Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:55.908Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:56.107Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T11:39:56.108Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T11:39:56.109Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=fd8995c9-7b73-4f68-96bd-819d6a7ac1ee, date=Fri Dec 19 2025 11:35:17 GMT+0000 (Coordinated Universal Time)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:57.392Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T11:39:57.716Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T11:39:57.717Z - GET /avatar.jpg
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:04:34.484Z - GET /qc
2025-12-19T12:04:35.003Z - GET /assets/index-CPDA1oy3.css
2025-12-19T12:04:35.003Z - GET /assets/index-BuvS4IkK.js
2025-12-19T12:04:35.347Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:36.999Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:04:37.001Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:04:37.005Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T12:04:37.110Z - GET /vite.svg
2025-12-19T12:04:37.122Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.123Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.124Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.125Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.129Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.131Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.133Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:37.217Z - GET /avatar.jpg
2025-12-19T12:04:38.299Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:04:38.300Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:04:38.301Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=fd8995c9-7b73-4f68-96bd-819d6a7ac1ee, date=Fri Dec 19 2025 11:35:17 GMT+0000 (Coordinated Universal Time)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:04:42.104Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T12:04:46.090Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
2025-12-19T12:04:46.093Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:04:46.170Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.171Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.171Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.172Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.173Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.174Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.178Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:04:46.269Z - GET /avatar.jpg
2025-12-19T12:04:46.965Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T12:04:51.271Z - PATCH /api/lms/records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:02.200Z - GET /qc
2025-12-19T12:05:03.163Z - GET /assets/index-BuvS4IkK.js
2025-12-19T12:05:03.170Z - GET /assets/index-CPDA1oy3.css
2025-12-19T12:05:03.513Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.247Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:05:05.255Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:05:05.257Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:05:05.287Z - GET /vite.svg
2025-12-19T12:05:05.318Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.324Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.325Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.325Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.327Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.328Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.331Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:05.418Z - GET /avatar.jpg
2025-12-19T12:05:07.384Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T12:05:09.567Z - PATCH /api/lms/records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:37.743Z - PATCH /api/lms/records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:40.150Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=1176e927-895b-4761-962c-c19454c6d8b8, date=Fri Dec 19 2025 12:04:38 GMT+0000 (Coordinated Universal Time)
2025-12-19T12:05:40.159Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:05:40.160Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:05:46.527Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T12:05:50.181Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:05:50.185Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:05:50.284Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.285Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.286Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.288Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.290Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.292Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.293Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:05:50.381Z - GET /avatar.jpg
2025-12-19T12:05:51.259Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T12:09:40.582Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:09:40.584Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:09:40.806Z - GET /avatar.jpg
2025-12-19T12:09:44.718Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T12:09:44.719Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:09:44.720Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=784457d5-2d5b-4846-a24b-ed3e83888cbf, date=Fri Dec 19 2025 12:05:43 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:09:45.799Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:09:45.800Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:09:45.879Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:45.880Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:45.880Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:45.881Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:45.882Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:45.883Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:45.887Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:46.235Z - GET /avatar.jpg
2025-12-19T12:09:47.035Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 00752949-2494-48e7-9211-c019e4fd5db4
2025-12-19T12:09:52.200Z - PATCH /api/lms/records/d81d673a-f1e0-4396-b73a-2563b549dd68/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/d81d673a-f1e0-4396-b73a-2563b549dd68/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:09:56.552Z - PATCH /api/lms/records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/batch/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [ROUTE_DEBUG] æ‰¹é‡æ›´æ–°è¯·æ±‚:
   - è¯·æ±‚ä½“: {
  "recordIds": [
    "b74cc5e0-09ff-4996-9f2a-3ac1415c789d",
    "d81d673a-f1e0-4396-b73a-2563b549dd68",
    "23602cab-3ef4-4a1a-b6c2-599ada3848db",
    "9969e8bf-4b5a-404a-a7f3-d1375fccbdc1",
    "ce040519-6472-4440-a7f5-961f9dffe56c",
    "e97fe64d-7cbd-4e62-bba7-531e92123771",
    "a15f3daa-1bbf-4b4f-9337-37a0111e03cf"
  ],
  "status": "COMPLETED"
}
   - recordIds: [
  'b74cc5e0-09ff-4996-9f2a-3ac1415c789d',
  'd81d673a-f1e0-4396-b73a-2563b549dd68',
  '23602cab-3ef4-4a1a-b6c2-599ada3848db',
  '9969e8bf-4b5a-404a-a7f3-d1375fccbdc1',
  'ce040519-6472-4440-a7f5-961f9dffe56c',
  'e97fe64d-7cbd-4e62-bba7-531e92123771',
  'a15f3daa-1bbf-4b4f-9337-37a0111e03cf'
]
   - status: COMPLETED
âœ… [ROUTE_DEBUG] ç”¨æˆ·ä¿¡æ¯: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  username: 'long'
}
ğŸš€ [ROUTE_DEBUG] å¼€å§‹è°ƒç”¨æœåŠ¡æ–¹æ³•
âœ… [ROUTE_DEBUG] æœåŠ¡æ–¹æ³•è°ƒç”¨æˆåŠŸ: { success: 7, failed: 0 }
2025-12-19T12:10:04.079Z - GET /avatar.jpg
2025-12-19T12:10:06.973Z - PATCH /api/lms/records/dd137ad1-0347-42ed-a276-24f49f705015/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/dd137ad1-0347-42ed-a276-24f49f705015/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:10:26.726Z - GET /
2025-12-19T12:12:11.617Z - GET /
2025-12-19T12:13:13.872Z - GET /qc
2025-12-19T12:13:14.175Z - GET /assets/index-BuvS4IkK.js
2025-12-19T12:13:14.185Z - GET /assets/index-CPDA1oy3.css
2025-12-19T12:13:14.494Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.055Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:13:16.056Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:13:16.057Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:13:16.080Z - GET /vite.svg
2025-12-19T12:13:16.107Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.108Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.112Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.113Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.114Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.115Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.116Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:16.200Z - GET /avatar.jpg
2025-12-19T12:13:16.601Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=784457d5-2d5b-4846-a24b-ed3e83888cbf, date=Fri Dec 19 2025 12:05:43 GMT+0000 (Coordinated Universal Time)
2025-12-19T12:13:16.608Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:13:16.616Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:13:22.230Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T12:13:25.209Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
2025-12-19T12:13:25.212Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:13:25.280Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.281Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.282Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.284Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.287Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.288Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.289Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:25.380Z - GET /avatar.jpg
2025-12-19T12:13:26.003Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T12:13:28.222Z - PATCH /api/lms/records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/bc311ec2-0860-45a7-acb2-3f861167d557/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:13:31.490Z - PATCH /api/lms/records/b36320c8-6784-465a-9645-d12925bea694/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b36320c8-6784-465a-9645-d12925bea694/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:33.330Z - GET /qc
2025-12-19T12:15:33.540Z - GET /assets/index-BuvS4IkK.js
2025-12-19T12:15:33.547Z - GET /assets/index-CPDA1oy3.css
2025-12-19T12:15:33.843Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.359Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:15:35.360Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.362Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:15:35.364Z - GET /vite.svg
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:15:35.480Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.481Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.482Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.483Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.484Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.486Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.487Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:15:35.606Z - GET /avatar.jpg
2025-12-19T12:19:57.500Z - GET /qc
2025-12-19T12:19:57.736Z - GET /assets/index-BuvS4IkK.js
2025-12-19T12:19:57.742Z - GET /assets/index-CPDA1oy3.css
2025-12-19T12:19:58.063Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.285Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:20:00.292Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:20:00.312Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T12:20:00.315Z - GET /vite.svg
2025-12-19T12:20:00.351Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.352Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.353Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.354Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.357Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.358Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.359Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:20:00.541Z - GET /avatar.jpg
2025-12-19T12:20:01.501Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:20:01.503Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:20:01.581Z - GET /avatar.jpg
2025-12-19T12:21:25.675Z - GET /
2025-12-19T12:21:26.024Z - GET /assets/index-BuvS4IkK.js
2025-12-19T12:21:26.037Z - GET /assets/index-CPDA1oy3.css
2025-12-19T12:21:26.325Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:21:28.083Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:21:28.084Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:21:28.086Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:21:28.087Z - GET /vite.svg
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:21:28.381Z - GET /avatar.jpg
2025-12-19T12:22:46.175Z - POST /api/auth/login
2025-12-19T12:22:47.348Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:22:47.352Z - GET /api/auth/me
ğŸ” [AUTH_MIDDLEWARE] Processing GET /me
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:22:47.380Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:22:47.382Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:22:47.387Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:22:47.393Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:22:47.437Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: {}
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: undefined,
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Default: querying students for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: undefined
2025-12-19T12:22:47.439Z - GET /api/students/classes
ğŸ” [AUTH_MIDDLEWARE] Processing GET /classes
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[TEACHER BINDING] âœ… Found 7 students for scope: undefined
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
Get student by id error: Error: å­¦ç”Ÿä¸å­˜åœ¨
    at StudentService.getStudentById (/home/devbox/project/arkok-v2/server/dist/services/student.service.js:122:19)
    at async StudentRoutes.getStudentById (/home/devbox/project/arkok-v2/server/dist/routes/student.routes.js:609:29)
2025-12-19T12:22:55.896Z - GET /api/personalized-tutoring
2025-12-19T12:22:55.896Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:22:55.897Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:22:55.898Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:22:55.904Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=24ffbf41-4366-4629-86a3-4cbbd98e5388, date=Fri Dec 19 2025 12:13:20 GMT+0000 (Coordinated Universal Time)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:22:55.912Z - GET /api/lms/latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Processing GET /latest-lesson-plan
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LATEST_LESSON_PLAN] è·å–æœ€æ–°æ•™å­¦è®¡åˆ’: schoolId=625e503b-aa7e-44fe-9982-237d828af717, userId=5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T12:22:55.914Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
âœ… [LATEST_LESSON_PLAN] æ‰¾åˆ°æœ€æ–°æ•™å­¦è®¡åˆ’: id=24ffbf41-4366-4629-86a3-4cbbd98e5388, date=Fri Dec 19 2025 12:13:20 GMT+0000 (Coordinated Universal Time)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:23:05.896Z - GET /api/personalized-tutoring
2025-12-19T12:23:10.356Z - POST /api/lms/publish
ğŸ” [AUTH_MIDDLEWARE] Processing POST /publish
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ”’ [LMS_SECURITY] Teacher 5ca64703-c978-4d01-bf44-a7568f34f556 is publishing tasks
ğŸ”’ [LMS_SECURITY] Publishing lesson plan: 12æœˆ19æ—¥ Â· æ˜ŸæœŸäº” å¤‡è¯¾è®¡åˆ’ for teacher 5ca64703-c978-4d01-bf44-a7568f34f556
2025-12-19T12:23:23.648Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
2025-12-19T12:23:23.650Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:23:23.655Z - GET /api/students
ğŸ” [AUTH_MIDDLEWARE] Processing GET /
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
--- [DEBUG] GET /api/students endpoint hit ---
Authenticated User: {
  userId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  username: 'long',
  name: 'é¾™è€å¸ˆ',
  displayName: 'é¾™è€å¸ˆ',
  email: null,
  role: 'TEACHER',
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  schoolName: 'æ˜Ÿé€”ä¸ä¼´',
  primaryClassName: 'å…­å¹´çº§1ç­'
}
School ID from user: 625e503b-aa7e-44fe-9982-237d828af717
Request query params: { scope: 'MY_STUDENTS', teacherId: '', userRole: 'TEACHER' }
[DEBUG] Query object sent to service: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  className: undefined,
  search: undefined,
  page: undefined,
  limit: undefined,
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER',
  requesterId: '5ca64703-c978-4d01-bf44-a7568f34f556'
}
[DEBUG] âœ… teacherId is present: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] Fetching students with query: {
  schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
  teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556',
  scope: 'MY_STUDENTS',
  userRole: 'TEACHER'
}
[DEBUG] ğŸ” Checking teacherId distribution before query...
[DEBUG] ğŸ“Š TeacherId distribution: {
  '64904b13-cbaa-40e5-86e9-6f608a51c45e': 39,
  '5ca64703-c978-4d01-bf44-a7568f34f556': 7
}
[DEBUG] ğŸ“Š Total students in DB: 46
[TEACHER BINDING] Querying MY_STUDENTS for teachers: 5ca64703-c978-4d01-bf44-a7568f34f556
[TEACHER BINDING] âš ï¸ No className filter provided - will return all students for scope: MY_STUDENTS
[TEACHER BINDING] âœ… Found 7 students for scope: MY_STUDENTS
[DEBUG] Service returned: {
  students: [
    {
      id: '1896c410-1a91-4281-ac02-797756c638cc',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å®å¯æ­†',
      className: null,
      level: 1,
      points: 6632,
      exp: 87,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.188Z,
      updatedAt: 2025-12-17T18:00:53.524Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'æ›¾æ¬£åª›',
      className: null,
      level: 1,
      points: 202,
      exp: 70,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.163Z,
      updatedAt: 2025-12-17T18:01:01.687Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '1dd13004-95e4-4643-947f-eac9e198f465',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å¾æ±‡æ´‹',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 5,
      exp: 22,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T00:38:55.178Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '14c6339d-7b8c-48c7-8695-f638375a6b3d',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '115',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T16:35:27.558Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '33a7f6cf-d714-498d-97d3-a2c15547cce7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: '33ã€‘ã€‘44',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T01:06:08.006Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '00752949-2494-48e7-9211-c019e4fd5db4',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'Serviceä¿®å¤æµ‹è¯•',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 0,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-12T17:35:10.820Z,
      updatedAt: 2025-12-16T05:34:23.644Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    },
    {
      id: '01137edf-b8ec-46a1-8196-d20268402df7',
      schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
      name: 'å“ˆå“ˆå“ˆ',
      className: 'å…­å¹´çº§1ç­',
      level: 1,
      points: 200,
      exp: 0,
      avatarUrl: null,
      isActive: true,
      createdAt: 2025-12-13T15:47:57.349Z,
      updatedAt: 2025-12-17T13:36:08.323Z,
      teamId: null,
      teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
    }
  ],
  pagination: { page: 1, limit: 7, total: 7, totalPages: 1 }
}
[DEBUG] Number of students in result: 7
[DEBUG] Students data preview: [
  {
    id: '1896c410-1a91-4281-ac02-797756c638cc',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'å®å¯æ­†',
    className: null,
    level: 1,
    points: 6632,
    exp: 87,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.188Z,
    updatedAt: 2025-12-17T18:00:53.524Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  },
  {
    id: '31895b6e-8fb0-4eb8-838c-3c0d3d71bbcb',
    schoolId: '625e503b-aa7e-44fe-9982-237d828af717',
    name: 'æ›¾æ¬£åª›',
    className: null,
    level: 1,
    points: 202,
    exp: 70,
    avatarUrl: null,
    isActive: true,
    createdAt: 2025-12-13T00:38:55.163Z,
    updatedAt: 2025-12-17T18:01:01.687Z,
    teamId: null,
    teacherId: '5ca64703-c978-4d01-bf44-a7568f34f556'
  }
]
[DEBUG] Response sent to frontend successfully
2025-12-19T12:23:23.661Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.662Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.663Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.664Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.665Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.668Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.679Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.680Z - GET /api/lms/task-library
ğŸ” [AUTH_MIDDLEWARE] Processing GET /task-library
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] å¼€å§‹è·å–ä»»åŠ¡åº“æ•°æ®...
2025-12-19T12:23:23.681Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.682Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.683Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
ğŸ” [LMS_SERVICE] ä»»åŠ¡åº“æ´»è·ƒä»»åŠ¡æ•°é‡: 82
2025-12-19T12:23:23.685Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.736Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.737Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
2025-12-19T12:23:23.738Z - GET /api/lms/daily-records
ğŸ” [AUTH_MIDDLEWARE] Processing GET /daily-records
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
âœ… [LMS_SERVICE] æˆåŠŸè·å–ä»»åŠ¡åº“ï¼Œä»»åŠ¡æ•°é‡: 82
2025-12-19T12:23:32.592Z - GET /api/lms/student-progress
ğŸ” [AUTH_MIDDLEWARE] Processing GET /student-progress
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
[LMS_PROGRESS] Calculating progress for student: 1896c410-1a91-4281-ac02-797756c638cc
2025-12-19T12:23:42.811Z - PATCH /api/lms/records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Processing PATCH /records/b279e733-e386-4247-9c5c-4113d4297d02/status
ğŸ” [AUTH_MIDDLEWARE] Token found: true, Length: 467
ğŸ” [AUTH_MIDDLEWARE] Token verification result: true
âœ… [AUTH_MIDDLEWARE] User authenticated: long (TEACHER)
