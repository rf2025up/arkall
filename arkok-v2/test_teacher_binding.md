# 师生绑定功能测试指南

## 🎯 测试目标
验证以下两个功能是否正常工作：
1. 老师账号全校视图下长按移入本班功能
2. 左上角显示"老师姓名+班级"，并且支持多老师班级切换

## 📋 测试步骤

### 1. 访问应用
打开浏览器，访问：http://localhost:3000

### 2. 登录测试
使用老师账号登录（如龙老师、李老师等）

### 3. 检查左上角显示
- **预期结果**：应该显示"{老师姓名}的班级"而不是"我的学生"
- **副标题**：应该显示"{老师姓名}老师，共X名学生"

### 4. 测试班级切换
1. 点击左上角的班级名称
2. **预期结果**：
   - 应该看到"{老师姓名}的班级"选项（已选中状态）
   - 应该看到"全校大名单"选项
   - 如果有其他老师，应该看到"其他老师姓名的班级"选项

### 5. 测试全校视图
1. 切换到"全校大名单"
2. **预期结果**：
   - 顶部显示"全校大名单"
   - 应该显示全校所有学生
   - 页面显示蓝色提示框："抢人功能"

### 6. 测试长按移入本班功能 ⭐
1. 在"全校大名单"视图中
2. 长按任意一个学生头像（600ms）
3. **预期结果**：
   - 应该弹出ActionSheet底部抽屉
   - 应该看到蓝色的"移入我的班级(X人)"按钮
   - 点击按钮应该成功将学生移入当前老师的班级
   - 操作成功后，学生应该从全校视图消失，出现在当前老师的班级中

## 🔍 调试信息查看

### 浏览器控制台日志
打开浏览器开发者工具，查看以下调试日志：
- `[FIX] ActionSheet handleTransferToMyClass called` - ActionSheet调用日志
- `[FIX] Home.tsx handleTransferStudents called` - 长按功能调用日志
- `[TEACHER BINDING] Fetching students with URL` - 学生数据获取日志
- `[TEACHER BINDING] Switched to view mode` - 视图切换日志

### 服务器端日志
在终端中查看：
- `[FIX] Using teacherId: xxx` - 使用的老师ID
- API调用成功/失败信息

## ⚠️ 常见问题

### 问题1：长按不弹出ActionSheet
**可能原因**：
- 长按时间不够（需要600ms）
- 学生被手指滑动（移动超过10px会取消长按）

**解决方案**：
- 稳定按压600ms以上
- 确保手指没有移动

### 问题2：ActionSheet中没有"移入我的班级"按钮
**可能原因**：
- 当前不是"全校大名单"视图
- 用户角色不是老师

**解决方案**：
- 切换到"全校大名单"视图
- 确认使用老师账号登录

### 问题3：左上角仍显示"我的学生"
**可能原因**：
- 用户信息没有正确加载
- 前端构建没有生效

**解决方案**：
- 硬刷新浏览器（Ctrl+F5）
- 检查浏览器控制台是否有错误

## ✅ 成功标准

1. ✅ 左上角显示"{老师姓名}的班级"
2. ✅ 班级切换中显示其他老师的班级选项
3. ✅ 全校视图中长按学生可以弹出"移入我的班级"按钮
4. ✅ 点击"移入我的班级"成功转移学生归属
5. ✅ 转移后学生在正确的地方显示

## 📞 如果测试失败

1. 记录具体的错误信息和步骤
2. 检查浏览器控制台日志
3. 检查服务器端日志
4. 提供截图或错误详情

---

**测试完成后，请更新此文档记录测试结果**