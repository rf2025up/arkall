# 过关页数据源修复计划

## 上下文
- **项目**: ArkOK V2 智慧教育平台
- **问题**: 过关页使用硬编码模拟数据，而非真实API数据
- **目标**: 将QCView的DEFAULT_TASK_DB替换为真实API调用

## 计划概述
采用**数据源替换方案**，最小化改动，保持现有UI和交互逻辑不变。

## 详细步骤

### 步骤1: 移除硬编码DEFAULT_TASK_DB
- 删除QCView.tsx第43-75行的硬编码数据
- 保留精简版降级数据

### 步骤2: 添加任务库状态管理
- 新增任务库相关状态变量
- 添加加载和错误状态

### 步骤3: 复制API调用逻辑
- 从PrepView.tsx复制fetchTaskLibrary函数
- 适配QCView的上下文

### 步骤4: 创建数据转换函数
- 将API响应转换为组件所需格式
- 确保与现有UI兼容

### 步骤5: 集成生命周期
- 在useEffect中添加任务库获取
- 与学生数据获取并行执行

### 步骤6: 添加降级处理
- API失败时使用降级数据
- 添加错误重试机制

## 预期结果
- 过关页显示真实任务数据
- 与备课页数据保持一致
- 保持所有现有功能正常

## 风险控制
- 每次修改后进行构建验证
- 确保TypeScript类型安全
- 保留降级安全保障