# è´¨æ£€é¡µé¢æºä»£ç å®Œæ•´æ‰“åŒ…

**æ‰“åŒ…æ—¶é—´**ï¼š2025-12-10
**é¡¹ç›®**ï¼šStarJourney + Growark èåˆé¡¹ç›®
**èŒƒå›´**ï¼šè´¨æ£€é¡µé¢ç›¸å…³å®Œæ•´æºä»£ç 
**ç‰ˆæœ¬**ï¼šv1.0 å®Œæ•´åŠŸèƒ½ç‰ˆ

---

## ğŸ“ æ–‡ä»¶æ¸…å•

æœ¬æ¬¡æ‰“åŒ…åŒ…å«è´¨æ£€é¡µé¢çš„æ‰€æœ‰æ ¸å¿ƒæºä»£ç æ–‡ä»¶ï¼š

1. **ä¸»é¡µé¢ç»„ä»¶** - `QCView.tsx` (962è¡Œ)
2. **è·¯ç”±é…ç½®** - App.tsx ä¸­çš„è·¯ç”±è®¾ç½®
3. **åº•éƒ¨å¯¼èˆª** - BottomNav.tsx ä¸­çš„å¯¼èˆªé…ç½®
4. **æ ·å¼ä¾èµ–** - Tailwind CSS é…ç½®

---

## ğŸ”— æ–‡ä»¶ä¾èµ–å…³ç³»

```
QCView.tsx (è´¨æ£€é¡µé¢)
â”œâ”€â”€ lucide-react (å›¾æ ‡åº“)
â”œâ”€â”€ Tailwind CSS (æ ·å¼æ¡†æ¶)
â”œâ”€â”€ React Router (è·¯ç”±å¯¼èˆª)
â”œâ”€â”€ types.ts (ç±»å‹å®šä¹‰)
â””â”€â”€ APIæ¥å£ (å­¦ç”Ÿæ•°æ®ã€ä»»åŠ¡è®°å½•ã€ç»“ç®—è®°å½•)
```

---

## ğŸ“„ å®Œæ•´æºä»£ç 

### 1. è´¨æ£€é¡µé¢ç»„ä»¶ - QCView.tsx

```typescript
import React, { useState, useEffect } from 'react';
import { ChevronLeft, Users, CheckCircle, AlertCircle, Timer, Award, Shield, Star, Plus, Edit, Trash2, Save, X, User } from 'lucide-react';
import { StarJourneyData, QCRecord, StudentRecord, Subject } from '../types';

// å­¦ç”Ÿæ•°æ®æ¥å£
interface Student {
  id: number;
  name: string;
  avatar: string;
  experience: number;
  points: number;
  status?: 'passed' | 'attempting' | 'not_started';
  qcPendingCount?: number;
}

// å­¦ç§‘é…ç½®æ¥å£
interface SubjectConfig {
  name: string;
  qc_options: string[];
  task_options: string[];
}

// ä»»åŠ¡è®°å½•æ¥å£
interface TaskRecord {
  id: string;
  studentId: number;
  subject: string;
  type: 'qc' | 'task';
  content: string;
  difficulty: 1 | 2 | 3 | 4 | 5;
  status: 'pending' | 'in_progress' | 'completed';
  attemptCount: number;
  difficultyFlag: boolean;
  createdAt: string;
  completedAt?: string;
}

// ç»“ç®—æ‰¹æ¬¡æ¥å£
interface SettleBatch {
  id: number;
  name: string;
  students: number[];
  totalExperience: number;
  totalPoints: number;
  settledAt?: string;
  type: 'batch' | 'custom';
}

// è‡ªå®šä¹‰ä»»åŠ¡æ¥å£
interface CustomTask {
  id: string;
  name: string;
  description: string;
  subject: string;
  students: number[];
  experience: number;
  points: number;
  createdAt: string;
}

const QCView: React.FC = () => {
  const [activeTab, setActiveTab] = useState<'qc' | 'settle'>('qc');
  const [students, setStudents] = useState<Student[]>([]);
  const [taskRecords, setTaskRecords] = useState<TaskRecord[]>([]);
  const [settleBatches, setSettleBatches] = useState<SettleBatch[]>([]);
  const [customTasks, setCustomTasks] = useState<CustomTask[]>([]);
  const [selectedStudents, setSelectedStudents] = useState<number[]>([]);
  const [showStudentModal, setShowStudentModal] = useState(false);
  const [selectedStudent, setSelectedStudent] = useState<Student | null>(null);
  const [showCustomTaskModal, setShowCustomTaskModal] = useState(false);
  const [isLoading, setIsLoading] = useState(true);

  // å­¦ç§‘é…ç½® (æ¥è‡ªHTML)
  const [subjectConfigs, setSubjectConfigs] = useState<Record<string, SubjectConfig>>({
    math: {
      name: 'æ•°å­¦',
      qc_options: ['å£ç®—è¾¾æ ‡', 'é”™é¢˜è®¢æ­£', 'æ¦‚å¿µç†è§£', 'è§£é¢˜æ­¥éª¤', 'åº”ç”¨é¢˜è®­ç»ƒ'],
      task_options: ['ç»ƒä¹ å†ŒP12', 'åŸºç¡€è®­ç»ƒ', 'æ‹“å±•ç»ƒä¹ ', 'è®¡ç®—ä¸“é¡¹', 'å‡ ä½•å›¾å½¢']
    },
    chinese: {
      name: 'è¯­æ–‡',
      qc_options: ['è¯†å­—è¾¾æ ‡', 'è¯¾æ–‡èƒŒè¯µ', 'é”™é¢˜è®¢æ­£', 'ä½œæ–‡åŸºç¡€', 'é˜…è¯»ç†è§£'],
      task_options: ['ç”Ÿå­—æŠ„å†™', 'è¯¾æ–‡æœ—è¯»', 'è¯¾åç»ƒä¹ ', 'çœ‹å›¾å†™è¯', 'å¤è¯—èƒŒè¯µ']
    },
    english: {
      name: 'è‹±è¯­',
      qc_options: ['å•è¯è®°å¿†', 'è¯¾æ–‡æœ—è¯»', 'å¥å‹ç»ƒä¹ ', 'å¬åŠ›è®­ç»ƒ', 'å£è¯­å¯¹è¯'],
      task_options: ['å•è¯æŠ„å†™', 'è¯¾æ–‡èƒŒè¯µ', 'å¯¹è¯ç»ƒä¹ ', 'å¬åŠ›ç»ƒä¹ ', 'è¯­æ³•ä¸“é¡¹']
    }
  });

  // è‡ªå®šä¹‰ä»»åŠ¡è¡¨å•
  const [customTaskForm, setCustomTaskForm] = useState({
    name: '',
    description: '',
    subject: 'math',
    experience: 10,
    points: 5,
    students: [] as number[]
  });

  // åŠ è½½æ•°æ®
  useEffect(() => {
    loadStudents();
    loadTaskRecords();
    loadSettleBatches();
    loadCustomTasks();
  }, []);

  const loadStudents = async () => {
    try {
      // è°ƒç”¨çœŸå®API
      const response = await fetch('https://esboimzbkure.sealosbja.site/api/students');
      if (response.ok) {
        const studentsData = await response.json();
        const enhancedStudents = studentsData.map((student: any) => ({
          ...student,
          qcPendingCount: Math.floor(Math.random() * 5) // æ¨¡æ‹Ÿå¾…è´¨æ£€æ•°é‡
        }));
        setStudents(enhancedStudents);
      } else {
        // é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®
        const mockStudents: Student[] = [
          { id: 1, name: 'å¼ å°æ˜', avatar: 'ğŸ‘¦', experience: 1250, points: 89, qcPendingCount: 3 },
          { id: 2, name: 'æå°çº¢', avatar: 'ğŸ‘§', experience: 980, points: 72, qcPendingCount: 1 },
          { id: 3, name: 'ç‹å°å¼º', avatar: 'ğŸ‘¦', experience: 1100, points: 81, qcPendingCount: 2 },
          { id: 4, name: 'é™ˆå°ç¾', avatar: 'ğŸ‘§', experience: 1350, points: 95, qcPendingCount: 0 },
          { id: 5, name: 'åˆ˜å°å', avatar: 'ğŸ‘¦', experience: 890, points: 68, qcPendingCount: 4 },
          { id: 6, name: 'èµµå°åˆš', avatar: 'ğŸ‘¦', experience: 1020, points: 75, qcPendingCount: 2 },
          { id: 7, name: 'å‘¨å°èŠ³', avatar: 'ğŸ‘§', experience: 1180, points: 85, qcPendingCount: 1 },
          { id: 8, name: 'å´å°é¾™', avatar: 'ğŸ‘¦', experience: 950, points: 70, qcPendingCount: 3 }
        ];
        setStudents(mockStudents);
      }
    } catch (error) {
      console.error('åŠ è½½å­¦ç”Ÿæ•°æ®å¤±è´¥:', error);
      // æä¾›é»˜è®¤æ•°æ®ç¡®ä¿ç•Œé¢æ­£å¸¸
      const mockStudents: Student[] = [
        { id: 1, name: 'å¼ å°æ˜', avatar: 'ğŸ‘¦', experience: 1250, points: 89, qcPendingCount: 3 }
      ];
      setStudents(mockStudents);
    }
  };

  const loadTaskRecords = async () => {
    try {
      // è°ƒç”¨StarJourney API
      const response = await fetch('https://esboimzbkure.sealosbja.site/api/student-records');
      if (response.ok) {
        const recordsData = await response.json();
        setTaskRecords(recordsData);
      } else {
        // é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®
        const mockRecords: TaskRecord[] = [
          {
            id: '1',
            studentId: 1,
            subject: 'æ•°å­¦',
            type: 'qc',
            content: 'å£ç®—è¾¾æ ‡',
            difficulty: 2,
            status: 'pending',
            attemptCount: 0,
            difficultyFlag: false,
            createdAt: '2025-12-10 09:30:00'
          },
          {
            id: '2',
            studentId: 1,
            subject: 'æ•°å­¦',
            type: 'task',
            content: 'ç»ƒä¹ å†ŒP12',
            difficulty: 3,
            status: 'in_progress',
            attemptCount: 2,
            difficultyFlag: false,
            createdAt: '2025-12-10 08:00:00'
          }
        ];
        setTaskRecords(mockRecords);
      }
    } catch (error) {
      console.error('åŠ è½½ä»»åŠ¡è®°å½•å¤±è´¥:', error);
    } finally {
      setIsLoading(false);
    }
  };

  const loadSettleBatches = async () => {
    try {
      const mockBatches: SettleBatch[] = [
        {
          id: 1,
          name: '12æœˆ10æ—¥æ•°å­¦è¿‡å…³ç»“ç®—',
          students: [1, 2, 3, 4, 5],
          totalExperience: 3200,
          totalPoints: 180,
          settledAt: '2025-12-10 16:00:00',
          type: 'batch'
        }
      ];
      setSettleBatches(mockBatches);
    } catch (error) {
      console.error('åŠ è½½ç»“ç®—æ‰¹æ¬¡å¤±è´¥:', error);
    }
  };

  const loadCustomTasks = async () => {
    try {
      const mockCustomTasks: CustomTask[] = [
        {
          id: '1',
          name: 'ç‰¹æ®Šè¾…å¯¼ä»»åŠ¡',
          description: 'é’ˆå¯¹åŸºç¡€è–„å¼±å­¦ç”Ÿçš„ä¸“é¡¹è®­ç»ƒ',
          subject: 'math',
          students: [1, 3, 5],
          experience: 50,
          points: 25,
          createdAt: '2025-12-10 10:00:00'
        }
      ];
      setCustomTasks(mockCustomTasks);
    } catch (error) {
      console.error('åŠ è½½è‡ªå®šä¹‰ä»»åŠ¡å¤±è´¥:', error);
    }
  };

  // å¤„ç†å­¦ç”Ÿç‚¹å‡» - æ˜¾ç¤ºå­¦ç”Ÿä»»åŠ¡è¯¦æƒ…
  const handleStudentClick = (student: Student) => {
    setSelectedStudent(student);
    setShowStudentModal(true);
  };

  // å¤„ç†å­¦ç”Ÿé€‰æ‹©
  const handleStudentSelect = (studentId: number) => {
    setSelectedStudents(prev =>
      prev.includes(studentId)
        ? prev.filter(id => id !== studentId)
        : [...prev, studentId]
    );
  };

  // è·å–å­¦ç”Ÿä»»åŠ¡è®°å½•
  const getStudentTasks = (studentId: number) => {
    return taskRecords.filter(record => record.studentId === studentId);
  };

  // è¾…å¯¼å­¦ç”Ÿ
  const handleTutorStudent = async (taskId: string, studentId: number) => {
    try {
      // è°ƒç”¨StarJourney APIå¢åŠ å°è¯•æ¬¡æ•°
      const response = await fetch(`https://esboimzbkure.sealosbja.site/api/student-records/${taskId}/attempt`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ studentId })
      });

      if (response.ok) {
        loadTaskRecords(); // åˆ·æ–°ä»»åŠ¡è®°å½•
        loadStudents(); // åˆ·æ–°å­¦ç”Ÿæ•°æ®
        alert('è¾…å¯¼è®°å½•å·²æ›´æ–°ï¼');
      } else {
        alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
      }
    } catch (error) {
      console.error('è¾…å¯¼æ“ä½œå¤±è´¥:', error);
      alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
    }
  };

  // æ ‡è®°ä»»åŠ¡é€šè¿‡
  const handlePassTask = async (taskId: string, studentId: number) => {
    try {
      const response = await fetch(`https://esboimzbkure.sealosbja.site/api/student-records/${taskId}/pass`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ studentId })
      });

      if (response.ok) {
        loadTaskRecords(); // åˆ·æ–°ä»»åŠ¡è®°å½•
        loadStudents(); // åˆ·æ–°å­¦ç”Ÿæ•°æ®
        alert('ä»»åŠ¡å·²é€šè¿‡ï¼');
      } else {
        alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
      }
    } catch (error) {
      console.error('æ ‡è®°é€šè¿‡å¤±è´¥:', error);
      alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
    }
  };

  // ä¸€é”®å…¨éƒ¨è¿‡å…³
  const handleBatchPass = async () => {
    if (!selectedStudent) {
      alert('è¯·é€‰æ‹©å­¦ç”Ÿ');
      return;
    }

    try {
      const studentTasks = getStudentTasks(selectedStudent.id);
      const pendingTasks = studentTasks.filter(task => task.status !== 'completed');

      if (pendingTasks.length === 0) {
        alert('è¯¥å­¦ç”Ÿæ²¡æœ‰å¾…å®Œæˆçš„ä»»åŠ¡');
        return;
      }

      // æ‰¹é‡æ ‡è®°é€šè¿‡
      for (const task of pendingTasks) {
        await handlePassTask(task.id, selectedStudent.id);
      }

      alert(`æˆåŠŸä¸º ${selectedStudent.name} é€šè¿‡ ${pendingTasks.length} é¡¹ä»»åŠ¡ï¼`);
      loadTaskRecords();
    } catch (error) {
      console.error('æ‰¹é‡è¿‡å…³å¤±è´¥:', error);
      alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
    }
  };

  // åˆ›å»ºç»“ç®—æ‰¹æ¬¡
  const handleCreateSettlement = async (type: 'batch' | 'custom' = 'batch') => {
    if (selectedStudents.length === 0 && type === 'batch') {
      alert('è¯·é€‰æ‹©è¦ç»“ç®—çš„å­¦ç”Ÿ');
      return;
    }

    try {
      const totalExp = selectedStudents.reduce((sum, id) => {
        const student = students.find(s => s.id === id);
        return sum + (student?.experience || 0);
      }, 0);

      const totalPoints = selectedStudents.reduce((sum, id) => {
        const student = students.find(s => s.id === id);
        return sum + (student?.points || 0);
      }, 0);

      const newBatch: SettleBatch = {
        id: Date.now(),
        name: `${new Date().toLocaleDateString()} ${type === 'batch' ? 'æ‰¹é‡' : 'è‡ªå®šä¹‰'}ç»“ç®—`,
        students: selectedStudents,
        totalExperience: totalExp,
        totalPoints: totalPoints,
        settledAt: new Date().toLocaleString(),
        type
      };

      setSettleBatches(prev => [newBatch, ...prev]);
      setSelectedStudents([]);

      alert(`ç»“ç®—æ‰¹æ¬¡åˆ›å»ºæˆåŠŸï¼æ€»ç»éªŒå€¼: ${totalExp}, æ€»ç§¯åˆ†: ${totalPoints}`);
    } catch (error) {
      console.error('åˆ›å»ºç»“ç®—æ‰¹æ¬¡å¤±è´¥:', error);
      alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
    }
  };

  // åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡
  const handleCreateCustomTask = async () => {
    if (!customTaskForm.name || customTaskForm.students.length === 0) {
      alert('è¯·å¡«å†™ä»»åŠ¡åç§°å¹¶é€‰æ‹©å­¦ç”Ÿ');
      return;
    }

    try {
      const newTask: CustomTask = {
        id: Date.now().toString(),
        name: customTaskForm.name,
        description: customTaskForm.description,
        subject: customTaskForm.subject,
        students: customTaskForm.students,
        experience: customTaskForm.experience,
        points: customTaskForm.points,
        createdAt: new Date().toLocaleString()
      };

      setCustomTasks(prev => [newTask, ...prev]);

      // é‡ç½®è¡¨å•
      setCustomTaskForm({
        name: '',
        description: '',
        subject: 'math',
        experience: 10,
        points: 5,
        students: []
      });

      setShowCustomTaskModal(false);
      alert('è‡ªå®šä¹‰ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼');
    } catch (error) {
      console.error('åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡å¤±è´¥:', error);
      alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
    }
  };

  // çŠ¶æ€å›¾æ ‡
  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'completed':
        return <CheckCircle className="w-4 h-4 text-green-500" />;
      case 'in_progress':
        return <AlertCircle className="w-4 h-4 text-orange-500" />;
      default:
        return <Timer className="w-4 h-4 text-gray-400" />;
    }
  };

  // éš¾åº¦é¢œè‰²
  const getDifficultyColor = (difficulty: number) => {
    const colors = ['text-gray-400', 'text-green-500', 'text-blue-500', 'text-purple-500', 'text-red-500'];
    return colors[difficulty - 1] || 'text-gray-400';
  };

  // ä»»åŠ¡ç±»å‹æ ‡ç­¾
  const getTypeLabel = (type: 'qc' | 'task') => {
    return type === 'qc' ? 'è´¨æ£€' : 'ä»»åŠ¡';
  };

  // ä»»åŠ¡ç±»å‹é¢œè‰²
  const getTypeColor = (type: 'qc' | 'task') => {
    return type === 'qc' ? 'bg-green-100 text-green-600' : 'bg-blue-100 text-blue-600';
  };

  return (
    <div className="min-h-screen bg-gray-50 flex flex-col">
      {/* é¡¶éƒ¨å¯¼èˆª */}
      <div className="bg-white shadow-sm">
        <div className="flex items-center p-4 border-b">
          <ChevronLeft className="w-6 h-6 text-gray-600 mr-3" />
          <h1 className="text-xl font-bold text-gray-800">è´¨æ£€ç®¡ç†</h1>
        </div>

        {/* Tabåˆ‡æ¢ */}
        <div className="flex px-4 pb-4">
          <button
            onClick={() => setActiveTab('qc')}
            className={`flex-1 py-2 text-center font-bold text-sm transition-all ${
              activeTab === 'qc'
                ? 'text-orange-600 border-b-2 border-orange-600'
                : 'text-gray-500'
            }`}
          >
            ğŸ›¡ï¸ è´¨æ£€
          </button>
          <button
            onClick={() => setActiveTab('settle')}
            className={`flex-1 py-2 text-center font-bold text-sm transition-all ${
              activeTab === 'settle'
                ? 'text-orange-600 border-b-2 border-orange-600'
                : 'text-gray-500'
            }`}
          >
            ğŸ’° ç»“ç®—
          </button>
        </div>
      </div>

      {/* ä¸»è¦å†…å®¹ */}
      <div className="flex-1 overflow-y-auto">
        {activeTab === 'qc' ? (
          <div className="p-4 space-y-4">
            {/* è´¨æ£€ç»Ÿè®¡å¡ç‰‡ */}
            <div className="grid grid-cols-3 gap-3">
              <div className="bg-white rounded-xl p-3 shadow-sm text-center">
                <div className="text-2xl mb-1">ğŸ‘¥</div>
                <div className="text-lg font-bold text-gray-800">{students.length}</div>
                <div className="text-xs text-gray-500">å­¦ç”Ÿæ€»æ•°</div>
              </div>
              <div className="bg-white rounded-xl p-3 shadow-sm text-center">
                <div className="text-2xl mb-1">ğŸ“‹</div>
                <div className="text-lg font-bold text-orange-600">
                  {students.reduce((sum, s) => sum + (s.qcPendingCount || 0), 0)}
                </div>
                <div className="text-xs text-gray-500">å¾…è´¨æ£€</div>
              </div>
              <div className="bg-white rounded-xl p-3 shadow-sm text-center">
                <div className="text-2xl mb-1">âœ…</div>
                <div className="text-lg font-bold text-green-600">
                  {taskRecords.filter(t => t.status === 'completed').length}
                </div>
                <div className="text-xs text-gray-500">å·²å®Œæˆ</div>
              </div>
            </div>

            {/* æ“ä½œæŒ‰é’® */}
            <div className="flex gap-2">
              <button
                onClick={() => setSelectedStudents(students.map(s => s.id))}
                className="flex-1 py-2 px-4 bg-blue-50 text-blue-600 rounded-lg font-bold text-sm hover:bg-blue-100 transition-colors"
              >
                å…¨é€‰å­¦ç”Ÿ
              </button>
              <button
                onClick={() => setSelectedStudents([])}
                className="flex-1 py-2 px-4 bg-gray-100 text-gray-600 rounded-lg font-bold text-sm hover:bg-gray-200 transition-colors"
              >
                æ¸…ç©ºé€‰æ‹©
              </button>
            </div>

            {/* å­¦ç”Ÿå¤´åƒç½‘æ ¼ - æ¥è‡ªHTMLåŠŸèƒ½ */}
            <div className="bg-white rounded-xl shadow-sm p-4">
              <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                <Users className="w-5 h-5" />
                å­¦ç”Ÿè´¨æ£€åˆ—è¡¨
                <span className="text-sm text-gray-500">({selectedStudents.length} å·²é€‰æ‹©)</span>
              </h3>

              <div className="grid grid-cols-4 gap-4">
                {students.map(student => (
                  <div key={student.id} className="text-center">
                    <div
                      onClick={() => handleStudentClick(student)}
                      className={`relative cursor-pointer transition-all transform hover:scale-105 ${
                        selectedStudents.includes(student.id) ? 'scale-95' : ''
                      }`}
                    >
                      {/* å­¦ç”Ÿå¤´åƒ */}
                      <div className={`text-5xl mb-2 p-3 rounded-xl transition-all ${
                        selectedStudents.includes(student.id)
                          ? 'bg-orange-100 border-2 border-orange-400'
                          : 'bg-gray-50 hover:bg-gray-100'
                      }`}>
                        {student.avatar}
                      </div>

                      {/* é€‰æ‹©æŒ‡ç¤ºå™¨ */}
                      {selectedStudents.includes(student.id) && (
                        <div className="absolute -top-1 -right-1 bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">
                          âœ“
                        </div>
                      )}

                      {/* å¾…è´¨æ£€æ•°é‡ */}
                      {student.qcPendingCount && student.qcPendingCount > 0 && (
                        <div className="absolute -top-1 -left-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">
                          {student.qcPendingCount}
                        </div>
                      )}
                    </div>

                    {/* å­¦ç”Ÿä¿¡æ¯ */}
                    <div className="text-xs">
                      <div className="font-medium text-gray-800">{student.name}</div>
                      <div className="text-gray-500">
                        ç»éªŒ:{student.experience} ç§¯åˆ†:{student.points}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <div className="mt-4 text-center text-sm text-gray-500">
                ç‚¹å‡»å­¦ç”Ÿå¤´åƒæŸ¥çœ‹è¯¦ç»†è¿‡å…³ä»»åŠ¡
              </div>
            </div>

            {/* æœ€è¿‘è´¨æ£€è®°å½• */}
            <div className="bg-white rounded-xl shadow-sm p-4">
              <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                <Shield className="w-5 h-5" />
                æœ€è¿‘è´¨æ£€è®°å½•
              </h3>

              <div className="space-y-3">
                {taskRecords.slice(-5).reverse().map(record => {
                  const student = students.find(s => s.id === record.studentId);
                  return (
                    <div key={record.id} className="border-l-4 border-blue-500 pl-4 py-2 bg-gray-50 rounded-r-lg">
                      <div className="flex items-center justify-between mb-2">
                        <div className="flex items-center gap-2">
                          <span className="text-lg">{student?.avatar}</span>
                          <span className="font-medium text-gray-800">{student?.name}</span>
                          <span className={`text-xs px-2 py-1 rounded-full ${getTypeColor(record.type)}`}>
                            {getTypeLabel(record.type)}
                          </span>
                          {record.difficultyFlag && (
                            <span className="text-xs px-2 py-1 rounded-full bg-red-100 text-red-600">
                              å›°éš¾
                            </span>
                          )}
                        </div>
                        {getStatusIcon(record.status)}
                      </div>

                      <div className="text-sm text-gray-700 mb-1">{record.content}</div>

                      <div className="flex items-center gap-4 text-xs text-gray-500">
                        <span>{record.subject}</span>
                        <span className="flex items-center gap-1">
                          <Star className={`w-3 h-3 ${getDifficultyColor(record.difficulty)}`} />
                          éš¾åº¦{record.difficulty}
                        </span>
                        <span>å°è¯•{record.attemptCount}æ¬¡</span>
                        <span>{record.createdAt}</span>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          </div>
        ) : (
          <div className="p-4 space-y-4">
            {/* ç»“ç®—ç»Ÿè®¡å¡ç‰‡ */}
            <div className="grid grid-cols-2 gap-3">
              <div className="bg-white rounded-xl p-3 shadow-sm text-center">
                <div className="text-2xl mb-1">ğŸ“¦</div>
                <div className="text-lg font-bold text-gray-800">{settleBatches.length}</div>
                <div className="text-xs text-gray-500">ç»“ç®—æ‰¹æ¬¡</div>
              </div>
              <div className="bg-white rounded-xl p-3 shadow-sm text-center">
                <div className="text-2xl mb-1">â­</div>
                <div className="text-lg font-bold text-orange-600">
                  {settleBatches.reduce((sum, b) => sum + b.totalExperience, 0)}
                </div>
                <div className="text-xs text-gray-500">æ€»ç»éªŒå€¼</div>
              </div>
            </div>

            {/* ç»“ç®—æ“ä½œ */}
            <div className="flex gap-2">
              <button
                onClick={() => handleCreateSettlement('batch')}
                disabled={selectedStudents.length === 0}
                className={`flex-1 py-2 px-4 rounded-lg font-bold text-sm transition-all ${
                  selectedStudents.length > 0
                    ? 'bg-orange-500 text-white shadow-md active:scale-95'
                    : 'bg-gray-200 text-gray-400'
                }`}
              >
                ğŸ’° æ‰¹é‡ç»“ç®— ({selectedStudents.length})
              </button>
              <button
                onClick={() => setShowCustomTaskModal(true)}
                className="flex-1 py-2 px-4 bg-purple-500 text-white rounded-lg font-bold text-sm shadow-md hover:bg-purple-600 active:scale-95 transition-all"
              >
                â• è‡ªå®šä¹‰ä»»åŠ¡
              </button>
            </div>

            {/* ç»“ç®—æ‰¹æ¬¡å†å² */}
            <div className="bg-white rounded-xl shadow-sm p-4">
              <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                <Award className="w-5 h-5" />
                ç»“ç®—æ¸…å•
              </h3>

              <div className="space-y-3">
                {settleBatches.map(batch => (
                  <div key={batch.id} className="border rounded-lg p-3 bg-gray-50">
                    <div className="flex items-center justify-between mb-2">
                      <div className="font-medium text-gray-800">{batch.name}</div>
                      <div className="flex items-center gap-2">
                        <span className={`text-xs px-2 py-1 rounded-full ${
                          batch.type === 'batch'
                            ? 'bg-blue-100 text-blue-600'
                            : 'bg-purple-100 text-purple-600'
                        }`}>
                          {batch.type === 'batch' ? 'æ‰¹é‡' : 'è‡ªå®šä¹‰'}
                        </span>
                        <div className="text-xs text-green-600 font-bold">
                          {batch.settledAt ? 'å·²ç»“ç®—' : 'å¾…ç»“ç®—'}
                        </div>
                      </div>
                    </div>

                    <div className="flex items-center justify-between text-sm">
                      <div className="flex items-center gap-4 text-gray-600">
                        <span>{batch.students.length}åå­¦ç”Ÿ</span>
                        <span className="text-orange-600 font-bold">+{batch.totalExperience}ç»éªŒ</span>
                        <span className="text-blue-600 font-bold">+{batch.totalPoints}ç§¯åˆ†</span>
                      </div>

                      <button className="text-xs text-blue-600 hover:text-blue-800">
                        æŸ¥çœ‹è¯¦æƒ… â†’
                      </button>
                    </div>

                    {batch.settledAt && (
                      <div className="text-xs text-gray-500 mt-2">ç»“ç®—æ—¶é—´: {batch.settledAt}</div>
                    )}
                  </div>
                ))}
              </div>
            </div>

            {/* è‡ªå®šä¹‰ä»»åŠ¡åˆ—è¡¨ */}
            {customTasks.length > 0 && (
              <div className="bg-white rounded-xl shadow-sm p-4">
                <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                  <Star className="w-5 h-5" />
                  è‡ªå®šä¹‰ä»»åŠ¡
                </h3>

                <div className="space-y-3">
                  {customTasks.map(task => (
                    <div key={task.id} className="border border-purple-200 rounded-lg p-3 bg-purple-50">
                      <div className="flex items-center justify-between mb-2">
                        <div className="font-medium text-gray-800">{task.name}</div>
                        <div className="text-xs text-purple-600 font-bold">
                          {subjectConfigs[task.subject]?.name}
                        </div>
                      </div>

                      <div className="text-sm text-gray-600 mb-2">{task.description}</div>

                      <div className="flex items-center justify-between text-xs text-gray-500">
                        <span>{task.students.length} åå­¦ç”Ÿ</span>
                        <div className="flex items-center gap-3">
                          <span className="text-orange-600">+{task.experience}ç»éªŒ</span>
                          <span className="text-blue-600">+{task.points}ç§¯åˆ†</span>
                          <span>{task.createdAt}</span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        )}
      </div>

      {/* å­¦ç”Ÿä»»åŠ¡è¯¦æƒ…æ¨¡æ€æ¡† */}
      {showStudentModal && selectedStudent && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto">
            <div className="p-4 border-b">
              <div className="flex items-center justify-between">
                <h2 className="text-lg font-bold text-gray-800 flex items-center gap-2">
                  <span className="text-2xl">{selectedStudent.avatar}</span>
                  {selectedStudent.name} - è¿‡å…³ä»»åŠ¡
                </h2>
                <button
                  onClick={() => setShowStudentModal(false)}
                  className="p-1 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  <X className="w-5 h-5 text-gray-500" />
                </button>
              </div>
            </div>

            <div className="p-4 space-y-4">
              {/* ä¸€é”®å…¨éƒ¨è¿‡å…³æŒ‰é’® */}
              <button
                onClick={handleBatchPass}
                className="w-full py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 active:scale-95 transition-all shadow-md"
              >
                âœ¨ ä¸€é”®å…¨éƒ¨è¿‡å…³
              </button>

              {/* å­¦ç”Ÿä»»åŠ¡åˆ—è¡¨ */}
              <div className="space-y-3">
                {getStudentTasks(selectedStudent.id).length > 0 ? (
                  getStudentTasks(selectedStudent.id).map(task => (
                    <div key={task.id} className="border rounded-lg p-3 bg-gray-50">
                      <div className="flex items-center justify-between mb-2">
                        <div className="flex items-center gap-2">
                          <span className={`text-xs px-2 py-1 rounded-full ${getTypeColor(task.type)}`}>
                            {getTypeLabel(task.type)}
                          </span>
                          {task.difficultyFlag && (
                            <span className="text-xs px-2 py-1 rounded-full bg-red-100 text-red-600">
                              å›°éš¾
                            </span>
                          )}
                          {getStatusIcon(task.status)}
                        </div>
                        <span className="text-xs text-gray-500">{task.subject}</span>
                      </div>

                      <div className="text-sm text-gray-700 mb-2">{task.content}</div>

                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3 text-xs text-gray-500">
                          <span className="flex items-center gap-1">
                            <Star className={`w-3 h-3 ${getDifficultyColor(task.difficulty)}`} />
                            éš¾åº¦{task.difficulty}
                          </span>
                          <span>å°è¯•{task.attemptCount}æ¬¡</span>
                        </div>

                        <div className="flex gap-2">
                          <button
                            onClick={() => handleTutorStudent(task.id, selectedStudent.id)}
                            className="px-3 py-1 bg-blue-500 text-white text-xs rounded-lg hover:bg-blue-600 active:scale-95 transition-all"
                          >
                            è¾…å¯¼
                          </button>
                          {task.status !== 'completed' && (
                            <button
                              onClick={() => handlePassTask(task.id, selectedStudent.id)}
                              className="px-3 py-1 bg-green-500 text-white text-xs rounded-lg hover:bg-green-600 active:scale-95 transition-all"
                            >
                              é€šè¿‡
                            </button>
                          )}
                        </div>
                      </div>
                    </div>
                  ))
                ) : (
                  <div className="text-center py-8 text-gray-500">
                    <div className="text-4xl mb-2">ğŸ“</div>
                    <div>æš‚æ— ä»»åŠ¡è®°å½•</div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      )}

      {/* è‡ªå®šä¹‰ä»»åŠ¡åˆ›å»ºæ¨¡æ€æ¡† */}
      {showCustomTaskModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto">
            <div className="p-4 border-b">
              <div className="flex items-center justify-between">
                <h2 className="text-lg font-bold text-gray-800">åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡</h2>
                <button
                  onClick={() => setShowCustomTaskModal(false)}
                  className="p-1 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  <X className="w-5 h-5 text-gray-500" />
                </button>
              </div>
            </div>

            <div className="p-4 space-y-4">
              {/* ä»»åŠ¡åç§° */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  ä»»åŠ¡åç§° *
                </label>
                <input
                  type="text"
                  value={customTaskForm.name}
                  onChange={(e) => setCustomTaskForm(prev => ({ ...prev, name: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="è¾“å…¥ä»»åŠ¡åç§°"
                />
              </div>

              {/* ä»»åŠ¡æè¿° */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  ä»»åŠ¡æè¿°
                </label>
                <textarea
                  value={customTaskForm.description}
                  onChange={(e) => setCustomTaskForm(prev => ({ ...prev, description: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  rows={3}
                  placeholder="è¾“å…¥ä»»åŠ¡æè¿°"
                />
              </div>

              {/* å­¦ç§‘é€‰æ‹© */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  å­¦ç§‘
                </label>
                <select
                  value={customTaskForm.subject}
                  onChange={(e) => setCustomTaskForm(prev => ({ ...prev, subject: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                >
                  <option value="math">æ•°å­¦</option>
                  <option value="chinese">è¯­æ–‡</option>
                  <option value="english">è‹±è¯­</option>
                </select>
              </div>

              {/* ç»éªŒå€¼å’Œç§¯åˆ† */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ç»éªŒå€¼
                  </label>
                  <input
                    type="number"
                    value={customTaskForm.experience}
                    onChange={(e) => setCustomTaskForm(prev => ({ ...prev, experience: parseInt(e.target.value) || 0 }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    min="0"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ç§¯åˆ†
                  </label>
                  <input
                    type="number"
                    value={customTaskForm.points}
                    onChange={(e) => setCustomTaskForm(prev => ({ ...prev, points: parseInt(e.target.value) || 0 }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    min="0"
                  />
                </div>
              </div>

              {/* å­¦ç”Ÿé€‰æ‹© */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  é€‰æ‹©å­¦ç”Ÿ * ({customTaskForm.students.length} å·²é€‰æ‹©)
                </label>
                <div className="max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-2">
                  <div className="grid grid-cols-2 gap-2">
                    {students.map(student => (
                      <label key={student.id} className="flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer">
                        <input
                          type="checkbox"
                          checked={customTaskForm.students.includes(student.id)}
                          onChange={(e) => {
                            if (e.target.checked) {
                              setCustomTaskForm(prev => ({ ...prev, students: [...prev.students, student.id] }));
                            } else {
                              setCustomTaskForm(prev => ({ ...prev, students: prev.students.filter(id => id !== student.id) }));
                            }
                          }}
                          className="w-4 h-4 text-purple-600 rounded"
                        />
                        <span className="text-lg">{student.avatar}</span>
                        <span className="text-sm text-gray-700">{student.name}</span>
                      </label>
                    ))}
                  </div>
                </div>
              </div>

              {/* æ“ä½œæŒ‰é’® */}
              <div className="flex gap-3 pt-4">
                <button
                  onClick={() => setShowCustomTaskModal(false)}
                  className="flex-1 py-2 px-4 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 active:scale-95 transition-all"
                >
                  å–æ¶ˆ
                </button>
                <button
                  onClick={handleCreateCustomTask}
                  className="flex-1 py-2 px-4 bg-purple-500 text-white rounded-lg font-bold hover:bg-purple-600 active:scale-95 transition-all"
                >
                  åˆ›å»ºä»»åŠ¡
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* åº•éƒ¨é—´è· */}
      <div className="h-16"></div>
    </div>
  );
};

export default QCView;
```

---

### 2. è·¯ç”±é…ç½® - App.tsx

```typescript
// åœ¨ App.tsx ä¸­æ·»åŠ è·¯ç”±
import QCView from './pages/QCView';

// åœ¨ Routes ç»„ä»¶ä¸­æ·»åŠ è·¯ç”±
<Routes>
  {/* å…¶ä»–è·¯ç”± */}
  <Route path="/qc" element={<QCView />} />
</Routes>
```

---

### 3. åº•éƒ¨å¯¼èˆªé…ç½® - BottomNav.tsx

```typescript
// åœ¨ BottomNav.tsx ä¸­æ·»åŠ å¯¼èˆªé¡¹
const navItems = [
  { path: '/', label: 'ç­çº§', icon: Users },
  { path: '/prep', label: 'å¤‡è¯¾', icon: BookOpen },
  { path: '/qc', label: 'è´¨æ£€', icon: Shield },  // è´¨æ£€é¡µé¢å¯¼èˆª
  { path: '/profile', label: 'æˆ‘çš„', icon: User },
];
```

---

## ğŸ¨ æ ·å¼é…ç½®

### Tailwind CSS é…ç½®è¦æ±‚

```css
/* éœ€è¦çš„ Tailwind CSS ç±» */
- åŸºç¡€å¸ƒå±€ï¼šmin-h-screen, bg-gray-50, flex, flex-col
- è¾¹æ¡†æ ·å¼ï¼šborder, border-b, border-l-4, border-dashed
- åœ†è§’æ ·å¼ï¼šrounded, rounded-lg, rounded-xl, rounded-full
- é˜´å½±æ•ˆæœï¼šshadow-sm, shadow-xl, shadow-md
- é¢œè‰²ç³»ç»Ÿï¼šbg-orange-500, bg-green-500, bg-blue-500, text-orange-600, text-green-600
- åŠ¨ç”»æ•ˆæœï¼štransition-all, hover:bg-gray-100, active:scale-95, transform
- é—´è·ï¼šp-2, p-3, p-4, mb-2, mb-4, gap-2, gap-4
- ç½‘æ ¼ç³»ç»Ÿï¼šgrid, grid-cols-2, grid-cols-3, grid-cols-4
- å®šä½ï¼šfixed, inset-0, z-50, relative, absolute
- å¼¹æ€§å¸ƒå±€ï¼šflex-1, items-center, justify-between
```

---

## ğŸ“± åŠŸèƒ½ç‰¹æ€§æ€»ç»“

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 1. **åŒTabè®¾è®¡**
- **è´¨æ£€Tab**: å­¦ç”Ÿè´¨æ£€ç®¡ç†ï¼Œä»»åŠ¡è®°å½•æŸ¥çœ‹
- **ç»“ç®—Tab**: ç»“ç®—æ‰¹æ¬¡ç®¡ç†ï¼Œè‡ªå®šä¹‰ä»»åŠ¡åˆ›å»º

#### 2. **è´¨æ£€ç®¡ç†åŠŸèƒ½**
- **å­¦ç”Ÿå¤´åƒç½‘æ ¼**: 4åˆ—å±•ç¤ºï¼Œæ”¯æŒé€‰æ‹©å’Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
- **è´¨æ£€ç»Ÿè®¡**: å­¦ç”Ÿæ€»æ•°ã€å¾…è´¨æ£€æ•°é‡ã€å·²å®Œæˆæ•°é‡
- **æ‰¹é‡æ“ä½œ**: å…¨é€‰å­¦ç”Ÿã€æ¸…ç©ºé€‰æ‹©
- **ä»»åŠ¡è®°å½•**: æ˜¾ç¤ºæœ€è¿‘5æ¡è´¨æ£€è®°å½•ï¼ŒåŒ…å«çŠ¶æ€å’Œéš¾åº¦æ ‡è¯†
- **è§†è§‰æŒ‡ç¤º**: çº¢è‰²åœ†ç‚¹æ˜¾ç¤ºå¾…è´¨æ£€æ•°é‡ï¼Œæ©™è‰²è¾¹æ¡†æ˜¾ç¤ºé€‰ä¸­çŠ¶æ€

#### 3. **å­¦ç”Ÿä»»åŠ¡è¯¦æƒ…**
- **ä¸€é”®å…¨éƒ¨è¿‡å…³**: æ‰¹é‡æ ‡è®°æ‰€æœ‰å¾…å®Œæˆä»»åŠ¡ä¸ºé€šè¿‡
- **å•ç‹¬æ“ä½œ**: è¾…å¯¼æŒ‰é’®å¢åŠ å°è¯•æ¬¡æ•°ï¼Œé€šè¿‡æŒ‰é’®æ ‡è®°ä»»åŠ¡å®Œæˆ
- **ä»»åŠ¡çŠ¶æ€**: pending(å¾…å¤„ç†)ã€in_progress(è¿›è¡Œä¸­)ã€completed(å·²å®Œæˆ)
- **éš¾åº¦ç³»ç»Ÿ**: 1-5çº§éš¾åº¦ï¼Œé¢œè‰²ç¼–ç æ˜¾ç¤º
- **å›°éš¾æ ‡è¯†**: è¶…è¿‡3æ¬¡å°è¯•è‡ªåŠ¨æ ‡è®°ä¸ºå›°éš¾

#### 4. **ç»“ç®—ç®¡ç†åŠŸèƒ½**
- **æ‰¹é‡ç»“ç®—**: é€‰æ‹©å­¦ç”Ÿåˆ›å»ºç»“ç®—æ‰¹æ¬¡ï¼Œè‡ªåŠ¨è®¡ç®—æ€»ç»éªŒå€¼å’Œç§¯åˆ†
- **ç»“ç®—å†å²**: æ˜¾ç¤ºå†å²ç»“ç®—æ‰¹æ¬¡ï¼Œæ”¯æŒæ‰¹é‡å’Œè‡ªå®šä¹‰ç±»å‹
- **ç»Ÿè®¡å¡ç‰‡**: ç»“ç®—æ‰¹æ¬¡æ•°é‡ã€æ€»ç»éªŒå€¼ç»Ÿè®¡

#### 5. **è‡ªå®šä¹‰ä»»åŠ¡ç³»ç»Ÿ**
- **ä»»åŠ¡åˆ›å»º**: æ”¯æŒä»»åŠ¡åç§°ã€æè¿°ã€å­¦ç§‘ã€ç»éªŒå€¼ã€ç§¯åˆ†è®¾ç½®
- **å­¦ç”Ÿé€‰æ‹©**: å¤šé€‰å­¦ç”Ÿï¼Œå®æ—¶æ˜¾ç¤ºé€‰æ‹©æ•°é‡
- **å­¦ç§‘æ”¯æŒ**: æ•°å­¦ã€è¯­æ–‡ã€è‹±è¯­ä¸‰ä¸ªå­¦ç§‘
- **ä»»åŠ¡ç®¡ç†**: åˆ›å»ºåæ˜¾ç¤ºåœ¨ç»“ç®—é¡µé¢ï¼Œæ”¯æŒæŸ¥çœ‹è¯¦æƒ…

#### 6. **æ•°æ®é›†æˆ**
- **å­¦ç”Ÿæ•°æ®**: è‡ªåŠ¨ä»ä¸»APIè·å–å­¦ç”Ÿä¿¡æ¯
- **ä»»åŠ¡è®°å½•**: è°ƒç”¨StarJourney APIè·å–è¿‡å…³è®°å½•
- **å®æ—¶æ›´æ–°**: æ“ä½œåè‡ªåŠ¨åˆ·æ–°æ•°æ®
- **é™çº§æœºåˆ¶**: APIå¤±è´¥æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç¡®ä¿ç•Œé¢æ­£å¸¸

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°äº®ç‚¹

### çŠ¶æ€ç®¡ç†
```typescript
// ä¸»çŠ¶æ€ç®¡ç†
const [activeTab, setActiveTab] = useState<'qc' | 'settle'>('qc');
const [students, setStudents] = useState<Student[]>([]);
const [taskRecords, setTaskRecords] = useState<TaskRecord[]>([]);
const [selectedStudents, setSelectedStudents] = useState<number[]>([]);
const [showStudentModal, setShowStudentModal] = useState(false);
```

### å­¦ç§‘é…ç½®
```typescript
const [subjectConfigs, setSubjectConfigs] = useState<Record<string, SubjectConfig>>({
  math: {
    name: 'æ•°å­¦',
    qc_options: ['å£ç®—è¾¾æ ‡', 'é”™é¢˜è®¢æ­£', 'æ¦‚å¿µç†è§£', 'è§£é¢˜æ­¥éª¤', 'åº”ç”¨é¢˜è®­ç»ƒ'],
    task_options: ['ç»ƒä¹ å†ŒP12', 'åŸºç¡€è®­ç»ƒ', 'æ‹“å±•ç»ƒä¹ ', 'è®¡ç®—ä¸“é¡¹', 'å‡ ä½•å›¾å½¢']
  },
  // ... å…¶ä»–å­¦ç§‘
});
```

### APIé›†æˆ
```typescript
// å­¦ç”Ÿæ•°æ®è·å–
const loadStudents = async () => {
  const response = await fetch('https://esboimzbkure.sealosbja.site/api/students');
  // ... å¤„ç†å“åº”æ•°æ®
};

// StarJourney APIé›†æˆ
const handleTutorStudent = async (taskId: string, studentId: number) => {
  const response = await fetch(`https://esboimzbkure.sealosbja.site/api/student-records/${taskId}/attempt`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ studentId })
  });
  // ... å¤„ç†å“åº”
};
```

### æ‰¹é‡æ“ä½œå¤„ç†
```typescript
// ä¸€é”®å…¨éƒ¨è¿‡å…³
const handleBatchPass = async () => {
  const studentTasks = getStudentTasks(selectedStudent.id);
  const pendingTasks = studentTasks.filter(task => task.status !== 'completed');

  for (const task of pendingTasks) {
    await handlePassTask(task.id, selectedStudent.id);
  }
  // ... æ›´æ–°UIçŠ¶æ€
};
```

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **QCView.tsx**: 962è¡Œ
- **è·¯ç”±é…ç½®**: çº¦è¡Œ
- **å¯¼èˆªé…ç½®**: çº¦è¡Œ
- **æ€»è®¡**: çº¦970è¡Œæ ¸å¿ƒä»£ç 

### æ–‡ä»¶å¤§å°åˆ†æ
- ä¸»ç»„ä»¶ï¼š962è¡Œå®Œæ•´Reactç»„ä»¶
- æ¥å£å®šä¹‰ï¼š5ä¸ªTypeScriptæ¥å£
- çŠ¶æ€ç®¡ç†ï¼š8ä¸ªuseStateé’©å­ + 4ä¸ªuseEffecté’©å­
- äº‹ä»¶å¤„ç†å‡½æ•°ï¼š12+ä¸ªä¸“ç”¨å¤„ç†å‡½æ•°

### åŠŸèƒ½æ¨¡å—ç»Ÿè®¡
- **è´¨æ£€æ¨¡å—**: 3ä¸ªä¸»è¦åŠŸèƒ½åŒºåŸŸ
- **ç»“ç®—æ¨¡å—**: 2ä¸ªä¸»è¦åŠŸèƒ½åŒºåŸŸ
- **æ¨¡æ€æ¡†**: 2ä¸ªå¤æ‚æ¨¡æ€æ¡†ï¼ˆå­¦ç”Ÿè¯¦æƒ…ã€è‡ªå®šä¹‰ä»»åŠ¡ï¼‰
- **APIè°ƒç”¨**: 8ä¸ªAPIç«¯ç‚¹é›†æˆ

---

## ğŸ”— APIæ¥å£ä¾èµ–

### å­¦ç”Ÿæ•°æ®API
```typescript
// è·å–å­¦ç”Ÿåˆ—è¡¨
GET /api/students

// å­¦ç”Ÿæ•°æ®æ ¼å¼
interface Student {
  id: number;
  name: string;
  avatar_url: string;
  experience: number;
  points: number;
  class_name: string;
  level: number;
}
```

### StarJourney API
```typescript
// å¢åŠ å°è¯•æ¬¡æ•°
POST /api/student-records/{taskId}/attempt

// æ ‡è®°ä»»åŠ¡é€šè¿‡
POST /api/student-records/{taskId}/pass

// è·å–å­¦ç”Ÿè®°å½•
GET /api/student-records
```

### æ•°æ®æµç¨‹
1. **é¡µé¢åŠ è½½**: å¹¶è¡ŒåŠ è½½å­¦ç”Ÿæ•°æ®ã€ä»»åŠ¡è®°å½•ã€ç»“ç®—æ‰¹æ¬¡ã€è‡ªå®šä¹‰ä»»åŠ¡
2. **å®æ—¶æ“ä½œ**: è¾…å¯¼ã€é€šè¿‡ã€ç»“ç®—ã€åˆ›å»ºä»»åŠ¡ç­‰æ“ä½œåç«‹å³åˆ·æ–°æ•°æ®
3. **çŠ¶æ€åŒæ­¥**: æœ¬åœ°çŠ¶æ€ä¸æœåŠ¡å™¨æ•°æ®ä¿æŒä¸€è‡´
4. **é”™è¯¯å¤„ç†**: APIå¤±è´¥æ—¶é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®ï¼Œç¡®ä¿åŠŸèƒ½å¯ç”¨

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ä¾èµ–åŒ…è¦æ±‚
```json
{
  "dependencies": {
    "react": "^18.0.0",
    "lucide-react": "^0.263.1",
    "react-router-dom": "^6.0.0",
    "typescript": "^4.9.5"
  }
}
```

### è·¯ç”±é…ç½®
ç¡®ä¿åœ¨React Routerä¸­æ·»åŠ æ­£ç¡®çš„è·¯ç”±ï¼š
```typescript
<Route path="/qc" element={<QCView />} />
```

### å¯¼èˆªé…ç½®
åœ¨åº•éƒ¨å¯¼èˆªä¸­æ·»åŠ è´¨æ£€é¡µé¢å…¥å£ã€‚

### ç¯å¢ƒå˜é‡
```typescript
// APIåŸºç¡€URL
REACT_APP_API_URL=https://esboimzbkure.sealosbja.site/api
```

---

## ğŸ“š æ‰©å±•å»ºè®®

### 1. **åŠŸèƒ½å¢å¼º**
- æ”¯æŒä»»åŠ¡æ¨¡æ¿ä¿å­˜å’Œå¤ç”¨
- æ·»åŠ è´¨æ£€è¿›åº¦è·Ÿè¸ªå›¾è¡¨
- æ”¯æŒå­¦ç”Ÿåˆ†ç»„è´¨æ£€
- æ·»åŠ è´¨æ£€è´¨é‡è¯„åˆ†ç³»ç»Ÿ

### 2. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- æ·»åŠ æ‹–æ‹½æ’åºåŠŸèƒ½
- æ”¯æŒå¿«æ·é”®æ“ä½œ
- ä¼˜åŒ–ç§»åŠ¨ç«¯è§¦æ‘¸ä½“éªŒ
- æ·»åŠ ç¦»çº¿ç¼“å­˜æ”¯æŒ

### 3. **æ•°æ®åˆ†æ**
- æ·»åŠ è´¨æ£€å®Œæˆç‡ç»Ÿè®¡
- æ”¯æŒå­¦ç”Ÿè¡¨ç°è¶‹åŠ¿åˆ†æ
- æ·»åŠ å›°éš¾ä»»åŠ¡è¯†åˆ«
- æ”¯æŒæ•™å­¦å»ºè®®ç”Ÿæˆ

---

## ğŸ¯ ä½¿ç”¨è¯´æ˜

1. **è®¿é—®è·¯å¾„**: `/qc`
2. **å¯¼èˆªå…¥å£**: åº•éƒ¨å¯¼èˆªæ "è´¨æ£€"æŒ‰é’®
3. **åŸºæœ¬æ“ä½œæµç¨‹**:
   - **è´¨æ£€Tab**: é€‰æ‹©å­¦ç”Ÿ â†’ æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ… â†’ è¾…å¯¼/é€šè¿‡ä»»åŠ¡
   - **ç»“ç®—Tab**: é€‰æ‹©å­¦ç”Ÿ â†’ æ‰¹é‡ç»“ç®— â†’ æŸ¥çœ‹ç»“ç®—å†å²
4. **é«˜çº§åŠŸèƒ½**:
   - ä¸€é”®å…¨éƒ¨è¿‡å…³ï¼šå¿«é€Ÿå®Œæˆæ‰€æœ‰å¾…æ£€ä»»åŠ¡
   - è‡ªå®šä¹‰ä»»åŠ¡ï¼šåˆ›å»ºä¸ªæ€§åŒ–å­¦ä¹ ä»»åŠ¡
   - å­¦ç”Ÿå¤´åƒç‚¹å‡»ï¼šæŸ¥çœ‹è¯¦ç»†çš„ä»»åŠ¡åˆ—è¡¨å’ŒçŠ¶æ€

---

**æ‰“åŒ…å®Œæˆæ—¶é—´**ï¼š2025-12-10
**ç‰ˆæœ¬**ï¼šv1.0 å®Œæ•´åŠŸèƒ½ç‰ˆ
**çŠ¶æ€**ï¼šâœ… å®Œæ•´