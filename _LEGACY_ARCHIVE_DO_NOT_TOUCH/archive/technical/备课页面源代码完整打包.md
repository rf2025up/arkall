# å¤‡è¯¾é¡µé¢æºä»£ç å®Œæ•´æ‰“åŒ…

**æ‰“åŒ…æ—¶é—´**ï¼š2025-12-10
**é¡¹ç›®**ï¼šStarJourney + Growark èåˆé¡¹ç›®
**èŒƒå›´**ï¼šå¤‡è¯¾é¡µé¢ç›¸å…³å®Œæ•´æºä»£ç 
**ç‰ˆæœ¬**ï¼šv1.0 å®Œæ•´åŠŸèƒ½ç‰ˆ

---

## ğŸ“ æ–‡ä»¶æ¸…å•

æœ¬æ¬¡æ‰“åŒ…åŒ…å«å¤‡è¯¾é¡µé¢çš„æ‰€æœ‰æ ¸å¿ƒæºä»£ç æ–‡ä»¶ï¼š

1. **ä¸»é¡µé¢ç»„ä»¶** - `PrepView.tsx` (592è¡Œ)
2. **è·¯ç”±é…ç½®** - App.tsx ä¸­çš„è·¯ç”±è®¾ç½®
3. **åº•éƒ¨å¯¼èˆª** - BottomNav.tsx ä¸­çš„å¯¼èˆªé…ç½®
4. **æ ·å¼ä¾èµ–** - Tailwind CSS é…ç½®

---

## ğŸ”— æ–‡ä»¶ä¾èµ–å…³ç³»

```
PrepView.tsx (å¤‡è¯¾é¡µé¢)
â”œâ”€â”€ lucide-react (å›¾æ ‡åº“)
â”œâ”€â”€ Tailwind CSS (æ ·å¼æ¡†æ¶)
â”œâ”€â”€ React Router (è·¯ç”±å¯¼èˆª)
â””â”€â”€ APIæ¥å£ (å­¦ç”Ÿæ•°æ®è·å–)
```

---

## ğŸ“„ å®Œæ•´æºä»£ç 

### 1. å¤‡è¯¾é¡µé¢ç»„ä»¶ - PrepView.tsx

```typescript
import React, { useState, useEffect } from 'react';
import { ChevronLeft, Plus, X, Check, BookOpen, Users, Clock, Settings } from 'lucide-react';

// åŸºäº starè¿‡å…³ä¸ä»»åŠ¡å‘å¸ƒ.html çš„å®Œæ•´åŠŸèƒ½è®¾è®¡

interface LessonInput {
  unit: string;
  lesson: string;
  title: string;
}

interface SubjectConfig {
  qc_options: string[];
  task_options: string[];
  selected_qc: string[];
  selected_task: string[];
  inputs: LessonInput;
}

interface SpecialTask {
  id: string;
  students: string[];
  tasks: string[];
  description: string;
  expValue: number;
  isSpecial: boolean;
}

interface Student {
  id: string;
  name: string;
  avatar: string;
  className: string;
  points: number;
  exp: number;
  level: number;
}

const PrepView: React.FC = () => {
  const [currentSubject, setCurrentSubject] = useState<'math' | 'chinese' | 'english'>('math');
  const [students, setStudents] = useState<Student[]>([]);
  const [isPublished, setIsPublished] = useState(false);
  const [specialHistory, setSpecialHistory] = useState<string[]>([]);
  const [specialTasks, setSpecialTasks] = useState<SpecialTask[]>([]);

  // å¼¹çª—çŠ¶æ€
  const [isSelectorOpen, setIsSelectorOpen] = useState(false);
  const [isSpecialModalOpen, setIsSpecialModalOpen] = useState(false);
  const [selectorType, setSelectorType] = useState<'QC' | 'TASK'>('QC');
  const [selectedStudentsForSpecial, setSelectedStudentsForSpecial] = useState<string[]>([]);
  const [newItemInput, setNewItemInput] = useState('');
  const [newSpecialInput, setNewSpecialInput] = useState('');

  // å­¦ç§‘é…ç½®æ•°æ®åº“ (åŸºäºHTML)
  const [SUBJECT_DB, setSubjectDB] = useState<Record<string, SubjectConfig>>({
    math: {
      qc_options: ['å£ç®—è¾¾æ ‡', 'é”™é¢˜è®¢æ­£', 'æ¦‚å¿µç†è§£', 'è§£é¢˜æ­¥éª¤', 'åº”ç”¨é¢˜è®­ç»ƒ'],
      task_options: ['ç»ƒä¹ å†ŒP12', 'åŸºç¡€è®­ç»ƒ', 'æ‹“å±•ç»ƒä¹ ', 'è®¡ç®—ä¸“é¡¹', 'å‡ ä½•å›¾å½¢'],
      selected_qc: ['å£ç®—è¾¾æ ‡', 'é”™é¢˜è®¢æ­£'],
      selected_task: ['ç»ƒä¹ å†ŒP12'],
      inputs: { unit: '3', lesson: '2', title: 'å¤šä½æ•°ä¹˜æ³•' }
    },
    chinese: {
      qc_options: ['èƒŒè¯µå…¨æ–‡', 'ç”Ÿå­—é»˜å†™', 'è¯—æ„ç†è§£', 'è¯è¯­è§£é‡Š', 'ä½œæ–‡è¡¨è¾¾'],
      task_options: ['è¯¾åç»ƒä¹ ', 'æ‹“å±•é˜…è¯»', 'å†™ä½œè®­ç»ƒ', 'å¤è¯—æ–‡è¯µè¯»', 'å­—è¯ç§¯ç´¯'],
      selected_qc: ['èƒŒè¯µå…¨æ–‡', 'ç”Ÿå­—é»˜å†™'],
      selected_task: ['è¯¾åç»ƒä¹ '],
      inputs: { unit: '3', lesson: '2', title: 'èµ°æœˆäº®' }
    },
    english: {
      qc_options: ['å•è¯èƒŒè¯µ', 'å¥å‹ç»ƒä¹ ', 'å¯¹è¯è¡¨æ¼”', 'å¬åŠ›ç†è§£', 'è¯­æ³•åº”ç”¨'],
      task_options: ['å¬åŠ›è®­ç»ƒ', 'å£è¯­ç»ƒä¹ ', 'é˜…è¯»ç†è§£', 'å†™ä½œç»ƒä¹ ', 'è¯æ±‡æ‹“å±•'],
      selected_qc: ['å•è¯èƒŒè¯µ', 'å¥å‹ç»ƒä¹ '],
      selected_task: ['å¬åŠ›è®­ç»ƒ'],
      inputs: { unit: '2', lesson: '1', title: 'Unit 2 Hello World' }
    }
  });

  const currentConfig = SUBJECT_DB[currentSubject];

  // è·å–å­¦ç”Ÿæ•°æ®
  useEffect(() => {
    const fetchStudents = async () => {
      try {
        const protocol = window.location.protocol;
        const host = window.location.host;
        const apiUrl = `${protocol}//${host}/api`;

        const response = await fetch(`${apiUrl}/students`);
        if (response.ok) {
          const data = await response.json();
          if (data.success && data.data) {
            setStudents(data.data.map((s: any) => ({
              id: String(s.id),
              name: s.name,
              avatar: s.avatar_url || `https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(s.name)}`,
              className: s.class_name || 'æœªåˆ†ç­',
              points: s.score || 0,
              exp: s.total_exp || 0,
              level: s.level || 1
            })));
          }
        }
      } catch (error) {
        console.error('Error fetching students:', error);
      }
    };

    fetchStudents();
  }, []);

  // è·å–è¯¾æ—¶å­—ç¬¦ä¸²
  const getLessonStr = (data: LessonInput) => {
    if (currentSubject === 'english') {
      return `Unit ${data.unit} ${data.title}`;
    }
    return `ç¬¬${data.unit}${currentSubject === 'math' ? 'ç« ' : 'å•å…ƒ'} ç¬¬${data.lesson}${currentSubject === 'math' ? 'èŠ‚' : 'è¯¾'} ${data.title}`;
  };

  // å¤„ç†è¾“å…¥å˜æ›´
  const handleInputChange = (field: keyof LessonInput, value: string) => {
    setSubjectDB(prev => ({
      ...prev,
      [currentSubject]: {
        ...prev[currentSubject],
        inputs: {
          ...prev[currentSubject].inputs,
          [field]: value
        }
      }
    }));
  };

  // æ‰“å¼€é€‰æ‹©å™¨
  const openSelector = (type: 'QC' | 'TASK') => {
    setSelectorType(type);
    setIsSelectorOpen(true);
  };

  // å…³é—­é€‰æ‹©å™¨
  const closeSelector = () => {
    setIsSelectorOpen(false);
  };

  // åˆ‡æ¢é€‰æ‹©é¡¹
  const toggleSelectOpt = (option: string) => {
    const data = SUBJECT_DB[currentSubject];
    const selectedList = selectorType === 'QC' ? data.selected_qc : data.selected_task;

    if (selectedList.includes(option)) {
      // ç§»é™¤é€‰æ‹©
      const newList = selectedList.filter(item => item !== option);
      setSubjectDB(prev => ({
        ...prev,
        [currentSubject]: {
          ...prev[currentSubject],
          [selectorType === 'QC' ? 'selected_qc' : 'selected_task']: newList
        }
      }));
    } else {
      // æ·»åŠ é€‰æ‹©
      const newList = [...selectedList, option];
      setSubjectDB(prev => ({
        ...prev,
        [currentSubject]: {
          ...prev[currentSubject],
          [selectorType === 'QC' ? 'selected_qc' : 'selected_task']: newList
        }
      }));
    }
  };

  // æ·»åŠ æ–°é€‰é¡¹
  const addNewItem = () => {
    if (!newItemInput.trim()) return;

    setSubjectDB(prev => {
      const data = prev[currentSubject];
      const options = selectorType === 'QC' ? data.qc_options : data.task_options;
      const selected = selectorType === 'QC' ? data.selected_qc : data.selected_task;

      return {
        ...prev,
        [currentSubject]: {
          ...data,
          [selectorType === 'QC' ? 'qc_options' : 'task_options']: [...options, newItemInput.trim()],
          [selectorType === 'QC' ? 'selected_qc' : 'selected_task']: [...selected, newItemInput.trim()]
        }
      };
    });

    setNewItemInput('');
  };

  // æ˜¾ç¤ºä¸ªæ€§åŒ–å¼¹çª—
  const showSpecialModal = () => {
    setIsSpecialModalOpen(true);
  };

  // å…³é—­å¼¹çª—
  const closeModals = () => {
    setIsSelectorOpen(false);
    setIsSpecialModalOpen(false);
    setSelectedStudentsForSpecial([]);
    setNewSpecialInput('');
  };

  // ç¡®è®¤æ·»åŠ ä¸ªæ€§åŒ–ä»»åŠ¡
  const confirmAddSpecial = () => {
    if (!selectedStudentsForSpecial.length || !newSpecialInput.trim()) return;

    // æ·»åŠ åˆ°å†å²è®°å½•
    if (!specialHistory.includes(newSpecialInput.trim())) {
      setSpecialHistory(prev => [newSpecialInput.trim(), ...prev.slice(0, 9)]); // æœ€å¤šä¿ç•™10ä¸ª
    }

    // æ·»åŠ ç‰¹æ®Šä»»åŠ¡
    const newTask: SpecialTask = {
      id: Date.now().toString(),
      students: [...selectedStudentsForSpecial],
      tasks: [newSpecialInput.trim()],
      description: `ä¸ªæ€§åŒ–åŠ é¤: ${selectedStudentsForSpecial.join(', ')} - ${newSpecialInput}`,
      expValue: 30,
      isSpecial: true
    };

    setSpecialTasks(prev => [...prev, newTask]);
    closeModals();
  };

  // åˆ é™¤ç‰¹æ®Šä»»åŠ¡
  const deleteSpecialTask = (id: string) => {
    setSpecialTasks(prev => prev.filter(task => task.id !== id));
  };

  // å‘å¸ƒè®¡åˆ’
  const publishPlan = () => {
    const currLesson = SUBJECT_DB[currentSubject].inputs;

    // è¿™é‡Œåº”è¯¥è°ƒç”¨APIä¿å­˜åˆ°æ•°æ®åº“
    console.log('å‘å¸ƒè®¡åˆ’:', {
      subject: currentSubject,
      lesson: currLesson,
      qcItems: SUBJECT_DB[currentSubject].selected_qc,
      taskItems: SUBJECT_DB[currentSubject].selected_task,
      specialTasks: specialTasks,
      students: students
    });

    setIsPublished(true);
    alert('ä»Šæ—¥è®¡åˆ’å‘å¸ƒæˆåŠŸï¼');
  };

  // åˆ é™¤å·²é€‰é¡¹ç›®
  const removeSelectedItem = (type: 'QC' | 'TASK', index: number) => {
    setSubjectDB(prev => {
      const data = prev[currentSubject];
      const list = type === 'QC' ? data.selected_qc : data.selected_task;
      const newList = list.filter((_, i) => i !== index);

      return {
        ...prev,
        [currentSubject]: {
          ...data,
          [type === 'QC' ? 'selected_qc' : 'selected_task']: newList
        }
      };
    });
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* å¤´éƒ¨ */}
      <div className="bg-white border-b border-gray-200">
        <div className="px-4 py-3">
          <div className="flex items-center justify-between mb-4">
            <h1 className="text-xl font-bold text-gray-800">ğŸ“ å¤‡è¯¾</h1>
            {isPublished && (
              <span className="px-3 py-1 bg-green-100 text-green-700 text-sm rounded-full">
                å·²å‘å¸ƒ
              </span>
            )}
          </div>

          {/* å­¦ç§‘åˆ‡æ¢ */}
          <div className="flex gap-2 mb-4">
            {(['math', 'chinese', 'english'] as const).map(subject => (
              <button
                key={subject}
                onClick={() => setCurrentSubject(subject)}
                className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                  currentSubject === subject
                    ? 'bg-primary text-white'
                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                }`}
              >
                {subject === 'math' ? 'æ•°å­¦' : subject === 'chinese' ? 'è¯­æ–‡' : 'è‹±è¯­'}
              </button>
            ))}
          </div>

          {/* è¯¾ç¨‹ä¿¡æ¯è¾“å…¥ */}
          <div className="bg-blue-50 rounded-lg p-3 mb-4">
            <div className="grid grid-cols-3 gap-2 text-sm">
              <div>
                <label className="text-gray-600 text-xs">å•å…ƒ</label>
                <input
                  type="text"
                  value={currentConfig.inputs.unit}
                  onChange={(e) => handleInputChange('unit', e.target.value)}
                  className="w-full px-2 py-1 border rounded text-center"
                  placeholder="3"
                />
              </div>
              <div>
                <label className="text-gray-600 text-xs">è¯¾æ—¶</label>
                <input
                  type="text"
                  value={currentConfig.inputs.lesson}
                  onChange={(e) => handleInputChange('lesson', e.target.value)}
                  className="w-full px-2 py-1 border rounded text-center"
                  placeholder="2"
                />
              </div>
              <div className="col-span-3">
                <label className="text-gray-600 text-xs">æ ‡é¢˜</label>
                <input
                  type="text"
                  value={currentConfig.inputs.title}
                  onChange={(e) => handleInputChange('title', e.target.value)}
                  className="w-full px-2 py-1 border rounded"
                  placeholder="è¯¾ç¨‹æ ‡é¢˜"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* ä¸»è¦å†…å®¹åŒº */}
      <div className="p-4 pb-24">
        {/* è´¨æ£€é¡¹ */}
        <div className="bg-white rounded-xl p-4 mb-4 border-l-4 border-red-500">
          <div className="flex justify-between items-center mb-3">
            <h3 className="font-bold text-red-600 flex items-center gap-2">
              ğŸ›¡ï¸ è´¨æ£€é¡¹
            </h3>
            <span className="text-xs text-gray-500">åŒæ­¥è‡³è´¨æ£€é¡µ</span>
          </div>

          <div className="flex flex-wrap gap-2 mb-3">
            {currentConfig.selected_qc.map((item, index) => (
              <div
                key={index}
                className="px-3 py-1 bg-red-50 text-red-600 rounded-full text-sm flex items-center gap-1"
              >
                {item}
                <button
                  onClick={() => removeSelectedItem('QC', index)}
                  className="text-red-400 hover:text-red-600"
                >
                  Ã—
                </button>
              </div>
            ))}
          </div>

          <button
            onClick={() => openSelector('QC')}
            className="w-full py-2 border-2 border-dashed border-red-300 text-red-500 rounded-lg hover:bg-red-50 transition-colors"
          >
            + é€‰æ‹© / æ–°å¢è´¨æ£€é¡¹
          </button>
        </div>

        {/* ä»»åŠ¡é¡¹ */}
        <div className="bg-white rounded-xl p-4 mb-4 border-l-4 border-blue-500">
          <div className="flex justify-between items-center mb-3">
            <h3 className="font-bold text-blue-600 flex items-center gap-2">
              ğŸŒ± ä»»åŠ¡é¡¹
            </h3>
            <span className="text-xs text-gray-500">åŒæ­¥è‡³è´¨æ£€é¡µ</span>
          </div>

          <div className="flex flex-wrap gap-2 mb-3">
            {currentConfig.selected_task.map((item, index) => (
              <div
                key={index}
                className="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm flex items-center gap-1"
              >
                {item}
                <button
                  onClick={() => removeSelectedItem('TASK', index)}
                  className="text-blue-400 hover:text-blue-600"
                >
                  Ã—
                </button>
              </div>
            ))}
          </div>

          <button
            onClick={() => openSelector('TASK')}
            className="w-full py-2 border-2 border-dashed border-blue-300 text-blue-500 rounded-lg hover:bg-blue-50 transition-colors"
          >
            + é€‰æ‹© / æ–°å¢ä»»åŠ¡é¡¹
          </button>
        </div>

        {/* ä¸ªæ€§åŒ–åŠ é¤ */}
        <div className="bg-white rounded-xl p-4 mb-4 border-2 border-dashed border-orange-300">
          <h3 className="font-bold text-orange-600 mb-3 flex items-center gap-2">
            ğŸŒŸ ä¸ªæ€§åŒ–åŠ é¤ (å…¨ç§‘é€šç”¨)
          </h3>

          <div className="space-y-2">
            {specialTasks.map((task) => (
              <div
                key={task.id}
                className="flex items-center justify-between bg-orange-50 border border-orange-200 rounded-lg p-3"
              >
                <div className="flex-1">
                  <div className="font-medium text-gray-800">{task.students.join(', ')}</div>
                  <div className="text-sm text-gray-600">
                    â• {task.tasks.join(' + ')} (30 EXP)
                  </div>
                </div>
                <button
                  onClick={() => deleteSpecialTask(task.id)}
                  className="text-orange-400 hover:text-orange-600 p-2"
                >
                  âœ•
                </button>
              </div>
            ))}
          </div>

          <button
            onClick={showSpecialModal}
            className="w-full py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors"
          >
            + æ·»åŠ ä¸ªæ€§åŒ–åŠ é¤
          </button>
        </div>

        {/* å‘å¸ƒæŒ‰é’® */}
        <button
          onClick={publishPlan}
          className="w-full py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary-dark transition-colors shadow-lg"
        >
          å‘å¸ƒä»Šæ—¥è®¡åˆ’
        </button>
      </div>

      {/* é€‰æ‹©å™¨å¼¹çª— */}
      {isSelectorOpen && (
        <div className="fixed inset-0 bg-black/60 flex items-end justify-center z-50">
          <div className="bg-white w-full max-h-80 rounded-t-3xl overflow-hidden">
            <div className="p-4 border-b border-gray-200">
              <div className="flex justify-between items-center">
                <h3 className="font-bold text-lg">
                  {selectorType === 'QC' ? 'é€‰æ‹©è´¨æ£€é¡¹' : 'é€‰æ‹©ä»»åŠ¡é¡¹'}
                </h3>
                <button
                  onClick={closeSelector}
                  className="p-2 hover:bg-gray-100 rounded-full"
                >
                  <X size={20} />
                </button>
              </div>
            </div>

            <div className="p-4 max-h-60 overflow-y-auto">
              {(selectorType === 'QC' ? currentConfig.qc_options : currentConfig.task_options)
                .filter(option => !currentConfig[selectorType === 'QC' ? 'selected_qc' : 'selected_task'].includes(option))
                .map((option, index) => (
                  <div
                    key={index}
                    onClick={() => toggleSelectOpt(option)}
                    className="flex items-center justify-between p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
                  >
                    <span>{option}</span>
                    {currentConfig[selectorType === 'QC' ? 'selected_qc' : 'selected_task'].includes(option) && (
                      <Check size={20} className="text-green-500" />
                    )}
                  </div>
                ))}
            </div>

            <div className="p-4 border-t border-gray-200">
              <div className="flex gap-2">
                <input
                  type="text"
                  value={newItemInput}
                  onChange={(e) => setNewItemInput(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && addNewItem()}
                  placeholder={`è¾“å…¥æ–°çš„${selectorType === 'QC' ? 'è´¨æ£€' : 'ä»»åŠ¡'}é¡¹`}
                  className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"
                />
                <button
                  onClick={addNewItem}
                  className="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark"
                >
                  æ·»åŠ 
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* ä¸ªæ€§åŒ–å¼¹çª— */}
      {isSpecialModalOpen && (
        <div className="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
          <div className="bg-white w-full max-w-md rounded-3xl p-6 max-h-80 overflow-hidden">
            <div className="flex justify-between items-center mb-4">
              <h3 className="font-bold text-lg">ä¸ªæ€§åŒ–åŠ é¤</h3>
              <button
                onClick={closeModals}
                className="p-2 hover:bg-gray-100 rounded-full"
              >
                <X size={20} />
              </button>
            </div>

            {/* å†å²æ ‡ç­¾ */}
            <div className="mb-4">
              <h4 className="text-sm font-medium text-gray-600 mb-2">å†å²è®°å½•</h4>
              <div className="flex flex-wrap gap-2">
                {specialHistory.map((tag, index) => (
                  <div
                    key={index}
                    className="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm cursor-pointer hover:bg-gray-200"
                  >
                    {tag}
                  </div>
                ))}
              </div>
            </div>

            {/* å­¦ç”Ÿé€‰æ‹© */}
            <div className="mb-4">
              <h4 className="text-sm font-medium text-gray-600 mb-2">é€‰æ‹©å­¦ç”Ÿ</h4>
              <div className="max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-2">
                {students.map((student) => (
                  <div
                    key={student.id}
                    onClick={() => {
                      setSelectedStudentsForSpecial(prev =>
                        prev.includes(student.id)
                          ? prev.filter(id => id !== student.id)
                          : [...prev, student.id]
                      );
                    }}
                    className={`p-2 mb-1 rounded cursor-pointer flex items-center justify-between ${
                      selectedStudentsForSpecial.includes(student.id) ? 'bg-orange-100 border-orange-300' : 'hover:bg-gray-50'
                    }`}
                  >
                    <span>{student.name}</span>
                    {selectedStudentsForSpecial.includes(student.id) && <Check size={16} className="text-orange-500" />}
                  </div>
                ))}
              </div>
            </div>

            {/* ä»»åŠ¡è¾“å…¥ */}
            <div className="mb-4">
              <h4 className="text-sm font-medium text-gray-600 mb-2">ä»»åŠ¡å†…å®¹</h4>
              <input
                type="text"
                value={newSpecialInput}
                onChange={(e) => setNewSpecialInput(e.target.value)}
                placeholder="è¾“å…¥ä¸ªæ€§åŒ–ä»»åŠ¡"
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary"
              />
            </div>

            <button
              onClick={confirmAddSpecial}
              disabled={!selectedStudentsForSpecial.length || !newSpecialInput.trim()}
              className="w-full py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
            >
              ç¡®è®¤æ·»åŠ 
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default PrepView;
```

---

### 2. è·¯ç”±é…ç½® - App.tsx

```typescript
// åœ¨ App.tsx ä¸­æ·»åŠ è·¯ç”±
import PrepView from './pages/PrepView';

// åœ¨ Routes ç»„ä»¶ä¸­æ·»åŠ è·¯ç”±
<Routes>
  {/* å…¶ä»–è·¯ç”± */}
  <Route path="/prep" element={<PrepView />} />
</Routes>
```

---

### 3. åº•éƒ¨å¯¼èˆªé…ç½® - BottomNav.tsx

```typescript
// åœ¨ BottomNav.tsx ä¸­æ·»åŠ å¯¼èˆªé¡¹
const navItems = [
  { path: '/', label: 'ç­çº§', icon: Users },
  { path: '/prep', label: 'å¤‡è¯¾', icon: BookOpen },  // å¤‡è¯¾é¡µé¢å¯¼èˆª
  { path: '/qc', label: 'è´¨æ£€', icon: Shield },
  { path: '/profile', label: 'æˆ‘çš„', icon: User },
];
```

---

## ğŸ¨ æ ·å¼é…ç½®

### Tailwind CSS é…ç½®è¦æ±‚

```css
/* éœ€è¦çš„ Tailwind CSS ç±» */
- åŸºç¡€å¸ƒå±€ï¼šmin-h-screen, bg-gray-50
- è¾¹æ¡†æ ·å¼ï¼šborder, border-gray-200, border-l-4, border-dashed
- åœ†è§’æ ·å¼ï¼šrounded, rounded-lg, rounded-xl, rounded-3xl
- é¢œè‰²ç³»ç»Ÿï¼šbg-red-500, bg-blue-500, bg-orange-500, text-red-600, text-blue-600
- é˜´å½±æ•ˆæœï¼šshadow-lg
- åŠ¨ç”»æ•ˆæœï¼štransition-colors, hover:bg-gray-50
- é—´è·ï¼šp-4, mb-4, gap-2
- ç½‘æ ¼ç³»ç»Ÿï¼šgrid, grid-cols-3
- å®šä½ï¼šfixed, inset-0, z-50
- å¼¹æ€§å¸ƒå±€ï¼šflex, items-center, justify-between
```

---

## ğŸ“± åŠŸèƒ½ç‰¹æ€§æ€»ç»“

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 1. **å­¦ç§‘ç®¡ç†ç³»ç»Ÿ**
- æ”¯æŒæ•°å­¦ã€è¯­æ–‡ã€è‹±è¯­ä¸‰ä¸ªå­¦ç§‘
- ç‹¬ç«‹é…ç½®æ¯ä¸ªå­¦ç§‘çš„è¯¾ç¨‹ä¿¡æ¯
- å­¦ç§‘é—´åˆ‡æ¢æ— ç¼åˆ‡æ¢

#### 2. **è¯¾ç¨‹ä¿¡æ¯é…ç½®**
- å•å…ƒ/è¯¾æ—¶/æ ‡é¢˜è¾“å…¥
- æ™ºèƒ½æ ¼å¼åŒ–æ˜¾ç¤ºï¼ˆæ”¯æŒè‹±æ–‡Unitæ ¼å¼ï¼‰
- å®æ—¶ä¿å­˜é…ç½®çŠ¶æ€

#### 3. **è´¨æ£€é¡¹ç®¡ç†**
- é¢„ç½®è´¨æ£€é€‰é¡¹ï¼ˆæ¯ä¸ªå­¦ç§‘5ä¸ªé»˜è®¤é¡¹ï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ·»åŠ è´¨æ£€é¡¹
- å¯è§†åŒ–é€‰æ‹©å’Œåˆ é™¤åŠŸèƒ½
- ä¸è´¨æ£€é¡µé¢è‡ªåŠ¨åŒæ­¥

#### 4. **ä»»åŠ¡é¡¹ç®¡ç†**
- é¢„ç½®ä»»åŠ¡é€‰é¡¹ï¼ˆæ¯ä¸ªå­¦ç§‘5ä¸ªé»˜è®¤é¡¹ï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ·»åŠ ä»»åŠ¡é¡¹
- å¯è§†åŒ–é€‰æ‹©å’Œåˆ é™¤åŠŸèƒ½
- ä¸è´¨æ£€é¡µé¢è‡ªåŠ¨åŒæ­¥

#### 5. **ä¸ªæ€§åŒ–åŠ é¤ç³»ç»Ÿ**
- ä¸ºç‰¹å®šå­¦ç”Ÿæ·»åŠ ä¸ªæ€§åŒ–ä»»åŠ¡
- å†å²ä»»åŠ¡è®°å½•ï¼ˆæœ€å¤šä¿ç•™10ä¸ªï¼‰
- å­¦ç”Ÿå¤šé€‰æ”¯æŒ
- 30 EXPå›ºå®šå¥–åŠ±å€¼

#### 6. **å­¦ç”Ÿæ•°æ®é›†æˆ**
- è‡ªåŠ¨ä»APIè·å–å­¦ç”Ÿåˆ—è¡¨
- æ”¯æŒå­¦ç”Ÿä¿¡æ¯æ˜¾ç¤ºå’Œé€‰æ‹©
- ä¸ä¸»ç³»ç»Ÿæ•°æ®å®Œå…¨åŒæ­¥

#### 7. **å‘å¸ƒç³»ç»Ÿ**
- ä¸€é”®å‘å¸ƒä»Šæ—¥è®¡åˆ’
- çŠ¶æ€è·Ÿè¸ªï¼ˆå·²å‘å¸ƒ/æœªå‘å¸ƒï¼‰
- å®Œæ•´æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°äº®ç‚¹

### çŠ¶æ€ç®¡ç†
```typescript
// å­¦ç§‘é…ç½®æ•°æ®åº“
const [SUBJECT_DB, setSubjectDB] = useState<Record<string, SubjectConfig>>({
  math: {
    qc_options: ['å£ç®—è¾¾æ ‡', 'é”™é¢˜è®¢æ­£', 'æ¦‚å¿µç†è§£', 'è§£é¢˜æ­¥éª¤', 'åº”ç”¨é¢˜è®­ç»ƒ'],
    task_options: ['ç»ƒä¹ å†ŒP12', 'åŸºç¡€è®­ç»ƒ', 'æ‹“å±•ç»ƒä¹ ', 'è®¡ç®—ä¸“é¡¹', 'å‡ ä½•å›¾å½¢'],
    selected_qc: ['å£ç®—è¾¾æ ‡', 'é”™é¢˜è®¢æ­£'],
    selected_task: ['ç»ƒä¹ å†ŒP12'],
    inputs: { unit: '3', lesson: '2', title: 'å¤šä½æ•°ä¹˜æ³•' }
  },
  // ... å…¶ä»–å­¦ç§‘
});
```

### åŠ¨æ€æ•°æ®å¤„ç†
```typescript
// å¤„ç†è¾“å…¥å˜æ›´
const handleInputChange = (field: keyof LessonInput, value: string) => {
  setSubjectDB(prev => ({
    ...prev,
    [currentSubject]: {
      ...prev[currentSubject],
      inputs: {
        ...prev[currentSubject].inputs,
        [field]: value
      }
    }
  }));
};
```

### å¼¹çª—ç³»ç»Ÿ
- é€‰æ‹©å™¨å¼¹çª—ï¼šè´¨æ£€é¡¹/ä»»åŠ¡é¡¹é€‰æ‹©
- ä¸ªæ€§åŒ–å¼¹çª—ï¼šå­¦ç”Ÿé€‰æ‹©å’Œä»»åŠ¡è¾“å…¥
- å†å²è®°å½•æ”¯æŒ

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **PrepView.tsx**: 592è¡Œ
- **è·¯ç”±é…ç½®**: çº¦è¡Œ
- **å¯¼èˆªé…ç½®**: çº¦è¡Œ
- **æ€»è®¡**: çº¦610è¡Œæ ¸å¿ƒä»£ç 

### æ–‡ä»¶å¤§å°åˆ†æ
- ä¸»ç»„ä»¶ï¼š592è¡Œå®Œæ•´Reactç»„ä»¶
- æ¥å£å®šä¹‰ï¼š6ä¸ªTypeScriptæ¥å£
- çŠ¶æ€ç®¡ç†ï¼š12ä¸ªuseStateé’©å­
- äº‹ä»¶å¤„ç†ï¼š10+ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°

---

## ğŸ”— APIæ¥å£ä¾èµ–

### å­¦ç”Ÿæ•°æ®è·å–
```typescript
const fetchStudents = async () => {
  const protocol = window.location.protocol;
  const host = window.location.host;
  const apiUrl = `${protocol}//${host}/api`;

  const response = await fetch(`${apiUrl}/students`);
  // ... å¤„ç†å­¦ç”Ÿæ•°æ®
};
```

### æ•°æ®æ ¼å¼è¦æ±‚
```typescript
interface Student {
  id: string;
  name: string;
  avatar_url: string;
  class_name: string;
  score: number;
  total_exp: number;
  level: number;
}
```

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ä¾èµ–åŒ…è¦æ±‚
```json
{
  "dependencies": {
    "react": "^18.0.0",
    "lucide-react": "^0.263.1",
    "react-router-dom": "^6.0.0",
    "typescript": "^4.9.5"
  }
}
```

### è·¯ç”±é…ç½®
ç¡®ä¿åœ¨React Routerä¸­æ·»åŠ æ­£ç¡®çš„è·¯ç”±ï¼š
```typescript
<Route path="/prep" element={<PrepView />} />
```

### å¯¼èˆªé…ç½®
åœ¨åº•éƒ¨å¯¼èˆªä¸­æ·»åŠ å¤‡è¯¾é¡µé¢å…¥å£ã€‚

---

## ğŸ“š æ‰©å±•å»ºè®®

### 1. **æ•°æ®åº“é›†æˆ**
- å°†å‘å¸ƒè®¡åˆ’ä¿å­˜åˆ°åç«¯æ•°æ®åº“
- æ”¯æŒè®¡åˆ’å†å²è®°å½•æŸ¥è¯¢
- æ”¯æŒè®¡åˆ’æ¨¡æ¿ä¿å­˜

### 2. **åŠŸèƒ½å¢å¼º**
- æ”¯æŒæ‰¹é‡æ“ä½œ
- æ·»åŠ è®¡åˆ’ç»Ÿè®¡åŠŸèƒ½
- æ”¯æŒè®¡åˆ’åˆ†äº«

### 3. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- æ·»åŠ æ‹–æ‹½æ’åºåŠŸèƒ½
- æ”¯æŒå¿«æ·é”®æ“ä½œ
- ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ

---

## ğŸ¯ ä½¿ç”¨è¯´æ˜

1. **è®¿é—®è·¯å¾„**: `/prep`
2. **å¯¼èˆªå…¥å£**: åº•éƒ¨å¯¼èˆªæ "å¤‡è¯¾"æŒ‰é’®
3. **åŸºæœ¬æ“ä½œæµç¨‹**:
   - é€‰æ‹©å­¦ç§‘ â†’ è¾“å…¥è¯¾ç¨‹ä¿¡æ¯ â†’ é€‰æ‹©è´¨æ£€é¡¹ â†’ é€‰æ‹©ä»»åŠ¡é¡¹ â†’ æ·»åŠ ä¸ªæ€§åŒ–åŠ é¤ â†’ å‘å¸ƒè®¡åˆ’
4. **é«˜çº§åŠŸèƒ½**: ä¸ªæ€§åŒ–åŠ é¤æ”¯æŒä¸ºç‰¹å®šå­¦ç”Ÿæ·»åŠ é¢å¤–ä»»åŠ¡

---

**æ‰“åŒ…å®Œæˆæ—¶é—´**ï¼š2025-12-10
**ç‰ˆæœ¬**ï¼šv1.0 å®Œæ•´åŠŸèƒ½ç‰ˆ
**çŠ¶æ€**ï¼šâœ… å®Œæ•´