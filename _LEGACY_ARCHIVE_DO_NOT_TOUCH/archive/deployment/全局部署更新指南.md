# ğŸŒ å…¨å±€éƒ¨ç½²æ›´æ–°æŒ‡å—

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¶é—´**: 2025-12-10
**æœ€åæ›´æ–°**: 2025-12-10
**é€‚ç”¨ç‰ˆæœ¬**: Growark + StarJourney v13.0 èåˆç³»ç»Ÿ

---

## ğŸ¯ å½“å‰å…¬ç½‘ä¿¡æ¯ (2025-12-10ç¡®è®¤)

### âœ… æ­£ç¡®çš„å…¬ç½‘åœ°å€
**åŸºç¡€åŸŸå**: `https://esboimzbkure.sealosbja.site`

### ğŸ”— åŠŸèƒ½è®¿é—®è·¯å¾„
| åŠŸèƒ½æ¨¡å— | å…¬ç½‘åœ°å€ | çŠ¶æ€ |
|---------|----------|------|
| ğŸ“± **æ‰‹æœºç«¯(æ•™å¸ˆç«¯)** | https://esboimzbkure.sealosbja.site/app | âœ… **ä¸»è¦å…¥å£** |
| ğŸ“º **å¤§å±ç«¯** | https://esboimzbkure.sealosbja.site/screen | âœ… **æ•°æ®å±•ç¤º** |
| ğŸ‘¤ **å­¦ç”Ÿç«¯** | https://esboimzbkure.sealosbja.site/student | âœ… **å­¦ç”Ÿç•Œé¢** |
| ğŸ“Š **APIæ¥å£** | https://esboimzbkure.sealosbja.site/api/* | âœ… **æ•°æ®æ¥å£** |
| â¤ï¸ **å¥åº·æ£€æŸ¥** | https://esboimzbkure.sealosbja.site/health | âœ… **æœåŠ¡ç›‘æ§** |
| ğŸ“ **å¤‡è¯¾é¡µé¢** | https://esboimzbkure.sealosbja.site/prep | âœ… **æ–°åŠŸèƒ½** |
| ğŸ›¡ï¸ **è´¨æ£€é¡µé¢** | https://esboimzbkure.sealosbja.site/qc | âœ… **æ–°åŠŸèƒ½** |

---

## ğŸš€ æ¯æ¬¡æ–°åŠŸèƒ½ä¿®æ”¹åéƒ¨ç½²æµç¨‹ (å¿…é¡»æ‰§è¡Œ)

### ç¬¬ä¸€æ­¥: åœæ­¢å½“å‰æœåŠ¡
```bash
# æŸ¥æ‰¾å¹¶åœæ­¢å½“å‰çš„Node.jsæœåŠ¡å™¨è¿›ç¨‹
ps aux | grep "arkok/server.js" | grep -v grep
kill $(pgrep -f "arkok/server.js")
```

### ç¬¬äºŒæ­¥: æ›´æ–°æºä»£ç 
```bash
cd /home/devbox/project/arkok/mobile

# å¦‚æœä¿®æ”¹äº†package.jsonï¼Œå…ˆå®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### ç¬¬ä¸‰æ­¥: éƒ¨ç½²åˆ°ç”Ÿäº§ç›®å½•
```bash
# å¤åˆ¶æ„å»ºåçš„æ–‡ä»¶åˆ°publicç›®å½•
cd /home/devbox/project/arkok/mobile

# å¤åˆ¶ä¸»ç¨‹åºæ–‡ä»¶
cp dist/assets/main-*.js ../public/assets/

# å¤åˆ¶å®¢æˆ·ç«¯ä»£ç 
cp dist/assets/client-*.js ../public/assets/

# å¤åˆ¶å¤§å±ç«¯æ–‡ä»¶
cp dist/assets/bigscreen-*.js ../public/assets/

# å¤åˆ¶HTMLå…¥å£æ–‡ä»¶
cp dist/index.html ../public/

# æ·»åŠ ç‰ˆæœ¬å·å¼ºåˆ¶åˆ·æ–°ç¼“å­˜ (é‡è¦!)
cd /home/devbox/project/arkok/public
sed -i 's|src="/assets/main-|src="/assets/main-?v='$(date +%Y%m%d%H%M)'&|' index.html
sed -i 's|href="/assets/client-|href="/assets/client-?v='$(date +%Y%m%d%H%M)'&|' index.html
sed -i 's|href="/assets/bigscreen-|href="/assets/bigscreen-?v='$(date +%Y%m%d%H%M)'&|' index.html
```

### ç¬¬å››æ­¥: é‡æ–°å¯åŠ¨å…¬ç½‘æœåŠ¡
```bash
cd /home/devbox/project

# ä½¿ç”¨ç”Ÿäº§æ¨¡å¼å¯åŠ¨
./entrypoint.sh production

# æˆ–è€…åå°å¯åŠ¨
nohup ./entrypoint.sh production > server.log 2>&1 &
```

### ç¬¬äº”æ­¥: éªŒè¯éƒ¨ç½²
```bash
# ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ (çº¦30ç§’)
sleep 30

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ps aux | grep "arkok/server.js" | grep -v grep

# éªŒè¯å¥åº·æ£€æŸ¥
curl -s https://esboimzbkure.sealosbja.site/health

# éªŒè¯ä¸»è¦é¡µé¢å¯è®¿é—®
curl -s -o /dev/null -w "%{http_code}" https://esboimzbkure.sealosbja.site/app
```

---

## ğŸ”§ å¸¸è§åŠŸèƒ½ä¿®æ”¹ç±»å‹åŠå¯¹åº”æ“ä½œ

### 1. å‰ç«¯é¡µé¢ä¿®æ”¹ (Home.tsx, ClassManage.tsx, PrepView.tsxç­‰)
```bash
# æ ‡å‡†æµç¨‹
cd /home/devbox/project/arkok/mobile
npm run build
cp dist/assets/main-*.js ../public/assets/
cp dist/index.html ../public/
./entrypoint.sh production
```

### 2. æ–°å¢é¡µé¢ç»„ä»¶
```bash
# ç¡®ä¿è·¯ç”±é…ç½®æ­£ç¡® (App.tsx)
# æ£€æŸ¥åº•éƒ¨å¯¼èˆªé…ç½® (BottomNav.tsx)
# ç„¶åæ‰§è¡Œæ ‡å‡†æµç¨‹
cd /home/devbox/project/arkok/mobile
npm run build
cp dist/assets/main-*.js ../public/assets/
cp dist/index.html ../public/
./entrypoint.sh production
```

### 3. APIæ¥å£ä¿®æ”¹ (server.js)
```bash
# åªéœ€é‡å¯æœåŠ¡å™¨ï¼Œæ— éœ€é‡æ–°æ„å»ºå‰ç«¯
cd /home/devbox/project
kill $(pgrep -f "arkok/server.js")
./entrypoint.sh production
```

### 4. æ ·å¼æˆ–UIä¿®æ”¹
```bash
# éœ€è¦å¼ºåˆ¶æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
cd /home/devbox/project/arkok/mobile
npm run build
cp dist/assets/main-*.js ../public/assets/
cp dist/assets/client-*.js ../public/assets/
cp dist/index.html ../public/
# æ›´æ–°æ‰€æœ‰èµ„æºæ–‡ä»¶çš„ç‰ˆæœ¬å·
sed -i 's|.js"|.js?v='$(date +%Y%m%d%H%M)'"|' index.html
./entrypoint.sh production
```

### 5. ä¾èµ–åŒ…æ›´æ–°
```bash
cd /home/devbox/project/arkok/mobile

# æ¸…é™¤æ—§çš„node_modules
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…
npm install

# é‡æ–°æ„å»º
npm run build

# éƒ¨ç½²
cp dist/assets/*.js ../public/assets/
cp dist/index.html ../public/
./entrypoint.sh production
```

---

## âš¡ å¿«é€Ÿéƒ¨ç½²è„šæœ¬ (ä¸€é”®æ‰§è¡Œ)

åˆ›å»ºå¿«é€Ÿéƒ¨ç½²è„šæœ¬ `/home/devbox/project/å¿«é€Ÿéƒ¨ç½².sh`:

```bash
#!/bin/bash

echo "ğŸš€ å¼€å§‹å¿«é€Ÿéƒ¨ç½²..."

# 1. åœæ­¢æœåŠ¡
echo "ğŸ“› åœæ­¢å½“å‰æœåŠ¡..."
kill $(pgrep -f "arkok/server.js") 2>/dev/null

# 2. æ„å»ºå‰ç«¯
echo "ğŸ”¨ æ„å»ºå‰ç«¯ä»£ç ..."
cd /home/devbox/project/arkok/mobile
npm run build

# 3. éƒ¨ç½²æ–‡ä»¶
echo "ğŸ“ éƒ¨ç½²æ„å»ºæ–‡ä»¶..."
cp dist/assets/main-*.js ../public/assets/
cp dist/assets/client-*.js ../public/assets/
cp dist/index.html ../public/

# 4. æ·»åŠ ç‰ˆæœ¬å·
VERSION=$(date +%Y%m%d%H%M)
sed -i "s|.js\"|.js?v=$VERSION\"|g" ../public/index.html

# 5. å¯åŠ¨æœåŠ¡
echo "ğŸ”„ å¯åŠ¨å…¬ç½‘æœåŠ¡..."
cd /home/devbox/project
nohup ./entrypoint.sh production > server.log 2>&1 &

# 6. ç­‰å¾…å¹¶éªŒè¯
echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 30

# 7. å¥åº·æ£€æŸ¥
if curl -s https://esboimzbkure.sealosbja.site/health > /dev/null; then
    echo "âœ… éƒ¨ç½²æˆåŠŸï¼"
    echo "ğŸŒ è®¿é—®åœ°å€: https://esboimzbkure.sealosbja.site/app"
else
    echo "âŒ éƒ¨ç½²å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—"
    tail -20 server.log
fi
```

ä½¿ç”¨æ–¹æ³•:
```bash
chmod +x /home/devbox/project/å¿«é€Ÿéƒ¨ç½².sh
./å¿«é€Ÿéƒ¨ç½².sh
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜1: é¡µé¢ç©ºç™½æˆ–404é”™è¯¯
**åŸå› **: æ„å»ºæ–‡ä»¶æœªæ­£ç¡®å¤åˆ¶åˆ°publicç›®å½•
**è§£å†³**:
```bash
ls -la /home/devbox/project/arkok/public/assets/main-*.js
# å¦‚æœæ²¡æœ‰æ–‡ä»¶æˆ–æ–‡ä»¶å¾ˆæ—§ï¼Œé‡æ–°æ‰§è¡Œéƒ¨ç½²æµç¨‹
```

### å¸¸è§é—®é¢˜2: æµè§ˆå™¨ç¼“å­˜å¯¼è‡´çœ‹ä¸åˆ°æ›´æ–°
**åŸå› **: æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„JSæ–‡ä»¶
**è§£å†³**:
1. ä½¿ç”¨ç‰ˆæœ¬å·å¼ºåˆ¶åˆ·æ–° (å·²åœ¨è„šæœ¬ä¸­åŒ…å«)
2. ç”¨æˆ·ç«¯æŒ‰Ctrl+F5å¼ºåˆ¶åˆ·æ–°
3. ä½¿ç”¨æ— ç—•æ¨¡å¼è®¿é—®

### å¸¸è§é—®é¢˜3: APIæ¥å£é”™è¯¯
**åŸå› **: æœåŠ¡å™¨æœªæ­£ç¡®å¯åŠ¨æˆ–æ•°æ®åº“è¿æ¥å¤±è´¥
**è§£å†³**:
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ps aux | grep "arkok/server.js"

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep :3000

# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
tail -50 /home/devbox/project/server.log
```

### å¸¸è§é—®é¢˜4: å…¬ç½‘åœ°å€æ— æ³•è®¿é—®
**åŸå› **: Sealoså†…ç½‘ç©¿é€éœ€è¦2-5åˆ†é’Ÿå‡†å¤‡æ—¶é—´
**è§£å†³**:
- ç­‰å¾…5åˆ†é’Ÿåé‡è¯•
- æ£€æŸ¥å¥åº·æ£€æŸ¥æ¥å£: `curl https://esboimzbkure.sealosbja.site/health`

---

## ğŸ“± ç”¨æˆ·ä½¿ç”¨æŒ‡å—

### ä¸»è¦åŠŸèƒ½å…¥å£

1. **æ•™å¸ˆç«¯ç®¡ç†**: https://esboimzbkure.sealosbja.site/app
   - 5Tabåº•éƒ¨å¯¼èˆª: [ç­çº§][å¤‡è¯¾]ğŸ“·[è´¨æ£€][æˆ‘çš„]

2. **å¤‡è¯¾é¡µé¢**: https://esboimzbkure.sealosbja.site/prep
   - ä¸‰å­¦ç§‘åˆ‡æ¢ (æ•°å­¦/è¯­æ–‡/è‹±è¯­)
   - è´¨æ£€é¡¹ç®¡ç† (çº¢è‰²è¾¹æ¡†)
   - ä»»åŠ¡é¡¹ç®¡ç† (è“è‰²è¾¹æ¡†)
   - ä¸ªæ€§åŒ–åŠ é¤ (æ©™è‰²è™šçº¿è¾¹æ¡†)

3. **è´¨æ£€é¡µé¢**: https://esboimzbkure.sealosbja.site/qc
   - è¾…å¯¼è®¡æ•°åŠŸèƒ½
   - å­¦ç”Ÿç®¡ç†
   - æ‰¹é‡æ“ä½œ

4. **å¤§å±å±•ç¤º**: https://esboimzbkure.sealosbja.site/screen
   - å®æ—¶æ•°æ®å±•ç¤º
   - æ’è¡Œæ¦œ
   - PKå¯¹æˆ˜

### å¼ºåˆ¶åˆ·æ–°æ›´æ–°
å¦‚æœç”¨æˆ·çœ‹ä¸åˆ°æœ€æ–°åŠŸèƒ½ï¼Œè¯·ï¼š
1. **Windows/Linux**: `Ctrl + F5`
2. **Mac**: `Cmd + Shift + R`
3. **ç§»åŠ¨ç«¯**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

**éƒ¨ç½²å‘½ä»¤å¿«é€Ÿå‚è€ƒ**:
```bash
# å®Œæ•´éƒ¨ç½²æµç¨‹
cd /home/devbox/project/arkok/mobile && npm run build && cp dist/assets/*.js ../public/assets/ && cp dist/index.html ../public/ && cd /home/devbox/project && ./entrypoint.sh production

# å¿«é€Ÿéƒ¨ç½²è„šæœ¬
./å¿«é€Ÿéƒ¨ç½².sh

# å¥åº·æ£€æŸ¥
curl https://esboimzbkure.sealosbja.site/health

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
ps aux | grep "arkok/server.js"
```

**é‡è¦æé†’**:
- æ¯æ¬¡ä¿®æ”¹å‰ç«¯ä»£ç åå¿…é¡»é‡æ–°æ„å»ºå’Œéƒ¨ç½²
- å…¬ç½‘åœ°å€å›ºå®šä¸º: `https://esboimzbkure.sealosbja.site`
- éƒ¨ç½²åç­‰å¾…2-5åˆ†é’Ÿå†è®¿é—®å…¬ç½‘
- ç‰ˆæœ¬å·æ ¼å¼: `YYYYMMDDHHMM` (å¦‚: 202512101059)

**æœ€åæ›´æ–°**: 2025-12-10 10:59
**æ–‡æ¡£ä½ç½®**: `/home/devbox/project/å…¨å±€éƒ¨ç½²æ›´æ–°æŒ‡å—.md`