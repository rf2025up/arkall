star-全学期过关地图
你需要的不是“今日待办”，而是一个**“该生全学期过关地图”**。老师进入这个页面，就像看这个孩子的“修炼进度条”一样，能清晰看到从第1课到第10课，哪里“绿了”（全过），哪里还“红着”（有欠账）。

这个页面应该放在 **学生详情页 -> 学业 Tab -> “过关记录”入口** 点击进入，或者直接作为学业 Tab 的主要视图之一。

### 🎨 页面设计核心逻辑：垂直时间轴 + 抽屉式收纳

为了解决“课多、任务数不固定”的排版问题，我们采用**折叠卡片（Accordion）**设计：

1.  **全局筛选**：顶部切换科目（语/数/英），以及“只看未完成”开关。
2.  **课时概览**：每一课作为一个卡片。
    *   **全过**：卡片默认折叠，显示绿勾，不占空间。
    *   **有欠账**：卡片自动展开（或高亮显示），直接暴露未过的任务。
3.  **补过操作**：在历史记录里，直接提供 **[补过]** 按钮，方便老师随时“回头看”并进行考核。

---

### 📱 高保真交互原型 (HTML)

这是一个专门针对**“单个学生历史全记录”**设计的页面。

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>学生个人过关全记录</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #F3F4F6; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* 进度条动画 */
        .progress-bar-fill { transition: width 0.5s ease-out; }

        /* 左侧时间轴线 */
        .timeline-line {
            position: absolute; left: 24px; top: 0; bottom: 0; width: 2px; background: #E5E7EB; z-index: 0;
        }
        
        /* 卡片状态样式 */
        .lesson-card { position: relative; z-index: 10; transition: all 0.3s; }
        
        /* 状态：全完成 */
        .status-done .card-body { border-left: 4px solid #22C55E; }
        .status-done .timeline-dot { background: #22C55E; border-color: #DCFCE7; }
        
        /* 状态：未完成 */
        .status-pending .card-body { border-left: 4px solid #F97316; }
        .status-pending .timeline-dot { background: #F97316; border-color: #FFEDD5; }
        
        /* 状态：未开始 */
        .status-locked .card-body { border-left: 4px solid #9CA3AF; opacity: 0.7; }
        .status-locked .timeline-dot { background: #E5E7EB; border-color: #F3F4F6; }

        /* 任务项 */
        .task-item { border-bottom: 1px dashed #F3F4F6; }
        .task-item:last-child { border-bottom: none; }
    </style>
</head>
<body>

<div class="max-w-[480px] mx-auto bg-gray-50 min-h-screen flex flex-col">

    <!-- 1. 顶部 Header (固定) -->
    <div class="bg-white sticky top-0 z-20 shadow-sm">
        <!-- 导航栏 -->
        <div class="flex items-center p-4 border-b border-gray-100">
            <button class="w-8 h-8 flex items-center justify-center text-gray-500 mr-2"><i class="fa-solid fa-chevron-left"></i></button>
            <div class="flex-1">
                <h1 class="text-lg font-bold text-gray-800">唐艺馨的学习足迹</h1>
            </div>
            <div class="text-xs text-gray-400">本学期</div>
        </div>

        <!-- 学科切换 & 统计 -->
        <div class="p-4 pb-2">
            <div class="flex bg-gray-100 p-1 rounded-lg mb-4">
                <button onclick="switchSub('chinese', this)" class="flex-1 py-1.5 rounded-md bg-white shadow text-blue-600 text-sm font-bold transition-all">语文</button>
                <button onclick="switchSub('math', this)" class="flex-1 py-1.5 rounded-md text-gray-500 text-sm font-bold transition-all">数学</button>
                <button onclick="switchSub('english', this)" class="flex-1 py-1.5 rounded-md text-gray-500 text-sm font-bold transition-all">英语</button>
            </div>
            
            <div class="flex justify-between items-center mb-2">
                <div class="text-xs text-gray-500">总体进度: <span class="font-bold text-blue-600 text-sm">85%</span></div>
                <label class="flex items-center gap-2 text-xs text-gray-600">
                    <input type="checkbox" class="rounded text-blue-600 focus:ring-0" onchange="toggleCompleted(this)">
                    只看未完成
                </label>
            </div>
            <!-- 总进度条 -->
            <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
                <div class="h-full bg-blue-500 progress-bar-fill" style="width: 85%"></div>
            </div>
        </div>
    </div>

    <!-- 2. 时间轴列表 (滚动区) -->
    <div class="flex-1 p-4 relative overflow-y-auto pb-20">
        <div class="timeline-line"></div>

        <!-- 课程 1: 有未完成 (展开状态) -->
        <div class="lesson-card status-pending mb-6 pl-8 relative">
            <!-- 时间轴圆点 -->
            <div class="timeline-dot w-4 h-4 rounded-full border-4 absolute left-[18px] top-4 box-content bg-white"></div>
            
            <div class="card-body bg-white rounded-xl shadow-sm overflow-hidden">
                <!-- 标题栏 (点击折叠/展开) -->
                <div class="p-3 bg-orange-50 border-b border-orange-100 flex justify-between items-center cursor-pointer" onclick="toggleCard(this)">
                    <div>
                        <div class="text-xs text-orange-600 font-bold mb-0.5">第 3 课 · 待补过</div>
                        <div class="font-bold text-gray-800">现代诗二首</div>
                    </div>
                    <div class="text-xs bg-white text-orange-600 px-2 py-1 rounded border border-orange-200 font-bold">2/4 完成</div>
                </div>

                <!-- 任务列表 -->
                <div class="task-list">
                    <!-- 已过关 -->
                    <div class="task-item p-3 flex justify-between items-center opacity-50 bg-gray-50">
                        <div class="flex items-center gap-2">
                            <i class="fa-solid fa-circle-check text-green-500"></i>
                            <span class="text-sm text-gray-500 line-through">背诵全诗</span>
                        </div>
                        <span class="text-[10px] text-gray-400">12/05 完成</span>
                    </div>
                    <!-- 未过关 1 -->
                    <div class="task-item p-3 flex justify-between items-center bg-white">
                        <div class="flex items-center gap-2">
                            <i class="fa-regular fa-circle text-orange-400"></i>
                            <div>
                                <div class="text-sm text-gray-800 font-medium">生字默写</div>
                                <div class="text-[10px] text-red-400">🔥 辅导过 3 次</div>
                            </div>
                        </div>
                        <button onclick="passTask(this)" class="bg-orange-100 text-orange-600 text-xs px-3 py-1.5 rounded-lg font-bold active:bg-orange-200">
                            补过
                        </button>
                    </div>
                    <!-- 未过关 2 -->
                    <div class="task-item p-3 flex justify-between items-center bg-white">
                        <div class="flex items-center gap-2">
                            <i class="fa-regular fa-circle text-gray-300"></i>
                            <span class="text-sm text-gray-800 font-medium">诗意理解</span>
                        </div>
                        <button onclick="passTask(this)" class="bg-gray-100 text-gray-500 text-xs px-3 py-1.5 rounded-lg font-bold active:bg-gray-200">
                            补过
                        </button>
                    </div>
                    <!-- 已过关 -->
                    <div class="task-item p-3 flex justify-between items-center opacity-50 bg-gray-50">
                        <div class="flex items-center gap-2">
                            <i class="fa-solid fa-circle-check text-green-500"></i>
                            <span class="text-sm text-gray-500 line-through">课后习题</span>
                        </div>
                        <span class="text-[10px] text-gray-400">12/05 完成</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 课程 2: 全部完成 (默认折叠) -->
        <div class="lesson-card status-done mb-6 pl-8 relative completed-card">
            <div class="timeline-dot w-4 h-4 rounded-full border-4 absolute left-[18px] top-4 box-content bg-white"></div>
            
            <div class="card-body bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="p-3 flex justify-between items-center cursor-pointer" onclick="toggleCard(this)">
                    <div>
                        <div class="text-xs text-gray-400 mb-0.5">第 2 课</div>
                        <div class="font-bold text-gray-600">走月亮</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-green-600 font-bold bg-green-50 px-2 py-0.5 rounded">3/3 全对</span>
                        <i class="fa-solid fa-chevron-down text-gray-300 transition-transform"></i>
                    </div>
                </div>
                <!-- 折叠的内容 -->
                <div class="task-list hidden border-t border-gray-100">
                    <div class="task-item p-3 flex justify-between items-center">
                        <span class="text-sm text-gray-500"><i class="fa-solid fa-circle-check text-green-500 mr-2"></i>朗读课文</span>
                        <span class="text-[10px] text-gray-400">12/02</span>
                    </div>
                    <div class="task-item p-3 flex justify-between items-center">
                        <span class="text-sm text-gray-500"><i class="fa-solid fa-circle-check text-green-500 mr-2"></i>优美句子摘抄</span>
                        <span class="text-[10px] text-gray-400">12/03</span>
                    </div>
                    <div class="task-item p-3 flex justify-between items-center">
                        <span class="text-sm text-gray-500"><i class="fa-solid fa-circle-check text-green-500 mr-2"></i>小练笔</span>
                        <span class="text-[10px] text-gray-400">12/03</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 课程 3: 全部完成 -->
        <div class="lesson-card status-done mb-6 pl-8 relative completed-card">
            <div class="timeline-dot w-4 h-4 rounded-full border-4 absolute left-[18px] top-4 box-content bg-white"></div>
            <div class="card-body bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="p-3 flex justify-between items-center cursor-pointer" onclick="toggleCard(this)">
                    <div>
                        <div class="text-xs text-gray-400 mb-0.5">第 1 课</div>
                        <div class="font-bold text-gray-600">观潮</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-green-600 font-bold bg-green-50 px-2 py-0.5 rounded">5/5 全对</span>
                        <i class="fa-solid fa-chevron-down text-gray-300 transition-transform"></i>
                    </div>
                </div>
                <div class="task-list hidden border-t border-gray-100">
                    <!-- 内容省略 -->
                </div>
            </div>
        </div>

    </div>

</div>

<script>
    function toggleCard(header) {
        const body = header.nextElementSibling;
        const icon = header.querySelector('.fa-chevron-down');
        
        if (body.classList.contains('hidden')) {
            body.classList.remove('hidden');
            if(icon) icon.style.transform = 'rotate(180deg)';
        } else {
            body.classList.add('hidden');
            if(icon) icon.style.transform = 'rotate(0deg)';
        }
    }

    function switchSub(key, el) {
        document.querySelectorAll('button').forEach(b => {
            if(b.parentElement.classList.contains('flex') && b.innerText.match(/语文|数学|英语/)) {
                b.className = "flex-1 py-1.5 rounded-md text-gray-500 text-sm font-bold transition-all";
            }
        });
        el.className = "flex-1 py-1.5 rounded-md bg-white shadow text-blue-600 text-sm font-bold transition-all";
    }

    function toggleCompleted(checkbox) {
        const doneCards = document.querySelectorAll('.completed-card');
        doneCards.forEach(card => {
            card.style.display = checkbox.checked ? 'none' : 'block';
        });
    }

    function passTask(btn) {
        // 模拟补过动画
        const row = btn.parentElement;
        row.style.opacity = '0.5';
        row.style.background = '#F9FAFB';
        
        btn.outerHTML = '<span class="text-green-600 font-bold text-xs">刚补过</span>';
        row.querySelector('.fa-circle').className = 'fa-solid fa-circle-check text-green-500';
        row.querySelector('.font-medium').classList.add('line-through', 'text-gray-500');
    }
</script>

</body>
</html>
```

### 💡 设计核心逻辑

#### 1. 数据的“折叠与展开”
*   **默认状态**：已全部完成的课程（绿色卡片）是**折叠**的。老师不需要关心已经翻篇的内容。
*   **异常状态**：有未完成任务的课程（橙色卡片）是**默认展开**的。老师一进来就能看到“第3课还有生字没默写”。

#### 2. “补过”场景的优化
*   这个页面的核心使用场景是：**“放学后留堂”** 或 **“期末复习清算”**。
*   老师对着这个列表，叫来唐艺馨同学：“来，第3课的生字再默写一遍。”
*   学生完成后，老师直接点击列表里的 **[补过]** 按钮。
*   **数据联动**：这个操作会实时更新后台数据库，并且增加该学生的积分（虽然是补过，但也要奖励努力）。

#### 3. 视觉降噪
*   左侧有一条贯穿的时间轴线，把零散的任务串联成一条“学习路径”。
*   使用 **红/绿/灰** 三色状态灯，让老师一秒钟就能扫描出问题所在。

这个页面配合之前的 v11.0，彻底解决了“过程管理”中**数据回溯难**的痛点。